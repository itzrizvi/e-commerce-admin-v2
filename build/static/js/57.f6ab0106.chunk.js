(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[57],{1042:function(e,t,a){"use strict";a.r(t);a(89);var n=a(32),r=(a(152),a(43)),l=(a(69),a(20)),d=(a(70),a(14)),o=(a(92),a(25)),c=(a(134),a(72)),u=(a(167),a(77)),i=a(6),s=a(9),m=(a(405),a(333)),p=a(0),b=a.n(p),f=a(26),h=a.n(f),E=a(142),O=a(108),y=a(107),v=a(71),j=a(75),g=a(12),S=a(153),D=a.n(S),_=a(660),I=a(218),A=a(46),w=a(28),T=a(21),k=a(39),C=a(169),x=a(135),P=a.n(x),N=a(124),U=a.n(N),M=a(244),Y=a.n(M),z=a(252),L=a(219),R=m.a.RangePicker,q=!1;t.default=function(){var e,t=Object(p.useState)({data:[],loading:!1,error:""}),a=Object(s.a)(t,2),m=a[0],f=a[1],S=Object(k.d)((function(e){return e.auth.token})),x=Object(p.useState)(!1),N=Object(s.a)(x,2),M=N[0],F=N[1],Q=Object(j.useHistory)(),G=Object(j.useLocation)().search,H=Y.a.parse(G),K=Object(p.useState)(!1),W=Object(s.a)(K,2),B=W[0],J=W[1],$=Object(p.useState)({data:[],loading:!1,error:""}),V=Object(s.a)($,2),X=V[0],Z=V[1],ee=Object(p.useState)({data:[],loading:!1,error:""}),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=Object(p.useState)({data:[],loading:!1,error:""}),le=Object(s.a)(re,2),de=le[0],oe=le[1],ce=Object(p.useState)(!0),ue=Object(s.a)(ce,2),ie=ue[0],se=ue[1],me=Object(p.useState)(null),pe=Object(s.a)(me,2),be=pe[0],fe=pe[1],he=Object(p.useState)([]),Ee=Object(s.a)(he,2),Oe=Ee[0],ye=Ee[1],ve=Object(p.useState)(null),je=Object(s.a)(ve,2),ge=je[0],Se=je[1],De=Object(p.useState)(!1),_e=Object(s.a)(De,2),Ie=_e[0],Ae=_e[1],we=Object(p.useState)({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""}),Te=Object(s.a)(we,2),ke=Te[0],Ce=Te[1];Object(p.useEffect)((function(){if(H&&0!==ae.data.length)if(H.status)switch(Ae(!0),H.status){case L.a.STOCK_CHECK:!function(e,t){if(!Object(T.a)(t))return Q.push("/admin/403");Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{statuses:ke.statuses.concat(null===ae||void 0===ae?void 0:ae.data.filter((function(t){return t.slug===e})).shift().id)})}))}(L.a.STOCK_CHECK,"order-stock-check")}else if(!Object(T.a)("order"))return Q.push("/admin/403")}),[ae.data.length]);var xe=[{title:"Order Id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1},render:function(e,t){return b.a.createElement(g.b,{to:"/admin/order/view?id=".concat(t.id)},e)}},{title:"Customer",dataIndex:["customer","first_name"],key:"first_name",width:150,render:function(e,t){return"".concat(e," ").concat(t.customer.last_name)},sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Customer Email",dataIndex:["customer","email"],key:"email",width:200,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"Total Amount",dataIndex:"total",key:"total",align:"center",width:120,render:function(e){return"$".concat(e)},sorter:function(e,t){return e.total>t.total?1:-1}},{title:"Status",dataIndex:["orderStatus","name"],key:"name",align:"center",width:150,render:function(e){return b.a.createElement("span",{style:{borderRadius:"4em",padding:".5em 1.5em",color:"Pending"===e?"#feaf00":"Completed"===e?"#2fb083":"",background:"Pending"===e?"#fef6e6":"Completed"===e?"#ebf9f4":""}},e)},sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Payment Method",dataIndex:["paymentmethod","name"],key:"name",width:150,sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Date Added",dataIndex:"createdAt",key:"createdAt",align:"center",width:150,sorter:function(e,t){return e.createdAt===t.createdAt?0:e.createdAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Date Updated",dataIndex:"updatedAt",key:"updatedAt",align:"center",width:150,sorter:function(e,t){return e.updatedAt===t.updatedAt?0:e.updatedAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"action",width:140,align:"center",key:"createdAt",render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(u.a,{placement:"topLeft",title:"Edit Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/order/edit/".concat(t.id)},b.a.createElement(D.a,{name:"edit",style:{margin:".5em 1em",color:"#5F63F2"}}))),b.a.createElement(u.a,{placement:"topLeft",title:"Make Purchase Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/po/add?order_id=".concat(t.id)},b.a.createElement(D.a,{name:"cart-plus",style:{margin:".5em 1em",color:"#e67e22"}}))))}}],Pe=function(e,t){return[U()(e,"YYYY-MM-DD"),U()(t,"YYYY-MM-DD")]};return Object(p.useEffect)((function(){f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})})),w.j.query({query:z.a.GET_PAYMENT_METHOD_LIST,context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getPaymentMethodListPublic;a.status&&Z(a)})).catch((function(e){Z((function(e){return Object(i.a)(Object(i.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Z((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})})),f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})}))})),w.j.query({query:C.a.GET_ORDER_STATUS_LIST,context:{headers:{TENANTID:"100001",Authorization:S}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderStatusList;a.status&&ne(a)})).catch((function(e){ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){ne((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})})),f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})}))})),w.j.query({query:C.a.GET_ORDER_UPDATE_ADMIN_LIST,context:{headers:{TENANTID:"100001",Authorization:S}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderUpdateAdminList;a.status&&oe(a)})).catch((function(e){oe((function(e){return Object(i.a)(Object(i.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){oe((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})})),f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})}))})),q&&(ke.paymentmethods.length>0||ke.productIds.length>0||ke.statuses.length>0||ke.updatedby.length>0||""!==ke.searchQuery||""!==ke.orderEntryEndDate||""!==ke.orderEntryStartDate||""!==ke.orderUpdatedEndDate||""!==ke.orderUpdatedStartDate?se(!1):se(!0)),q=!0}),[ke]),b.a.createElement(b.a.Fragment,null,b.a.createElement(E.a,{title:"List Orders",buttons:[b.a.createElement("div",{key:"1",className:"page-header-actions"},b.a.createElement(v.a,{size:"small",type:"white",onClick:function(){return F((function(e){return!e}))}},b.a.createElement(h.a,{icon:"filter"}),"Filter"),b.a.createElement(v.a,{size:"small",type:"white",onClick:function(){fe(null),se(!0),Se(null),Ce({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""})}},b.a.createElement(_.a,null),"Reset Filter"),b.a.createElement(g.b,{to:"/admin/order/add"},b.a.createElement(v.a,{size:"small",title:"Add Order",type:"primary"},b.a.createElement(h.a,{icon:"plus"}))))]}),b.a.createElement(O.b,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{sm:24,xs:24},b.a.createElement(y.a,{headless:!0},m.loading?b.a.createElement("div",{className:"spin"},b.a.createElement(c.a,null)):m.error?b.a.createElement("p",null,m.error):b.a.createElement(b.a.Fragment,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{span:18},b.a.createElement(o.a,{style:{height:"42px"},placeholder:"Search Order By Customer...",prefix:b.a.createElement(I.a,null),value:null===ke||void 0===ke?void 0:ke.searchQuery,onChange:function(e){e.persist();var t=e.target.value;Ce((function(e){return Object(i.a)(Object(i.a)({},e),{},{searchQuery:t})}))}})),b.a.createElement(d.a,{span:6},b.a.createElement(v.a,{style:{height:"42px"},size:"large",type:"primary",disabled:ie,onClick:function(){var e,t,a,n,r;f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})})),w.j.query({query:C.a.GET_ALL_ORDER,variables:{query:{searchQuery:null!==(e=ke.searchQuery)&&void 0!==e?e:"",productIds:ke.productIds.length?ke.productIds:null,paymentmethods:ke.paymentmethods.length?ke.paymentmethods:null,statuses:ke.statuses.length?ke.statuses:null,updatedby:ke.updatedby.length?ke.updatedby:null,orderEntryStartDate:null!==(t=ke.orderEntryStartDate)&&void 0!==t?t:"",orderEntryEndDate:null!==(a=ke.orderEntryEndDate)&&void 0!==a?a:"",orderUpdatedStartDate:null!==(n=ke.orderUpdatedStartDate)&&void 0!==n?n:"",orderUpdatedEndDate:null!==(r=ke.orderUpdatedEndDate)&&void 0!==r?r:""}},context:{headers:{TENANTID:"100001",Authorization:S}},fetchPolicy:"network-only"}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderlistAdmin;a.status&&f(a)})).catch((function(e){f((function(e){return Object(i.a)(Object(i.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){f((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1})})),J(!B)}))}},"Search"))),b.a.createElement("br",null),b.a.createElement("br",null),M&&b.a.createElement("div",{style:{marginBottom:"2.5em"}},b.a.createElement(l.a,{gutter:16},b.a.createElement(d.a,{span:8},"Product: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Product",options:Oe,showSearch:!0,allowClear:!0,optionFilterProp:"label",size:"middle",mode:"multiple",value:null===ke||void 0===ke?void 0:ke.productIds,onDeselect:function(e){return Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{productIds:t.productIds.filter((function(t){return t!==e}))})}))},onSelect:function(e){Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{productIds:ke.productIds.concat(parseInt(e))})}))},onSearch:function(e){e.length>3?w.j.query({query:z.a.SEARCH_PRODUCT,variables:{query:{searchQuery:e}},context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSearchedProducts;a.status&&ye(a.data.map((function(e){return Object(i.a)({label:(null===e||void 0===e?void 0:e.prod_name)+(null===e||void 0===e?void 0:e.prod_slug)+(null===e||void 0===e?void 0:e.prod_sku)+(null===e||void 0===e?void 0:e.prod_partnum)+(null===e||void 0===e?void 0:e.mfg_build_part_number),value:null===e||void 0===e?void 0:e.id},e)})))})):ye([])}})),b.a.createElement(d.a,{span:8},"Payment Method: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:X.loading?"Loading..":"Select Payment Method",size:"middle",mode:"multiple",optionFilterProp:"label",value:null===ke||void 0===ke?void 0:ke.paymentmethods,onDeselect:function(e){return Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{paymentmethods:t.paymentmethods.filter((function(t){return t!==e}))})}))},onSelect:function(e){Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{paymentmethods:ke.paymentmethods.concat(parseInt(e))})}))},options:null===X||void 0===X?void 0:X.data.map((function(e){return{label:e.name,value:e.id}}))})),b.a.createElement(d.a,{span:8},"Order Status : ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:ae.loading?"Loading..":"Select Order Status",disabled:Ie,size:"middle",mode:"multiple",optionFilterProp:"label",value:null===ke||void 0===ke?void 0:ke.statuses,onDeselect:function(e){return Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{statuses:t.statuses.filter((function(t){return t!==e}))})}))},onSelect:function(e){Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{statuses:ke.statuses.concat(parseInt(e))})}))},options:null===ae||void 0===ae?void 0:ae.data.map((function(e){return{label:e.name,value:e.id}}))}))),b.a.createElement(l.a,{gutter:16,style:{marginTop:".5em"}},b.a.createElement(d.a,{span:8},"Updated By: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},size:"middle",mode:"multiple",value:null===ke||void 0===ke?void 0:ke.updatedby,onDeselect:function(e){return Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{updatedby:t.updatedby.filter((function(t){return t!==e}))})}))},placeholder:de.loading?"Loading...":"Select Admins..",options:null===de||void 0===de||null===(e=de.data)||void 0===e?void 0:e.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})),onSelect:function(e){Ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{updatedby:ke.updatedby.concat(parseInt(e))})}))}})),b.a.createElement(d.a,{span:8},"Date Added: ",b.a.createElement("br",null),b.a.createElement(R,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==be?be:"",onChange:function(e){e?(Ce((function(t){var a,n;return Object(i.a)(Object(i.a)({},t),{},{orderEntryStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderEntryEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),fe(Pe(e[0],e[1]))):fe(null)}})),b.a.createElement(d.a,{span:8},"Date Updated: ",b.a.createElement("br",null),b.a.createElement(R,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==ge?ge:"",onChange:function(e){e?(Ce((function(t){var a,n;return Object(i.a)(Object(i.a)({},t),{},{orderUpdatedStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderUpdatedEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),Se(Pe(e[0],e[1]))):Se(null)}})))),b.a.createElement("span",{className:"psp_list"},b.a.createElement(n.a,{className:"table-responsive",columns:xe,rowKey:"id",size:"small",dataSource:(null===m||void 0===m?void 0:m.data)?m.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:A.a.ORDER_PER_PAGE,total:(null===m||void 0===m?void 0:m.data)?m.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);
//# sourceMappingURL=57.f6ab0106.chunk.js.map