(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[47],{1017:function(t,e,a){"use strict";a.r(e);a(89);var n=a(32),u=(a(152),a(43)),r=(a(69),a(20)),l=(a(70),a(14)),i=(a(92),a(25)),o=(a(134),a(72)),s=(a(68),a(22)),c=a(6),d=a(9),m=(a(405),a(333)),b=a(0),p=a.n(b),E=a(660),g=a(218),v=a(142),f=a(108),h=a(107),O=a(12),y=a(153),j=a.n(y),_=a(50),S=a(730),A=a(39),Q=a(135),q=a.n(Q),x=a(26),D=a.n(x),T=a(21),I=a(46),w=a(93),L=a.n(w),k=a(124),M=a.n(k),U=m.a.RangePicker,Y=!1;e.default=function(){var t,e;Object(T.g)("quote");var a=Object(b.useState)({data:[],loading:!1,error:""}),m=Object(d.a)(a,2),y=m[0],Q=m[1],x=Object(b.useState)(!1),w=Object(d.a)(x,2),k=w[0],N=w[1],z=Object(A.d)((function(t){return t.auth.token})),F=Object(b.useState)(!1),G=Object(d.a)(F,2),C=G[0],$=G[1],R=Object(b.useState)({data:[],isLoading:!0}),P=Object(d.a)(R,2),B=P[0],J=P[1],K=Object(b.useState)(null),V=Object(d.a)(K,2),W=V[0],H=V[1],X=Object(b.useState)(!0),Z=Object(d.a)(X,2),tt=Z[0],et=Z[1],at=Object(b.useState)({status:[],startDate:"",endDate:"",minAmount:"",maxAmount:"",searchQuery:""}),nt=Object(d.a)(at,2),ut=nt[0],rt=nt[1];Object(b.useEffect)((function(){_.b.query({query:S.a.GET_ALL_QUOTE_STATUS,context:{headers:{TENANTID:"100001",Authorization:L.a.get("psp_t")}}}).then((function(t){var e,a=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.getQuoteStatusList;a.status&&J({data:a.data,isLoading:!1})}))}),[]),Object(b.useEffect)((function(){Y&&(ut.status.length>0||""!==ut.searchQuery||""!==ut.endDate||""!==ut.startDate||""!==ut.minAmount||""!==ut.maxAmount?et(!1):et(!0)),Y=!0}),[ut]);var lt=[{title:"Quoted By",dataIndex:["quotedby","first_name"],key:"first_name",width:100,ellipsis:!0,render:function(t,e){return"".concat(t," ").concat(e.quotedby.last_name)}},{title:"Email",dataIndex:["quotedby","email"],key:"email",width:150,ellipsis:!0,sorter:function(t,e){return t.email>e.email?1:-1}},{title:"Total",dataIndex:"grand_total",key:"grand_total",width:100,ellipsis:!0,sorter:function(t,e){return t.grand_total>e.grand_total?1:-1}},{title:"Status",dataIndex:"status",key:"status",align:"left",width:150,render:function(t){return p.a.createElement("span",{style:{borderRadius:".5em",padding:".5em 2.5em"}},t)},sorter:function(t,e){return t.status>e.status?1:-1}},{title:"Note",dataIndex:"note",key:"note",width:250,ellipsis:!0,sorter:function(t,e){return t.note>e.note?1:-1}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:120,align:"center",render:function(t,e){return p.a.createElement("span",{className:"status-text"},p.a.createElement(q.a,{format:"DD-MMM-YYYY"},parseInt(t)))}},{title:"Action",dataIndex:"action",align:"right",key:"action",width:100,render:function(t,e){return p.a.createElement(p.a.Fragment,null,p.a.createElement(O.b,{to:"/admin/products/quote/edit/".concat(e.id),style:{margin:".5em",color:"#096dd9"}},p.a.createElement(j.a,{name:"edit",style:{color:"#5F63F2"}})))}}],it=function(t,e){return[M()(t,"YYYY-MM-DD"),M()(e,"YYYY-MM-DD")]};return p.a.createElement(p.a.Fragment,null,p.a.createElement(v.a,{title:"Quote List",buttons:[p.a.createElement("div",{key:"1",className:"page-header-actions"},p.a.createElement(s.a,{size:"small",type:"white",onClick:function(){return N((function(t){return!t}))}},p.a.createElement(D.a,{icon:"filter"}),"Filter"),p.a.createElement(s.a,{size:"small",type:"white",onClick:function(){H(null),et(!0),rt({status:[],startDate:"",endDate:"",minAmount:"",maxAmount:"",searchQuery:""})}},p.a.createElement(E.a,null),"Reset Filter"))]}),p.a.createElement(f.b,null,p.a.createElement(r.a,{gutter:25},p.a.createElement(l.a,{sm:24,xs:24},p.a.createElement(h.a,{headless:!0},y.loading?p.a.createElement("div",{className:"spin"},p.a.createElement(o.a,null)):y.error?p.a.createElement("p",null,y.error):p.a.createElement(p.a.Fragment,null,p.a.createElement(r.a,{gutter:25},p.a.createElement(l.a,{span:18},p.a.createElement(i.a,{style:{height:"42px"},placeholder:"Search Quotes...",prefix:p.a.createElement(g.a,null),value:null===ut||void 0===ut?void 0:ut.searchQuery,onChange:function(t){t.persist();var e=t.target.value;rt((function(t){return Object(c.a)(Object(c.a)({},t),{},{searchQuery:e})}))}})),p.a.createElement(l.a,{span:6},p.a.createElement(s.a,{size:"large",type:"primary",disabled:tt,onClick:function(){var t,e,a,n,u,r;Q((function(t){return Object(c.a)(Object(c.a)({},t),{},{loading:!0})})),_.b.query({query:S.a.GET_ALL_QUOTE,variables:{query:{searchQuery:null!==(t=ut.searchQuery)&&void 0!==t?t:"",statuses:null!==(e=ut.status)&&void 0!==e?e:null,quoteEntryStartDate:null!==(a=ut.startDate)&&void 0!==a?a:"",quoteEntryEndDate:null!==(n=ut.endDate)&&void 0!==n?n:"",minAmount:null!==(u=parseFloat(ut.minAmount))&&void 0!==u?u:null,maxAmount:null!==(r=parseFloat(ut.maxAmount))&&void 0!==r?r:null}},context:{headers:{TENANTID:"100001",Authorization:z}}}).then((function(t){var e,a=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.getSubmittedQuoteList;(null===a||void 0===a?void 0:a.status)&&Q(a)})).catch((function(t){Q((function(t){return Object(c.a)(Object(c.a)({},t),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Q((function(t){return Object(c.a)(Object(c.a)({},t),{},{loading:!1})})),$(!C)}))}},"Search"))),p.a.createElement("br",null),k&&p.a.createElement("div",{style:{marginBottom:"2.5em"}},p.a.createElement(r.a,{gutter:16},p.a.createElement(l.a,{span:8},"Status: ",p.a.createElement("br",null),p.a.createElement(u.a,{style:{width:"100%"},placeholder:"Select status",size:"middle",mode:"multiple",value:null===ut||void 0===ut?void 0:ut.status,onDeselect:function(t){return rt((function(e){return Object(c.a)(Object(c.a)({},e),{},{status:e.status.filter((function(e){return e!==t}))})}))},onSelect:function(t){rt((function(e){return Object(c.a)(Object(c.a)({},e),{},{status:ut.status.concat(t)})}))},options:null===B||void 0===B?void 0:B.data.map((function(t){return{label:t.name,value:t.slug}}))})),p.a.createElement(l.a,{span:8},"Date: ",p.a.createElement("br",null),p.a.createElement(U,{style:{height:"40px",width:"100%"},size:"middle",allowClear:!0,picker:"date",value:""!==W?W:"",onChange:function(t){t?(rt((function(e){var a,n;return Object(c.a)(Object(c.a)({},e),{},{startDate:null!==(a=t[0]._d)&&void 0!==a?a:"",endDate:null!==(n=t[1]._d)&&void 0!==n?n:""})})),H(it(t[0],t[1]))):H(null)}})),p.a.createElement(l.a,{span:8},"Amount: ",p.a.createElement("br",null),p.a.createElement(i.a.Group,{compact:!0,size:"default"},p.a.createElement(i.a,{type:"text",placeholder:"Min Amount",style:{width:"50%",height:"40px"},value:null!==(t=null===ut||void 0===ut?void 0:ut.minAmount)&&void 0!==t?t:"",onChange:function(t){t.persist(),rt((function(e){var a;return Object(c.a)(Object(c.a)({},e),{},{minAmount:null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value})}))}}),p.a.createElement(i.a,{type:"text",placeholder:"Max Ampunt",style:{width:"50%",height:"40px"},value:null!==(e=null===ut||void 0===ut?void 0:ut.maxAmount)&&void 0!==e?e:"",onChange:function(t){t.persist(),rt((function(e){var a;return Object(c.a)(Object(c.a)({},e),{},{maxAmount:null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value})}))}}))))),p.a.createElement("span",{className:"psp_list"},p.a.createElement(n.a,{className:"table-responsive",columns:lt,pagination:{defaultPageSize:I.a.QUOTE_PER_PAGE,total:y.data?y.data.length:0,showTotal:function(t,e){return"".concat(e[0],"-").concat(e[1]," of ").concat(t," items")}},rowKey:"id",size:"small",dataSource:y.data?y.data:[]}))))))))}},730:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n,u,r,l,i,o=a(7),s=a(15),c={GET_ALL_QUOTE_STATUS:Object(s.d)(n||(n=Object(o.a)(["\n    query getQuoteStatusList {\n    getQuoteStatusList {\n      message\n      status\n      tenant_id\n      data {\n        id\n        name\n        slug\n        status\n      }\n    }\n  }"]))),GET_ALL_QUOTE:Object(s.d)(u||(u=Object(o.a)(["\n    query getSubmittedQuoteList($query:SubmittedQuoteListInput) {\n      getSubmittedQuoteList(query:$query) {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          updatedAt\n          quotedby {\n            id\n            first_name\n            last_name\n            email\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_QUOTE:Object(s.d)(r||(r=Object(o.a)(["\n    query getSingleSubmittedQuote($query: GetSingleSubmittedQuoteInput) {\n      getSingleSubmittedQuote(query: $query) {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          submittedquoteitems {\n            id\n            submittedquote_id\n            price\n            quantity\n            total_price\n            product {\n              id\n              prod_name\n              prod_slug\n              prod_sku\n              prod_partnum\n              createdAt\n            }\n            createdAt\n          }\n        }\n      }\n    }\n  "]))),REMOVE_QUOTE_ITEM:Object(s.d)(l||(l=Object(o.a)(["\n    mutation quoteItemDelete($data: QuoteItemDeleteInput) {\n      quoteItemDelete(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SUBMIT_QUOTE:Object(s.d)(i||(i=Object(o.a)(["\n    mutation updateSubmittedQuote($data: SubmittedQuoteUpdateInput) {\n      updateSubmittedQuote(data: $data) {\n        message\n        status\n      }\n    }\n  "])))}}}]);
//# sourceMappingURL=47.b60c1cc4.chunk.js.map