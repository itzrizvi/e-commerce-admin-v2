(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[55],{661:function(e,t,a){"use strict";var r=a(3),n=a(0),l={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"},i=a(15),c=function(e,t){return n.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:l}))};c.displayName="RetweetOutlined";t.a=n.forwardRef(c)},954:function(e,t,a){"use strict";a.r(t);a(150);var r=a(77),n=(a(202),a(63)),l=(a(200),a(97)),i=(a(201),a(74)),c=(a(148),a(45)),u=(a(166),a(98)),s=a(9),o=a(62),d=a(23),m=(a(640),a(643)),f=a(0),E=a.n(f),b=a(21),v=a.n(b),h=a(217),y=a(165),p=a(164),g=a(661),S=a(192),O=a(287),j=a(71),_=a(50),w=a(12),D=a(126),x=a.n(D),V=a(135),k=a(222),C=a(152),I=a(22),z=a(219),A=a.n(z),N=a(378),Y=a.n(N),F=a(76),M=m.a.RangePicker,L=!1;t.default=function(){var e;Object(I.f)("customer");var t=Object(_.d)((function(e){return e.auth.token})),a=Object(f.useState)(!1),m=Object(d.a)(a,2),b=m[0],D=m[1],z=Object(f.useState)(!1),N=Object(d.a)(z,2),R=N[0],Q=N[1],T=Object(f.useState)(!0),P=Object(d.a)(T,2),q=P[0],B=P[1],G=Object(f.useState)(null),H=Object(d.a)(G,2),J=H[0],U=H[1],K=Object(f.useState)({data:[],loading:!1,error:""}),W=Object(d.a)(K,2),X=W[0],Z=W[1],$=Object(f.useState)((e={customerStatus:[],customerEntryStartDate:"",customerEntryEndDate:"",emailVerified:""},Object(o.a)(e,"customerStatus",""),Object(o.a)(e,"searchQuery",""),e)),ee=Object(d.a)($,2),te=ee[0],ae=ee[1],re=[{title:"id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1}},{title:"Image",dataIndex:"id",key:"id",width:90,render:function(e,t){return E.a.createElement(k.LazyLoadImage,{effect:"blur",width:"40",src:Object(C.renderImage)(t.id,t.image,"user","128x128",!0),onError:C.errorImageSrc,alt:t.id})}},{title:"Email",dataIndex:"email",key:"email",width:150,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"First Name",dataIndex:"first_name",width:150,key:"first_name",sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Last Name",dataIndex:"last_name",width:150,key:"last_name",sorter:function(e,t){return e.last_name>t.last_name?1:-1}},{title:"Verified",dataIndex:"email_verified",key:"email_verified",width:120,align:"center",render:function(e){return e.toString()},sorter:function(e,t){return e.email_verified===t.email_verified?0:e.email_verified?-1:1},filters:[{text:"Verified",value:!0},{text:"Not Verified",value:!1}],onFilter:function(e,t){return t.email_verified===e}},{title:"Status",dataIndex:"user_status",key:"user_status",width:120,align:"center",render:function(e){return e.toString()},sorter:function(e,t){return e.user_status===t.user_status?0:e.user_status?-1:1},filters:[{text:"Enabled",value:!0},{text:"Disabled",value:!1}],onFilter:function(e,t){return t.user_status===e}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:150,align:"center",sorter:function(e,t){return e.createdAt===t.createdAt?0:e.createdAt?-1:1},render:function(e,t){return E.a.createElement("span",{className:"status-text"},E.a.createElement(A.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"id",key:"id",width:90,align:"center",render:function(e,t){return E.a.createElement(E.a.Fragment,null,E.a.createElement(w.b,{to:"/admin/customers/edit/".concat(e),style:{marginRight:"10px"}},E.a.createElement(x.a,{name:"edit",style:{color:"#5F63F2"}})),E.a.createElement(w.b,{to:"/admin/customers/view/".concat(e)},E.a.createElement(x.a,{name:"eye",style:{color:"rgb(46, 204, 113)"}})))}}],ne=function(e,t){return[Y()(e,"YYYY-MM-DD"),Y()(t,"YYYY-MM-DD")]};return Object(f.useEffect)((function(){L&&(""!==te.searchQuery||""!==te.customerEntryStartDate||""!==te.customerEntryEndDate||""!==te.emailVerified||""!==te.customerStatus?B(!1):B(!0)),L=!0}),[te]),E.a.createElement(E.a.Fragment,null,E.a.createElement(h.a,{title:"Customers",buttons:[E.a.createElement("div",{key:"1",className:"page-header-actions"},E.a.createElement(O.a,{size:"small",type:"white",onClick:function(){return D((function(e){return!e}))}},E.a.createElement(v.a,{icon:"filter"}),"Filter"),E.a.createElement(O.a,{size:"small",type:"white",onClick:function(){U(null),B(!0),ae({customerEntryStartDate:"",customerEntryEndDate:"",emailVerified:"",customerStatus:"",searchQuery:""})}},E.a.createElement(g.a,null),"Reset Filter"),E.a.createElement(w.b,{to:"/admin/customers/add"},E.a.createElement(O.a,{size:"small",title:"Add Customer",type:"primary"},E.a.createElement(v.a,{icon:"user-plus"}))))]}),E.a.createElement(y.b,null,E.a.createElement(l.a,{gutter:25},E.a.createElement(i.a,{sm:24,xs:24},E.a.createElement(p.a,{headless:!0},X.loading?E.a.createElement("div",{className:"spin"},E.a.createElement(u.a,null)):X.error?E.a.createElement("p",null,X.error):E.a.createElement(E.a.Fragment,null,E.a.createElement(l.a,{gutter:25},E.a.createElement(i.a,{span:18},E.a.createElement(c.a,{placeholder:"Search Customer...",prefix:E.a.createElement(S.a,null),value:null===te||void 0===te?void 0:te.searchQuery,onChange:function(e){e.persist();var t=e.target.value;ae((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchQuery:t})}))}})),E.a.createElement(i.a,{span:6},E.a.createElement(O.a,{size:"large",type:"primary",disabled:q,onClick:function(){var e,a,r,n,l;Z((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0})})),j.j.query({query:j.i.GET_ALL_CUSTOMER,variables:{query:{searchQuery:null!==(e=te.searchQuery)&&void 0!==e?e:"",customerStatus:null!==(a=te.customerStatus)&&void 0!==a?a:"",emailVerified:null!==(r=te.emailVerified)&&void 0!==r?r:"",customerEntryStartDate:null!==(n=te.customerEntryStartDate)&&void 0!==n?n:"",customerEntryEndDate:null!==(l=te.customerEntryEndDate)&&void 0!==l?l:""}},context:{headers:{TENANTID:"100001",Authorization:t}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCustomer;if(!(null===a||void 0===a?void 0:a.status))return Object(F.a)();Z(a)})).finally((function(){Z((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})})),Q(!R)}))}},"Search"))),E.a.createElement("br",null),E.a.createElement("br",null),b&&E.a.createElement("div",{style:{marginBottom:"2.5em"}},E.a.createElement(l.a,{gutter:16},E.a.createElement(i.a,{span:8},"Customer Status: ",E.a.createElement("br",null),E.a.createElement(n.a,{style:{width:"100%"},placeholder:"Select customer status",size:"middle",mode:"single",value:"true"===(null===te||void 0===te?void 0:te.customerStatus)||"false"!==(null===te||void 0===te?void 0:te.customerStatus)&&"",onDeselect:function(e){return ae((function(t){return Object(s.a)(Object(s.a)({},t),{},{customerStatus:t.customerStatus.filter((function(t){return t!==e}))})}))},onSelect:function(e){ae((function(t){return Object(s.a)(Object(s.a)({},t),{},{customerStatus:e.toString()})}))},options:[{label:"Select customer status",value:"",hidden:!0},{label:"Enable",value:!0},{label:"Disable",value:!1}]})),E.a.createElement(i.a,{span:8},"Email Verified: ",E.a.createElement("br",null),E.a.createElement(n.a,{style:{width:"100%"},placeholder:"Select email status",size:"middle",mode:"single",value:"true"===(null===te||void 0===te?void 0:te.emailVerified)||"false"!==(null===te||void 0===te?void 0:te.emailVerified)&&"",onDeselect:function(e){return ae((function(t){return Object(s.a)(Object(s.a)({},t),{},{emailVerified:t.emailVerified.filter((function(t){return t!==e}))})}))},onSelect:function(e){ae((function(t){return Object(s.a)(Object(s.a)({},t),{},{emailVerified:e.toString()})}))},options:[{label:"Select email status",value:"",disabled:!0},{label:"Verified",value:!0},{label:"Not Verified",value:!1}]})),E.a.createElement(i.a,{span:8},"Date Added: ",E.a.createElement("br",null),E.a.createElement(M,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==J?J:"",onChange:function(e){e?(ae((function(t){var a,r;return Object(s.a)(Object(s.a)({},t),{},{customerEntryStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",customerEntryEndDate:null!==(r=e[1]._d)&&void 0!==r?r:""})})),U(ne(e[0],e[1]))):U(null)}})))),E.a.createElement("span",{className:"psp_list"},E.a.createElement(r.a,{className:"table-responsive",columns:re,rowKey:"id",size:"small",dataSource:X.data?X.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:V.a.CUSTOMER_PER_PAGE,total:X.data?X.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);