(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[65],{955:function(e,t,r){"use strict";r.r(t);r(200);var a=r(97),o=(r(201),r(74)),n=(r(150),r(77)),u=(r(148),r(45)),s=(r(166),r(98)),c=r(9),i=(r(314),r(218)),l=(r(288),r(69)),m=r(23),d=r(0),p=r.n(d),g=r(21),_=r.n(g),f=r(217),v=r(165),E=r(164),b=r(287),h=r(12),O=r(126),C=r.n(O),j=r(192),S=r(135),y=r(71),G=r(68),U=r.n(G),x=r(22),A=r(76);t.default=function(){Object(x.f)("customer-group");var e=Object(d.useState)({data:[],isLoading:!0}),t=Object(m.a)(e,2),r=t[0],g=t[1],O=Object(d.useState)([]),G=Object(m.a)(O,2),T=G[0],w=G[1],N=Object(d.useState)(""),k=Object(m.a)(N,2),I=k[0],L=k[1],P=[{title:"Group Name",dataIndex:"customer_group_name",key:"customer_group_name",sorter:function(e,t){return e.customer_group_name.toUpperCase()>t.customer_group_name.toUpperCase()?1:-1}},{title:"Group Description",dataIndex:"customergroup_description",key:"customergroup_description",ellipsis:!0,sorter:function(e,t){return e.customergroup_description.toUpperCase()>t.customergroup_description.toUpperCase()?1:-1}},{title:"Sort Order",dataIndex:"customergroup_sortorder",key:"customergroup_sortorder",width:100,align:"center",sorter:function(e,t){return e.customergroup_sortorder===t.customergroup_sortorder?0:e.customergroup_sortorder?-1:1}},{title:"Status",dataIndex:"customergroup_status",key:"customergroup_status",align:"center",width:100,sorter:function(e,t){return e.customergroup_status===t.customergroup_status?0:e.customergroup_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.customergroup_status===e},render:function(e,t){return p.a.createElement(i.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,t){var r={data:{id:e.id,customergroup_status:t}};y.j.mutate({mutation:y.h.UPDATE_CUSTOMER_GROUP,variables:r,context:{headers:{TENANTID:"100001",Authorization:U.a.get("psp_t")}}}).then((function(t){var r,a=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updateCustomerGroup;if(!(null===a||void 0===a?void 0:a.status))return Object(A.a)();l.b.success("".concat(e.customer_group_name," Group Status Updated successfully"))}))}(t,e)}})}},{title:"Action",dataIndex:"action",width:70,align:"right",render:function(e,t){return p.a.createElement(p.a.Fragment,null,p.a.createElement(h.b,{to:"/admin/customers/add-group?id=".concat(t.id)},p.a.createElement(C.a,{name:"edit",style:{margin:".5em 1em"}})))},key:"last_name"}];Object(d.useEffect)((function(){y.j.query({query:y.i.GET_ALL_CUSTOMER_GROUPS,context:{headers:{TENANTID:"100001",Authorization:U.a.get("psp_t")}}}).then((function(e){var t,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCustomerGroups;if(!(null===r||void 0===r?void 0:r.status))return Object(A.a)();g((function(e){return Object(c.a)(Object(c.a)({},e),{},{data:null===r||void 0===r?void 0:r.data,error:""})}))})).finally((function(){g((function(e){return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1})}))}))}),[]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(f.a,{title:"Customers Group",buttons:[p.a.createElement("div",{key:"1",className:"page-header-actions"},p.a.createElement(h.b,{to:"/admin/customers/add-group"},p.a.createElement(b.a,{size:"small",title:"Add Customer Groups",type:"primary"},p.a.createElement(_.a,{icon:"user-plus"}))))]}),p.a.createElement(v.b,null,p.a.createElement(a.a,{gutter:25},p.a.createElement(o.a,{sm:24,xs:24},p.a.createElement(E.a,{headless:!0},r.isLoading?p.a.createElement("div",{className:"spin"},p.a.createElement(s.a,null)):p.a.createElement(p.a.Fragment,null,p.a.createElement(u.a,{placeholder:"Search Group...",prefix:p.a.createElement(j.a,null),onChange:function(e){var t=e.target.value;L(t),w(r.data.filter((function(e){return((null===e||void 0===e?void 0:e.customer_group_name)+(null===e||void 0===e?void 0:e.customergroup_description)+e.customergroup_sortorder).toLowerCase().includes(t.toLowerCase())})))}}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("span",{className:"psp_list"},p.a.createElement(n.a,{className:"table-responsive",columns:P,rowKey:"g_s",size:"small",dataSource:I?T:r.data,rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:S.a.CUSTOMER_GROUPS_PER_PAGE,total:I?T.length:r.data.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);