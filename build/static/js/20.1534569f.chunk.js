(this.webpackJsonpstrikingDash=this.webpackJsonpstrikingDash||[]).push([[20],{466:function(e,t,a){"use strict";a(54),a(467)},467:function(e,t,a){},469:function(e,t,a){"use strict";var n=a(1),r=a(3),l=a(125),i=a(5),c=a.n(i),o=a(7),s=a(14),d=a(0),u=a(49),m=a(48),f=d.forwardRef((function(e,t){var a,n=e.prefixCls,l=void 0===n?"rc-switch":n,i=e.className,f=e.checked,b=e.defaultChecked,h=e.disabled,v=e.loadingIcon,p=e.checkedChildren,E=e.unCheckedChildren,g=e.onClick,O=e.onChange,j=e.onKeyDown,C=Object(s.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),y=Object(u.a)(!1,{value:f,defaultValue:b}),k=Object(o.a)(y,2),w=k[0],N=k[1];function _(e,t){var a=w;return h||(N(a=e),null===O||void 0===O||O(a,t)),a}var x=c()(l,i,(a={},Object(r.a)(a,"".concat(l,"-checked"),w),Object(r.a)(a,"".concat(l,"-disabled"),h),a));return d.createElement("button",Object.assign({},C,{type:"button",role:"switch","aria-checked":w,disabled:h,className:x,ref:t,onKeyDown:function(e){e.which===m.a.LEFT?_(!1,e):e.which===m.a.RIGHT&&_(!0,e),null===j||void 0===j||j(e)},onClick:function(e){var t=_(!w,e);null===g||void 0===g||g(t,e)}}),v,d.createElement("span",{className:"".concat(l,"-inner")},w?p:E))}));f.displayName="Switch";var b=f,h=a(65),v=a(87),p=a(69),E=a(193),g=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},O=d.forwardRef((function(e,t){var a,i=e.prefixCls,o=e.size,s=e.disabled,u=e.loading,m=e.className,f=void 0===m?"":m,O=g(e,["prefixCls","size","disabled","loading","className"]),j=d.useContext(h.b),C=j.getPrefixCls,y=j.direction,k=d.useContext(p.b),w=d.useContext(v.b),N=s||w||u,_=C("switch",i),x=d.createElement("div",{className:"".concat(_,"-handle")},u&&d.createElement(l.a,{className:"".concat(_,"-loading-icon")})),S=c()((a={},Object(r.a)(a,"".concat(_,"-small"),"small"===(o||k)),Object(r.a)(a,"".concat(_,"-loading"),u),Object(r.a)(a,"".concat(_,"-rtl"),"rtl"===y),a),f);return d.createElement(E.a,{insertExtraNode:!0},d.createElement(b,Object(n.a)({},O,{prefixCls:_,className:S,disabled:N,ref:t,loadingIcon:x})))}));O.__ANT_SWITCH=!0;t.a=O},617:function(e,t,a){"use strict";a.r(t);a(143);var n=a(74),r=(a(144),a(34)),l=(a(522),a(520)),i=(a(256),a(191)),c=(a(194),a(145)),o=a(9),s=a(46),d=(a(466),a(469)),u=a(0),m=a.n(u),f=a(18),b=a.n(f),h=a(464),v=a(463),p=a(462),E=a(208),g=a(460),O=a(126),j=a(40),C=a(8),y=a(98),k=a.n(y),w=a(51),N=a.n(w),_=a(192),x=[{title:"UID",dataIndex:"uid",key:"uid",width:120,ellipsis:!0},{title:"Email",dataIndex:"email",key:"email",width:200,ellipsis:!0},{title:"First Name",dataIndex:"first_name",key:"first_name"},{title:"Last Name",dataIndex:"last_name",key:"last_name"},{title:"Roles",dataIndex:"roles",key:"roles",width:150,ellipsis:!0,render:function(e){var t=e.map((function(e){return e.role})).join(", ");return m.a.createElement("p",null,t)}},{title:"Verified",dataIndex:"email_verified",key:"email_verified",render:function(e){return e.toString()},sorter:function(e,t){return Number(t.email_verified)-Number(e.email_verified)}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return m.a.createElement(d.a,{defaultChecked:t.user_status,title:"Status",onChange:function(e){return function(e,t){var a={data:{uid:e.uid,user_status:t}};O.c.mutate({mutation:O.a.ADMIN_UPDATE,variables:a,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(t){var a,n;if(!(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.adminUpdate)||void 0===n?void 0:n.status))return _.b.error(data.message);_.b.success("".concat(e.email," user Status updated successfully."))})).catch((function(e){console.log("\ud83d\ude80 ~ file: AllAdmins.js ~ line 33 ~ handleStatusChange ~ err",e),_.b.error("Something went wrong!!")}))}(t,e)}})}},{title:"Action",dataIndex:"action",render:function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(C.b,{to:"/admin/admin/add-admin?uid=".concat(t.uid,"&first_name=").concat(t.first_name,"&last_name=").concat(t.last_name,"&email=").concat(t.email,"&status=").concat(t.status)},m.a.createElement(k.a,{name:"edit"})))},key:"last_name"}];t.default=function(){var e=Object(j.d)((function(e){return e.auth.token})),t=Object(u.useState)(""),a=Object(s.a)(t,2),d=a[0],f=a[1],y=Object(u.useState)([]),k=Object(s.a)(y,2),w=k[0],N=k[1],_=Object(u.useState)({data:[],isLoading:!0,error:""}),S=Object(s.a)(_,2),A=S[0],I=S[1];Object(u.useEffect)((function(){O.c.query({query:O.b.GET_ALL_STAFF,context:{headers:{TENANTID:"100001",Authorization:e}}}).then((function(e){var t,a;if(!(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.getAllStaff)||void 0===a?void 0:a.isAuth))return I((function(e){return Object(o.a)(Object(o.a)({},e),{},{error:"You Are not Authorized"})}));I((function(t){var a,n;return Object(o.a)(Object(o.a)({},t),{},{data:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getAllStaff)||void 0===n?void 0:n.data,error:""})}))})).catch((function(e){I((function(e){return Object(o.a)(Object(o.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){I((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1})}))}))}),[]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{title:"Users",buttons:[m.a.createElement("div",{key:"1",className:"page-header-actions"},m.a.createElement(C.b,{to:"/admin/admin/add-admin"},m.a.createElement(g.a,{size:"small",title:"Add user",type:"primary"},m.a.createElement(b.a,{icon:"user-plus"}))))]}),m.a.createElement(v.b,null,m.a.createElement(n.a,{gutter:25},m.a.createElement(r.a,{sm:24,xs:24},m.a.createElement(p.a,{headless:!0},A.isLoading?m.a.createElement("div",{className:"spin"},m.a.createElement(c.a,null)):A.error?m.a.createElement("p",null,A.error):m.a.createElement(m.a.Fragment,null,m.a.createElement(i.a,{placeholder:"Search user",prefix:m.a.createElement(E.a,null),onChange:function(e){var t=e.target.value;f(t),N(A.data.filter((function(e){var a;return((null===e||void 0===e?void 0:e.email)+(null===e||void 0===e?void 0:e.first_name)+(null===e||void 0===e?void 0:e.last_name)+(null===e||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.role)).toLowerCase().includes(t.toLowerCase())})))}}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("span",{className:"psp_list"},m.a.createElement(l.a,{className:"table-responsive",pagination:!1,columns:x,rowKey:"uid",size:"small",dataSource:d?w:A.data,rowClassName:function(e,t){return t%2==0?"":"altTableClass"}}))))))))}}}]);