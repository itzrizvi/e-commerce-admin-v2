(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[58],{903:function(e,t,a){"use strict";a.r(t);a(134);var n=a(68),r=(a(135),a(46)),o=(a(261),a(81)),i=(a(258),a(148)),l=(a(199),a(124)),d=a(114),c=a(93),u=a(12),s=a(34),m=(a(282),a(63)),p=a(31),f=(a(123),a(37)),g=a(0),h=a.n(g),E=a(21),y=a.n(E),b=a(147),v=a(146),x=a(145),j=a(179),O=a(56),A=a(11),I=a(201),C=a.n(I),_=a(41),V=a(44),S=a.n(V),D=a(53),T=a(35),N=(a(200),a(113)),k=(a(98),a(49)),P=function(e){var t=e.initialData1,a=e.billingAddresses,n=e.setBillingAddresses,r=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return h.a.createElement(f.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return h.a.createElement(i.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return h.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return o(t.id)}},h.a.createElement(y.a,{icon:"minus"}))}}],o=function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))};return h.a.createElement("div",null,h.a.createElement(N.a,{columns:r,pagination:!1,rowKey:"id",size:"small",dataSource:a}),h.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},h.a.createElement(k.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){n((function(e){return[].concat(Object(d.a)(e),[Object(u.a)(Object(u.a)({},t),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},h.a.createElement(y.a,{icon:"plus"}))))},w=function(e){var t=e.initialData2,a=e.shippingAddresses,n=e.setShippingAddresses,r=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return h.a.createElement(f.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return h.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return h.a.createElement(i.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return h.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return o(t.id)}},h.a.createElement(y.a,{icon:"minus"}))}}],o=function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))};return h.a.createElement("div",null,h.a.createElement(N.a,{columns:r,pagination:!1,rowKey:"id",size:"small",dataSource:a}),h.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},h.a.createElement(k.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){n((function(e){return[].concat(Object(d.a)(e),[Object(u.a)(Object(u.a)({},t),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},h.a.createElement(y.a,{icon:"plus"}))))},z=["id"],F=["id"],R=f.a.TextArea;t.default=function(){var e,t;Object(T.b)("vendor");var a=Object(O.useLocation)().search,E=C.a.parse(a),y=Object(O.useHistory)(),I=Object(g.useState)({data:[],isLoading:!0}),V=Object(p.a)(I,2),N=V[0],k=V[1],q=Object(g.useState)(!0),B=Object(p.a)(q,2),L=B[0],X=B[1],G=Object(g.useState)(!1),Z=Object(p.a)(G,2),U=Z[0],W=Z[1],H=m.a.useForm(),J=Object(p.a)(H,1)[0],K=(e={id:(new Date).getTime(),address1:""},Object(s.a)(e,"address1",""),Object(s.a)(e,"country",""),Object(s.a)(e,"city",""),Object(s.a)(e,"state",""),Object(s.a)(e,"zip_code",""),Object(s.a)(e,"email",""),Object(s.a)(e,"fax",""),Object(s.a)(e,"phone",""),Object(s.a)(e,"status",!0),e),M=Object(g.useState)([K]),Q=Object(p.a)(M,2),Y=Q[0],$=Q[1],ee=(t={id:(new Date).getTime(),address1:""},Object(s.a)(t,"address1",""),Object(s.a)(t,"country",""),Object(s.a)(t,"city",""),Object(s.a)(t,"state",""),Object(s.a)(t,"zip_code",""),Object(s.a)(t,"email",""),Object(s.a)(t,"fax",""),Object(s.a)(t,"phone",""),Object(s.a)(t,"status",!0),t),te=Object(g.useState)([ee]),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1];Object(g.useEffect)((function(){E.id&&_.j.query({query:_.p.GET_SINGLE_VENDOR,variables:{query:{id:parseInt(E.id)}},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var t,a,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleVendor;if(null===r||void 0===r?void 0:r.status){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{data:null===r||void 0===r?void 0:r.data,error:""})}));var o=[],i=[];null===r||void 0===r||null===(a=r.data)||void 0===a||null===(n=a.addresses)||void 0===n||n.forEach((function(e){var t={id:e.id,address1:e.address1,address2:e.address2,country:e.country,city:e.city,state:e.state,zip_code:e.zip_code,email:e.email,fax:e.fax,phone:e.phone,status:e.status};return"billing"===e.type?o.push(t):i.push(t)})),console.log(o,"\n",i),$(o),re(i),console.log("single vendor\n",e)}})).catch((function(e){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1})}))}))}),[]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(b.a,{title:E.id?"Manage Vendor | Edit (".concat(E.name,")"):"Add Vendor"}),h.a.createElement(v.b,null,h.a.createElement(n.a,{gutter:25},h.a.createElement(r.a,{sm:24,xs:24},h.a.createElement(x.a,{headless:!0},E.id&&N.isLoading?h.a.createElement("div",{div:!0,className:"spin"},h.a.createElement(l.a,null)):h.a.createElement(m.a,{style:{width:"100%"},form:J,name:"addVendor",onFinish:function(e){console.log(e);var t=Object(u.a)(Object(u.a)({},e),{},{status:L});console.log(t);var a=Y.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,o=e.state,i=e.zip_code,l=e.email,d=e.fax,c=e.phone,u=e.address2;return!(t&&a&&n&&r&&o&&i&&l&&d&&c&&u)}));if(null===a||void 0===a?void 0:a.id)return D.b.warning("Enter Billing Address Correctly!");var n=ne.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,o=e.state,i=e.zip_code,l=e.email,d=e.fax,c=e.phone,u=e.address2;return!(t&&a&&n&&r&&o&&i&&l&&d&&c&&u)}));if(null===n||void 0===n?void 0:n.id)return D.b.warning("Enter Shipping Address Correctly!");W(!0),E.id?_.j.mutate({mutation:_.o.UPDATE_VENDOR,variables:{data:Object(u.a)(Object(u.a)({},t),{},{id:parseInt(E.id)})},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var t;console.log(e);var a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateVendor;if(!a.status)return D.b.error(a.message);var n=[].concat(Object(d.a)(Y),Object(d.a)(ne));n.forEach((function(t,a){_.j.mutate({mutation:_.o.UPDATE_VENDOR_ADDRESS,variables:{data:t},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var r;console.log("Updarte ".concat(t.type," address res ").concat(a,":\n"),e);null===e||void 0===e||null===(r=e.data)||void 0===r||r.addVendorShippingAddress;n.length===a+1&&setTimeout((function(){y.push("/admin/vendor/list"),window.location.reload()}),2e3)})).catch((function(t){return console.log("error on add billing:\n",e),U(!1),D.b.error("Something went wrong")}))}))})).catch((function(e){return console.log("got error on update vendor",e),D.b.error("Something Went wrong !!")})):_.j.mutate({mutation:_.o.CREATE_VENDOR,variables:{data:t},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var t;console.log(e);var a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createVendor;if(!a.status)return D.b.error(a.message);var n=a.id;Y.forEach((function(t,a){t.id;var r=Object(c.a)(t,z);_.j.mutate({mutation:_.o.ADD_VENDOR_BILLING_ADDRESS,variables:{data:Object(u.a)(Object(u.a)({},r),{},{parent_id:n})},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var t;console.log("billing res ".concat(a,":\n"),e);null===e||void 0===e||null===(t=e.data)||void 0===t||t.addVendorBillingAddress})).catch((function(t){return console.log("error on add billing:\n",e),U(!1),D.b.error("Something went wrong")}))})),ne.forEach((function(t,a){t.id;var r=Object(c.a)(t,F);_.j.mutate({mutation:_.o.ADD_VENDOR_SHIPPING_ADDRESS,variables:{data:Object(u.a)(Object(u.a)({},r),{},{parent_id:n})},context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(e){var t;console.log("Shipping res ".concat(a,":\n"),e);null===e||void 0===e||null===(t=e.data)||void 0===t||t.addVendorShippingAddress;ne.length===a+1&&setTimeout((function(){y.push("/admin/vendor/list"),window.location.reload()}),2e3)})).catch((function(t){return console.log("error on add billing:\n",e),U(!1),D.b.error("Something went wrong")}))}))})).catch((function(e){return console.log("got error on add vendor",e),D.b.error("Something Went wrong !!")}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4},initialValues:E.id?{company_name:E.name,contact_person:N.data.contact_person,email:N.data.email,description:N.data.description,phone_number:N.data.phone_number,EIN_no:N.data.EIN_no,TAX_ID:N.data.TAX_ID,FAX_no:N.data.FAX_no}:null},h.a.createElement(o.a,null,h.a.createElement(o.a.TabPane,{tab:"General",key:"general"},h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Company Name"}],name:"company_name",label:"Company Name"},h.a.createElement(f.a,{placeholder:"Enter Vendor Company Name"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Contact Person"}],label:"Contact Person",name:"contact_person"},h.a.createElement(f.a,{placeholder:"Enter Contact Person"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Email"}],name:"email",label:"Email"},h.a.createElement(f.a,{placeholder:"Enter Vendor Email",type:"email"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Phone Number"}],name:"phone_number",label:"Phone"},h.a.createElement(f.a,{placeholder:"Enter Vendor Phone Number"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax No"}],name:"FAX_no",label:"Fax"},h.a.createElement(f.a,{placeholder:"Enter Vendor Fax"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter EIN No"}],name:"EIN_no",label:"EIN"},h.a.createElement(f.a,{placeholder:"Enter Vendor EIN Number"})),h.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax Id"}],name:"TAX_ID",label:"Tax Id"},h.a.createElement(f.a,{placeholder:"Enter Vendor Tax Id"})),h.a.createElement(m.a.Item,{rules:[{required:!0,message:"Please enter Vendor Description"}],name:"description",label:"Description"},h.a.createElement(R,{rows:4,placeholder:"Enter Vendor Description"})),h.a.createElement(m.a.Item,{label:"Vendor Status"},h.a.createElement(i.a,{checked:L,onChange:function(e){return X(e)}}))),h.a.createElement(o.a.TabPane,{tab:"Billing Address",key:"billing_address"},h.a.createElement(P,{initialData1:K,billingAddresses:Y,setBillingAddresses:$})),h.a.createElement(o.a.TabPane,{tab:"Shipping Address",key:"shipping_address"},h.a.createElement(w,{initialData2:ee,shippingAddresses:ne,setShippingAddresses:re}))),h.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},h.a.createElement(m.a.Item,null,h.a.createElement(j.a,{loading:U,size:"default",htmlType:"submit",type:"primary",raised:!0},U?"Processing":"Save"),h.a.createElement(A.b,{to:"/admin/vendor/list"},h.a.createElement(j.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);