(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[35],{876:function(e,t,a){"use strict";a.r(t);a(130);var r=a(67),n=(a(131),a(43)),i=(a(256),a(147)),u=(a(197),a(121)),o=(a(143),a(68)),l=a(12),c=(a(280),a(59)),s=a(33),d=(a(282),a(134)),m=a(0),b=a.n(m),g=(a(25),a(146)),p=a(145),f=a(144),E=a(176),h=a(54),A=a(10),_=a(198),T=a.n(_),v=a(39),j=a(42),O=a.n(j),y=a(48),S=a(35),N=d.a.Option;t.default=function(){Object(S.b)("attribute");var e=Object(h.useLocation)().search,t=T.a.parse(e),a=Object(h.useHistory)(),_=Object(m.useState)({data:[],isLoading:!0}),j=Object(s.a)(_,2),w=j[0],I=j[1],L=Object(m.useState)(t.g_id||""),x=Object(s.a)(L,2),G=x[0],P=x[1],R=Object(m.useState)(!0),z=Object(s.a)(R,2),C=z[0],D=z[1],F=Object(m.useState)(!1),U=Object(s.a)(F,2),q=U[0],k=U[1],B=c.a.useForm(),W=Object(s.a)(B,1)[0];Object(m.useEffect)((function(){v.j.query({query:v.c.GET_ALL_ATTR_GROUPS,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttrGroups;(null===a||void 0===a?void 0:a.status)&&I((function(e){return Object(l.a)(Object(l.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){I((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){I((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1})}))}))}),[]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(g.a,{title:t.id?"Manage Attribute | Edit (".concat(t.name,")"):"Add Attribute"}),b.a.createElement(p.b,null,b.a.createElement(r.a,{gutter:25},b.a.createElement(n.a,{sm:24,xs:24},b.a.createElement(f.a,{headless:!0},b.a.createElement(c.a,{style:{width:"100%"},form:W,name:"addRole",onFinish:function(e){var r=e.attribute_name;if(!G)return y.b.warning("Attribute Group is not selected");if(k(!0),t.id){var n={data:{attribute_uuid:t.id,attribute_name:r,attribute_status:C,attr_group_uuid:G}};console.log(n),v.j.mutate({mutation:v.b.UPDATE_ATTRIBUTE,variables:n,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")},refetchQueries:[{query:v.c.GET_ALL_ATTRIBUTES,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}},"getAllAttributes"]}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updateAttribute;if(!n.status)return y.b.error(n.message);a.push("/admin/attributes/list"),window.location.reload(),y.b.success("".concat(e.attr_group_name," updated successfully"))})).catch((function(e){return console.log("got error on addPermission",e),y.b.error("Something Went wrong !!")})).finally((function(){k(!1)}))}else{var i={data:{attribute_name:r,attribute_status:C,attr_group_uuid:G}};v.j.mutate({mutation:v.b.CREATE_ATTRIBUTE,variables:i,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")},refetchQueries:[{query:v.c.GET_ALL_ATTRIBUTES,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}},"getAllAttributes"]}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.createAttribute;if(!n.status)return y.b.error(n.message);a.push("/admin/attributes/list"),window.location.reload(),y.b.success("".concat(e.attribute_name," Added successfully"))})).catch((function(e){return console.log("got error on addPermission",e),y.b.error("Something Went wrong !!")})).finally((function(){k(!1)}))}},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},b.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Attribute Name"}],name:"attribute_name",label:"Attribute Name",initialValue:t.name||""},b.a.createElement(o.a,{placeholder:"Enter Attribute Name"})),b.a.createElement(c.a.Item,{initialValue:"",label:"Attribute Group"},w.isLoading?b.a.createElement("div",{className:"spin"},b.a.createElement(u.a,null)):b.a.createElement(b.a.Fragment,null,b.a.createElement(d.a,{allowClear:!0,placeholder:"Select Attribute Group",value:G,onChange:function(e){return P(e)}},w.data.map((function(e){return b.a.createElement(N,{key:e.attr_group_uuid,value:e.attr_group_uuid},e.attr_group_name)}))))),b.a.createElement(c.a.Item,{name:"attrgroup_status",label:"Status"},b.a.createElement(i.a,{checked:C,onChange:function(e){return D(e)}})),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},b.a.createElement(c.a.Item,null,b.a.createElement(E.a,{loading:q,size:"default",htmlType:"submit",type:"primary",raised:!0},q?"Processing":"Save"),b.a.createElement(A.b,{to:"/admin/attributes/list"},b.a.createElement(E.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);