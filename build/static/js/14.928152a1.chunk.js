(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[14],{618:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n,r,i,l,o,u,d,c,s=a(10),m=a(20),p={GET_ALL_BRAND:Object(m.d)(n||(n=Object(s.a)(["\n  query getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_description\n      brand_status\n      image\n      brand_sort_order\n      createdAt\n    }\n  }\n}"]))),GET_ALL_BRAND_WITH_CATEGORY:Object(m.d)(r||(r=Object(s.a)(["\nquery getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_status\n      brand_description\n      image\n      createdAt\n      updatedAt\n      categories {\n        id\n        cat_name\n        cat_slug\n        cat_status\n        subcategories {\n          id\n          cat_name\n          cat_slug\n          cat_status\n          subsubcategories {\n            id\n            cat_name\n            cat_slug\n            cat_status\n          }\n        }\n      }\n    }\n  }\n}\n\n"]))),GET_CATEGORIES:Object(m.d)(i||(i=Object(s.a)(["\n  query getParentCategories {\n    getParentCategories {\n      message\n      status\n      categories {\n        id\n        cat_name\n      }\n    }\n  }\n"]))),GET_SINGLE_BRAND:Object(m.d)(l||(l=Object(s.a)(["\n  query getSingleBrand($query: GetSingleBrandInput){\n    getSingleBrand(query: $query) {\n      message\n      status\n      data {\n        brand_name\n        brand_description\n        brand_status\n        brand_sort_order\n        image\n        categories {\n          id\n          cat_name\n        }\n      }\n    }\n  }\n"]))),BRAND_UPDATE:Object(m.d)(o||(o=Object(s.a)(["\n  mutation updateBrand($data: UpdateBrandInput, $file:Upload){\n    updateBrand(data:$data, file: $file){\n      message\n      status\n    }\n  }"]))),BRAND_UPDATE_WI:Object(m.d)(u||(u=Object(s.a)(["\n  mutation updateBrand($data: UpdateBrandInput){\n    updateBrand(data:$data){\n      message\n      status\n    }\n  }"]))),BRAND_ADD:Object(m.d)(d||(d=Object(s.a)(["\n    mutation createBrand($data: BrandCreateInput, $file:Upload) {\n      createBrand(data: $data, file:$file) {\n        message\n        status\n      }\n    }"]))),BRAND_ADD_WI:Object(m.d)(c||(c=Object(s.a)(["\n      mutation createBrand($data: BrandCreateInput) {\n        createBrand(data: $data) {\n          message\n          status\n        }\n     }"])))}},732:function(e,t,a){e.exports={rte:"products_rte__1AkhM",rteEditor:"products_rteEditor__1JKAC",rteToolbar:"products_rteToolbar__3PEbt"}},901:function(e,t,a){"use strict";a.r(t);a(134);var n=a(68),r=(a(135),a(46)),i=(a(261),a(81)),l=(a(258),a(148)),o=(a(199),a(124)),u=a(93),d=a(12),c=(a(282),a(63)),s=a(31),m=(a(283),a(136)),p=(a(123),a(37)),b=a(0),_=a.n(b),g=a(21),v=a.n(g),f=a(147),E=a(146),y=a(145),h=a(179),O=a(678),j=a.n(O),P=a(732),I=a.n(P),T=(a(200),a(113)),S=(a(609),a(608)),k=(a(98),a(49)),A=a(114),w=a(906),D=a(41),L=a(44),x=a.n(L),N=m.a.Option,q=function(e){var t=e.index,a=e.setAttributesTableData,n=e.attribute_type,r=e.attribute_value,i=Object(b.useState)(""),l=Object(s.a)(i,2),o=l[0],u=l[1],c=Object(b.useState)([]),g=Object(s.a)(c,2),v=g[0],f=g[1],E=function(e){a((function(a){var n=a[t],r=Object(A.a)(a);return r[t]=Object(d.a)(Object(d.a)({},n),{},{attribute_value:e.target.value}),r}))};return _.a.createElement(_.a.Fragment,null,_.a.createElement(m.a,{style:{width:"10em",marginRight:"1em"},placeholder:"Select type",defaultValue:n||null,onChange:function(e){u(e),a((function(a){var n=a[t],r=Object(A.a)(a);return r[t]=Object(d.a)(Object(d.a)({},n),{},{attribute_type:e}),r}))}},_.a.createElement(N,{value:"text"},"Text"),_.a.createElement(N,{value:"link"},"Link"),_.a.createElement(N,{value:"file"},"File"),_.a.createElement(N,{value:"none"},"None")),"text"===o&&_.a.createElement(p.a,{placeholder:"Enter text",style:{width:"calc(100% - 12em)"},size:"middle",onBlur:E,defaultValue:r}),"link"===o&&_.a.createElement(p.a,{placeholder:"Enter Link",style:{width:"calc(100% - 12em)"},size:"middle",onBlur:E,defaultValue:r}),"file"===o&&_.a.createElement(S.a,{beforeUpload:function(e){return f([e]),!1},onRemove:function(){return f([])},fileList:v},_.a.createElement(k.a,{icon:_.a.createElement(w.a,null)},"Select File")))},B=function(e){var t=e.attributesTableData,a=e.setAttributesTableData,n=Object(b.useState)({data:[],isLoading:!0}),r=Object(s.a)(n,2),i=r[0],l=r[1],o=Object(b.useState)({}),u=Object(s.a)(o,2),c=u[0],p=u[1];Object(b.useEffect)((function(){D.j.query({query:D.c.GET_ALL_ATTR_GROUPS_FOR_ADD_PROD,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttrGroups;(null===a||void 0===a?void 0:a.status)&&l((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){l((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){l((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var g=[{title:"Attribute Group",dataIndex:"attr_group_id",key:"attr_group_id",width:200,render:function(e,t,n){return _.a.createElement(m.a,{style:{width:"100%"},placeholder:i.isLoading?"Loading...":"Select Group...",defaultValue:e||null,options:i.data.map((function(e){return{label:e.attr_group_name,value:e.id,attributes:e.attributes}})),onSelect:function(e,t){return function(e,t,n){console.log(t),p(t),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{attr_group_id:e}),r}))}(e,t,n)}})}},{title:"Attribute",dataIndex:"attribute_id",key:"attribute_id",width:200,render:function(e,t,n){var r;return _.a.createElement(m.a,{style:{width:"100%"},disabled:!c.value,defaultValue:e||null,placeholder:i.isLoading?"Loading...":"Select Group...",options:null===c||void 0===c||null===(r=c.attributes)||void 0===r?void 0:r.map((function(e){return{label:e.attribute_name,value:e.id}})),onSelect:function(e,t){return function(e,t,n){console.log(e),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{attribute_id:e}),r}))}(e,0,n)}})}},{title:"Values",dataIndex:"value",key:"value",render:function(e,t,n){return _.a.createElement(q,{index:n,setAttributesTableData:a,attribute_type:t.attribute_type,attribute_value:t.attribute_value})}},{title:"Action",dataIndex:"action",key:"action",width:90,align:"right",render:function(e,t){return _.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return e=t.id,void a((function(t){return t.filter((function(t){return t.id!==e}))}));var e}},_.a.createElement(v.a,{icon:"minus",size:15}))}}];return _.a.createElement(_.a.Fragment,null,_.a.createElement(T.a,{columns:g,dataSource:t,pagination:!1,rowKey:"id"}),_.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px",marginRight:"1em"}},_.a.createElement(k.a,{title:"Add Banner",htmlType:"button",type:"primary",onClick:function(){var e={id:(new Date).getTime(),attr_group_id:"",attribute_id:"",attribute_type:"",attribute_value:""};a((function(t){return[].concat(Object(A.a)(t),[e])})),console.log(t)}},_.a.createElement(v.a,{icon:"plus",size:15}))))},C=(a(613),a(616)),R=function(e){var t=e.discount,a=e.setDiscount,n=Object(b.useState)({data:[],isLoading:!0}),r=Object(s.a)(n,2),i=r[0],l=r[1];Object(b.useEffect)((function(){D.j.query({query:D.i.GET_ALL_CUSTOMER_GROUPS,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCustomerGroups;(null===a||void 0===a?void 0:a.status)&&l((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){l((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){l((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var o=[{title:"Customer Group",dataIndex:"customer_group_id",key:"customer_group_id",render:function(e,t,n){var r;return _.a.createElement(m.a,{style:{width:"150px"},placeholder:i.isLoading?"Loading..":"customer group",defaultValue:e||null,onSelect:function(e){a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{customer_group_id:e}),console.log(r),r}))}},null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map((function(e){return _.a.createElement(m.a.Option,{key:e.id,value:e.id},e.customer_group_name)})))}},{title:"Quantity",dataIndex:"discount_quantity",key:"discount_quantity",width:100,render:function(e,t,n){return _.a.createElement(p.a,{defaultValue:e,type:"number",placeholder:"Quantity",style:{width:"100px"},onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_quantity:e.target.value}),console.log(r),r}))}})}},{title:"Priority",dataIndex:"discount_priority",key:"discount_priority",width:100,render:function(e,t,n){return _.a.createElement(p.a,{type:"number",placeholder:"Priority",style:{width:"100px"},defaultValue:e,onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_priority:e.target.value}),console.log(r),r}))}})}},{title:"Price",dataIndex:"discount_price",key:"discount_price",width:100,render:function(e,t,n){return _.a.createElement(p.a,{type:"number",placeholder:"Price",style:{width:"100px"},defaultValue:e,onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_price:e.target.value}),console.log(r),r}))}})}},{title:"Date Start",dataIndex:"title",key:"title",render:function(e,t,n){return _.a.createElement(C.a,{onChange:function(e){var t=new Date(e._d).toGMTString();console.log(t),a((function(e){var a=e[n],r=Object(A.a)(e);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_startdate:t}),console.log(r),r}))}})}},{title:"Date End",dataIndex:"title",key:"title",render:function(e,t,n){return _.a.createElement(C.a,{onChange:function(e){var t=new Date(e._d).toGMTString();console.log(t),a((function(e){var a=e[n],r=Object(A.a)(e);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_enddate:t}),console.log(r),r}))}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return _.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return u(t.id)}},_.a.createElement(v.a,{icon:"minus"}))}}],u=function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))};return _.a.createElement(_.a.Fragment,null,_.a.createElement(T.a,{className:"table-responsive",columns:o,pagination:!1,rowKey:"id",size:"small",dataSource:t}),_.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},_.a.createElement(k.a,{title:"Add Banner",htmlType:"button",type:"primary",onClick:function(){var e={id:(new Date).getTime(),customer_group_id:"",discount_quantity:"",discount_priority:"",discount_price:"",discount_startdate:"",discount_enddate:""};a((function(t){return[].concat(Object(A.a)(t),[e])}))},style:{marginRight:".5em"}},_.a.createElement(v.a,{icon:"plus"}))))},G=a(735),U=a.n(G),V=a(53),M=a(907),F=function(e){var t=e.featuresImage,a=e.setFeaturesImage,n=e.gallaryImages,r=e.setGallaryImages,i=e.singleProdUid,l=e.setIsLoading;return _.a.createElement(_.a.Fragment,null,_.a.createElement(c.a.Item,{label:"Features Image"},_.a.createElement(S.a,{multiple:!0,listType:"picture-card",beforeUpload:function(e){var t="image/jpeg"===e.type;if(!t)return V.b.error("You can only upload JPG file!");var n=e.size/1024/1024<2;return n?(t&&n&&(a({file:e,thumbnail:URL.createObjectURL(e)}),i&&(l(!0),D.a.mutate({mutation:D.k.UPDATE_THUMBNAIL,variables:{data:{prod_uuid:i,prod_thumbnail:e}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateThumbnail;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("update thumbnail err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){})))),!1):V.b.error("Image must smaller than 2MB!")},onPreview:function(){return console.log()},onRemove:function(){return a({})},fileList:t.thumbnail?[{file:t.file,url:t.thumbnail}]:[]},!t.thumbnail&&"+ Upload")),_.a.createElement(c.a.Item,{label:"Gallery Image"},_.a.createElement(U.a,{multiple:!0,listType:"picture-card",beforeUpload:function(e){return console.log("file type:\n",e.type),"image/jpeg"===e.type?e.size/1024/1024<2?(r((function(t){return[].concat(Object(A.a)(t),[{file:e,url:URL.createObjectURL(e),uid:e.uid}])})),i&&(l(!0),D.a.mutate({mutation:D.k.UPLOAD_GALLERY_IMAGE,variables:{data:{prod_uuid:i,gallery_img:e}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.uploadGalleryImage;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("update gal img err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){}))),!1):V.b.error("Image must smaller than 2MB!"):V.b.error("You can only upload JPG file!")},fileList:n,onRemove:function(e){r((function(t){return t.filter((function(t){return t.uid!==e.uid}))})),i&&(l(!0),D.a.mutate({mutation:D.k.DELETE_GALLERY_IMAGE,variables:{data:{prod_uuid:i,prod_gallery_uuid:e.prod_gallery_uuid}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.deleteGalleryImage;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("del gal img err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){})))}},_.a.createElement("p",{className:"ant-upload-drag-icon"},_.a.createElement(M.a,null)),_.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"))))},z=a(284),W=a(618),$=function(e){var t,a=e.products,n=(e.setProducts,e.selectedPartsOfProducts),r=e.setSelectedPartsOfProducts,i=(e.partOfProductQuantities,e.setPartOfProductQuantities),l=[{title:"Name",dataIndex:"label",key:"label"},{title:"SKU",dataIndex:"sku",key:"sku"},{title:"Quantity",dataIndex:"q",key:"q",width:120,render:function(e,t){return _.a.createElement(p.a,{defaultValue:t.quantity||"1",type:"number",placeholder:"Quantity",onBlur:function(e){i((function(a){var n=Object(d.a)({},a);return n[t.uid]=e.target.value,console.log(n),n}))}})}},{title:"Action",dataIndex:"action",key:"action",width:100,render:function(e,t,a){return _.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){var e=Object(A.a)(n);e.splice(a,1),r(e)}},_.a.createElement(v.a,{icon:"minus"}))}}];return _.a.createElement("div",null,_.a.createElement(c.a.Item,{label:"Products"},_.a.createElement(m.a,{style:{marginBottom:"2em"},mode:"multiple",value:n,placeholder:a.isLoading?"Loading..":"Select Product..",optionFilterProp:"label",options:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.map((function(e){return{label:e.prod_name,value:e.id,uid:e.id,key:e.id,name:e.prod_name,sku:e.prod_sku}})),onChange:function(e,t){r(t)}}),_.a.createElement(T.a,{dataSource:n,columns:l,pagination:!1,rowKey:"uid"})))},K=a(35),Q=a(56),H=a(11),Y=a(201),J=a.n(Y),X=["dimension_class","prod_regular_price","prod_sale_price","prod_weight","prod_weight_class"],Z=["id"],ee=p.a.TextArea,te=m.a.Option;t.default=function(){var e,t,a,g,v,O,P,T,S,k,A,w,L,N,q,C,G,U,M,Y,ae,ne,re,ie,le,oe;Object(K.b)("product");var ue=c.a.useForm(),de=Object(s.a)(ue,1)[0],ce=Object(b.useState)(!1),se=Object(s.a)(ce,2),me=se[0],pe=se[1],be=Object(Q.useHistory)(),_e=Object(Q.useLocation)().search,ge=J.a.parse(_e),ve=Object(b.useState)({data:{},isLoading:!0}),fe=Object(s.a)(ve,2),Ee=fe[0],ye=fe[1];Object(b.useEffect)((function(){ge.id&&z.b.query({query:D.l.GET_SINGLE_PRODUCT,variables:{query:{prod_uuid:ge.id}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleProduct;if(!a.status)return V.b.error("Try reload..!");ye({data:null===a||void 0===a?void 0:a.data,isLoading:!1}),ut((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.discount_type)||void 0===n?void 0:n.map((function(e){return{id:(new Date).getTime(),customer_group_id:e.discount_type_uuid,discount_quantity:e.discount_quantity,discount_priority:e.discount_priority,discount_price:e.discount_price,discount_startdate:e.discount_startdate,discount_enddate:e.discount_enddate}}))})),nt((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.prod_attributes)||void 0===n?void 0:n.map((function(e){var t,a,n;return{id:(new Date).getTime(),attr_group_id:null===(t=e.attribute_data)||void 0===t||null===(a=t.attribute_group)||void 0===a?void 0:a.attr_group_id,attribute_id:null===e||void 0===e||null===(n=e.attribute_data)||void 0===n?void 0:n.attribute_id,attribute_type:e.attribute_type,attribute_value:e.attribute_value}}))})),gt((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.part_of_products)||void 0===n?void 0:n.map((function(e){return{label:e.part_product.prod_name,value:e.part_product.prod_uuid,uid:e.part_product.prod_uuid,key:e.part_product.prod_uuid,name:e.part_product.prod_name,sku:e.part_product.prod_sku,quantity:e.prod_quantity}}))})),Pt((function(e){var t,n;return{file:"",thumbnail:"https://api.primeserverparts.com/images/product/image/thumbnail/".concat(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.prod_uuid,"/128x128_").concat(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.prod_uuid,".jpg")}})),kt(null===a||void 0===a?void 0:a.data.gallery.map((function(e){var t;return{file:"",url:"https://api.primeserverparts.com/images/product/image/gallery/".concat(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.prod_uuid,"/128x128_").concat(e.prod_image),prod_gallery_uuid:e.prod_gallery_uuid}})))})).catch((function(e){console.log("error on loading porduct,\n",e)}))}),[]);var he=Object(b.useState)(j.a.createEmptyValue()),Oe=Object(s.a)(he,2),je=Oe[0],Pe=Oe[1],Ie=Object(b.useState)(""),Te=Object(s.a)(Ie,2),Se=Te[0],ke=Te[1],Ae=Object(b.useState)(!0),we=Object(s.a)(Ae,2),De=we[0],Le=we[1],xe=Object(b.useState)(!0),Ne=Object(s.a)(xe,2),qe=Ne[0],Be=Ne[1],Ce=Object(b.useState)({data:[],loading:!0,error:""}),Re=Object(s.a)(Ce,2),Ge=Re[0],Ue=Re[1],Ve=Object(b.useState)([]),Me=Object(s.a)(Ve,2),Fe=Me[0],ze=Me[1],We=Object(b.useState)([]),$e=Object(s.a)(We,2),Ke=$e[0],Qe=$e[1];Object(b.useEffect)((function(){ge.id&&Ee.isLoading||z.b.query({query:W.a.GET_ALL_BRAND_WITH_CATEGORY,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllBrands;if(Ue((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})})),ge.id){var n,r,i=null===Ee||void 0===Ee||null===(n=Ee.data.brand)||void 0===n?void 0:n.id,l=null===a||void 0===a?void 0:a.data.find((function(e){return e.id===i})),o=[];null===l||void 0===l||null===(r=l.categories)||void 0===r||r.forEach((function(e){var t=e.cat_name;o.push({cat_name:t,id:e.id,cat_status:e.cat_status}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;o.push({cat_name:"".concat(t," > ").concat(a),id:e.id,cat_status:e.cat_status}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var n=e.cat_name;o.push({cat_name:"".concat(t," > ").concat(a," > ").concat(n),id:e.id,cat_status:e.cat_status})}))}))})),ze(o)}})).catch((function(e){Ue((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Ue((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})}))}))}),[Ee]);var He=Object(b.useState)({}),Ye=Object(s.a)(He,2),Je=Ye[0],Xe=Ye[1],Ze=[{id:(new Date).getTime(),attr_group_id:"",attribute_id:"",attribute_type:"",attribute_value:""}],et=Object(b.useState)(Ze),tt=Object(s.a)(et,2),at=tt[0],nt=tt[1],rt=[{id:(new Date).getTime(),customer_group_id:"",discount_quantity:"",discount_priority:"",discount_price:"",discount_startdate:"",discount_enddate:""}],it=Object(b.useState)(rt),lt=Object(s.a)(it,2),ot=lt[0],ut=lt[1],dt=Object(b.useState)({data:[],isLoading:!0}),ct=Object(s.a)(dt,2),st=ct[0],mt=ct[1],pt=Object(b.useState)([]),bt=Object(s.a)(pt,2),_t=bt[0],gt=bt[1],vt=Object(b.useState)({}),ft=Object(s.a)(vt,2),Et=ft[0],yt=ft[1];Object(b.useEffect)((function(){z.b.query({query:D.l.GET_PRODUCT_LIST_FOR_ADD_MINIMAL,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getProductList;(null===a||void 0===a?void 0:a.status)&&mt((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){mt((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){mt((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var ht=Object(b.useState)({}),Ot=Object(s.a)(ht,2),jt=Ot[0],Pt=Ot[1],It=Object(b.useState)([]),Tt=Object(s.a)(It,2),St=Tt[0],kt=Tt[1];return _.a.createElement(_.a.Fragment,null,_.a.createElement(f.a,{title:ge.id?"Manage Product | Edit Product (".concat(ge.name,")"):"Add Product"}),_.a.createElement(E.b,null,_.a.createElement(n.a,{gutter:25},_.a.createElement(r.a,{sm:24,xs:24},_.a.createElement(y.a,{headless:!0},ge.id&&Ee.isLoading?_.a.createElement("div",{div:!0,className:"spin"},_.a.createElement(o.a,null)):_.a.createElement(c.a,{style:{width:"100%"},form:de,name:"addRole",onFinish:function(e){var t=e.dimension_class,a=e.prod_regular_price,n=e.prod_sale_price,r=e.prod_weight,i=e.prod_weight_class,l=Object(u.a)(e,X),o=!0,c=!0,s=at.map((function(e){e.id;var t=Object(u.a)(e,Z);return"none"===t.attribute_type&&(t.attribute_value="none"),t.attr_group_id||t.attribute_type||t.attribute_value||(o=!1),t.attr_group_id&&t.attribute_type&&t.attribute_value||(c=!1),Object(d.a)({},t)}));if(!c&&o)return V.b.warning("Please fill all Attribute field correctly");var m=!0,p=!0,b=ot.map((function(e){e.id;var t=e.customer_group_id,a=e.discount_quantity,n=e.discount_priority,r=e.discount_price,i=e.discount_startdate,l=e.discount_enddate;return t||a||n||r||i||l||(m=!1),t&&a&&n&&r&&i&&l||(p=!1),{customer_group_id:t,discount_quantity:a,discount_priority:n,discount_price:r,discount_startdate:i,discount_enddate:l}}));if(!p&&m)return V.b.warning("Please fill all Discount field correctly");var _=Ke.map((function(e){return e.uid})),g=_t.map((function(e){return{prod_id:e.uid,prod_quantity:Et[e.uid]?parseInt(Et[e.uid]):1}})),v=jt.file,f=St.map((function(e){return e.file})),E=Object(d.a)(Object(d.a)({},l),{},{prod_long_desc:Se,related_product:_,prod_status:De,partof_product:g,taxable:qe,prod_thumbnail:v,prod_gallery:f});a&&(E.prod_regular_price=parseFloat(a)),n&&(E.prod_sale_price=parseFloat(n)),o&&(E.product_attributes=s),m&&(E.discount_type=b),r&&(E.prod_weight=r,E.prod_weight_class=i);var y=Je.height,h=Je.length,O=Je.width;if(y||h||O){var j={dimension_class:t};y&&(j.height=y),h&&(j.length=h),O&&(j.width=O),E.dimensions=j}return console.log("values:\n",e),console.log("data:\n",E),E.prod_long_desc&&E.prod_short_desc?E.prod_sku?E.prod_partnum?E.brand_id?E.prod_category?E.prod_outofstock_status?E.prod_regular_price?v?void(ge.id||(console.log("submit:\n",E),pe(!0),D.a.mutate({mutation:D.k.ADD_PRODUCT,variables:{data:E},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.addProduct;if(!a.status)return V.b.error(a.message);be.push("/admin/products/list"),window.location.reload(),V.b.success(a.message)})).catch((function(e){return console.log("add Prod err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){pe(!1)})))):V.b.warning("Please select a Feature image"):V.b.warning("Please enter Regular Price"):V.b.warning("Please select an Availability Status"):V.b.warning("Please select a Category"):V.b.warning("Please select a Manufacture"):V.b.warning("Please enter Part No"):V.b.warning("Please enter Product SKU"):V.b.warning("Please enter a long description")},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},_.a.createElement(i.a,null,_.a.createElement(i.a.TabPane,{tab:"General",key:"general"},_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],name:"prod_name",label:"Name",initialValue:ge.id?Ee.data.prod_name:""},_.a.createElement(p.a,{placeholder:"Enter Product Name"})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter n"}],name:"prod_short_desc",label:"Short Description",initialValue:ge.id?Ee.data.prod_short_desc:""},_.a.createElement(ee,{rows:3,placeholder:"Enter Short Description"})),_.a.createElement(c.a.Item,{label:"Long Description"},_.a.createElement(j.a,{value:je,onChange:function(e){ke(e.toString("html")),Pe(e)},placeholder:"Long Description",className:I.a.rte,editorClassName:I.a.rteEditor,toolbarClassName:I.a.rteToolbar})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Title"}],name:"prod_meta_title",label:"Meta Title",initialValue:ge.id?Ee.data.prod_meta_title:""},_.a.createElement(p.a,{placeholder:"Enter Meta Title"})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Description"}],name:"prod_meta_desc",label:"Meta Description",initialValue:ge.id?Ee.data.prod_meta_desc:""},_.a.createElement(p.a,{placeholder:"Enter Meta Description"})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Keywords"}],name:"prod_meta_keywords",label:"Meta Keywords",initialValue:ge.id?Ee.data.prod_meta_keywords:""},_.a.createElement(p.a,{placeholder:"Enter comma separated Meta Keywords"})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Tags"}],name:"prod_tags",label:"Tags",initialValue:ge.id?Ee.data.prod_tags:""},_.a.createElement(p.a,{placeholder:"Enter comma separated Tags"})),_.a.createElement(c.a.Item,{label:"Status"},_.a.createElement(l.a,{checked:De,onChange:function(e){return Le(e)}}))),_.a.createElement(i.a.TabPane,{tab:"Data",key:"Data"},_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Part NO"}],name:"prod_partnum",label:"Part NO",initialValue:ge.id?Ee.data.prod_partnum:""},_.a.createElement(p.a,{placeholder:"Enter Part No"})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter SKU"}],name:"prod_sku",label:"SKU",initialValue:ge.id?Ee.data.prod_sku:""},_.a.createElement(p.a,{placeholder:"Enter Product SKU"}))),_.a.createElement(i.a.TabPane,{tab:"Links",key:"Links"},_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please select a Brand"}],name:"brand_id",label:"Manufacturer",initialValue:ge.id?null===(e=Ee.data)||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brand_id:null},_.a.createElement(m.a,{placeholder:Ge.loading?"Loading...":"select Manufacture",options:null===Ge||void 0===Ge||null===(a=Ge.data)||void 0===a?void 0:a.map((function(e){return{label:e.brand_name,value:e.id,categories:e.categories}})),onSelect:function(e,t){var a,n;if(null===t||void 0===t||null===(a=t.categories)||void 0===a?void 0:a.length){var r=[];null===t||void 0===t||null===(n=t.categories)||void 0===n||n.forEach((function(e){var t=e.cat_name;r.push({cat_name:t,id:e.id,cat_status:e.cat_status}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;r.push({cat_name:"".concat(t," > ").concat(a),id:e.id,cat_status:e.cat_status}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var n=e.cat_name;r.push({cat_name:"".concat(t," > ").concat(a," > ").concat(n),id:e.id,cat_status:e.cat_status})}))}))})),ze(r)}}})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],name:"prod_category",label:"Categories",initialValue:ge.id?null===(g=Ee.data)||void 0===g||null===(v=g.category)||void 0===v?void 0:v.id:null},_.a.createElement(m.a,{placeholder:Ge.loading?"Loading...":Fe.length?"Select Category":"Select manifacture first",options:Fe.map((function(e){return{label:e.cat_name,value:e.id,key:e.id}}))})),_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],label:"Related Product"},_.a.createElement(m.a,{placeholder:st.isLoading?"Loading...":"select Related Products",mode:"multiple",optionFilterProp:"label",defaultValue:ge.id?null===Ee||void 0===Ee||null===(O=Ee.data)||void 0===O||null===(P=O.related_products)||void 0===P?void 0:P.map((function(e){var t;return null===e||void 0===e||null===(t=e.related_prod)||void 0===t?void 0:t.prod_uuid})):[],options:null===st||void 0===st||null===(T=st.data)||void 0===T?void 0:T.map((function(e){return{label:e.prod_name,value:e.id,uid:e.id}})),onChange:function(e,t){Qe(t)}}))),_.a.createElement(i.a.TabPane,{tab:"Specifications",key:"Specifications"},_.a.createElement(c.a.Item,{label:_.a.createElement("p",null,"Dimensions ",_.a.createElement("br",null)," (L x W x H)")},_.a.createElement(p.a.Group,{compact:!0},_.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Length",onBlur:function(e){return Xe((function(t){return Object(d.a)(Object(d.a)({},t),{},{length:parseFloat(e.target.value)})}))},defaultValue:ge.id&&(null===Ee||void 0===Ee||null===(S=Ee.data)||void 0===S||null===(k=S.dimensions)||void 0===k?void 0:k.length)?null===Ee||void 0===Ee||null===(A=Ee.data)||void 0===A||null===(w=A.dimensions)||void 0===w?void 0:w.length:""}),_.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Width",onBlur:function(e){return Xe((function(t){return Object(d.a)(Object(d.a)({},t),{},{width:parseFloat(e.target.value)})}))},defaultValue:ge.id&&(null===Ee||void 0===Ee||null===(L=Ee.data)||void 0===L||null===(N=L.dimensions)||void 0===N?void 0:N.length)?null===Ee||void 0===Ee||null===(q=Ee.data)||void 0===q||null===(C=q.dimensions)||void 0===C?void 0:C.width:""}),_.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Height",onBlur:function(e){return Xe((function(t){return Object(d.a)(Object(d.a)({},t),{},{height:parseFloat(e.target.value)})}))},defaultValue:ge.id&&(null===Ee||void 0===Ee||null===(G=Ee.data)||void 0===G||null===(U=G.dimensions)||void 0===U?void 0:U.length)?null===Ee||void 0===Ee||null===(M=Ee.data)||void 0===M||null===(Y=M.dimensions)||void 0===Y?void 0:Y.height:""}))),_.a.createElement(c.a.Item,{name:"dimension_class",label:_.a.createElement("p",null,"Dimensions ",_.a.createElement("br",null),"Class "),initialValue:"Inch"},_.a.createElement(m.a,{style:{height:"3.5em"},placeholder:"Enter Dimension Class"},_.a.createElement(te,{key:1,value:"Centimeter"},"Centimeter"),_.a.createElement(te,{key:2,value:"Millimeter"},"Millimeter"),_.a.createElement(te,{key:3,value:"Inch"},"Inch"))),_.a.createElement(c.a.Item,{name:"prod_weight",label:"Weight",initialValue:ge.id&&(null===Ee||void 0===Ee||null===(ae=Ee.data)||void 0===ae?void 0:ae.prod_weight)?null===Ee||void 0===Ee||null===(ne=Ee.data)||void 0===ne?void 0:ne.prod_weight:""},_.a.createElement(p.a,{type:"number",placeholder:"Enter Weight"})),_.a.createElement(c.a.Item,{name:"prod_weight_class",label:"Weight Class",initialValue:"Pound"},_.a.createElement(m.a,{placeholder:"Enter Weight Class"},_.a.createElement(te,{key:1,value:"Kilogram"},"Kilogram"),_.a.createElement(te,{key:1,value:"Gram"},"Gram"),_.a.createElement(te,{key:2,value:"Pound"},"Pound"),_.a.createElement(te,{key:3,value:"Ounce"},"Ounce")))),_.a.createElement(i.a.TabPane,{tab:"Stock",key:"Stock"},_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Availability Status"}],name:"prod_outofstock_status",label:"Availability",initialValue:ge.id?null===Ee||void 0===Ee||null===(re=Ee.data)||void 0===re?void 0:re.prod_outofstock_status:"In Stock"},_.a.createElement(m.a,{placeholder:"Please select a Status"},_.a.createElement(m.a.Option,{key:1,value:"2-3 Days"},"2-3 Days"),_.a.createElement(m.a.Option,{key:2,value:"In Stock"},"In Stock"),_.a.createElement(m.a.Option,{key:3,value:"Out Of Stock"},"Out Of Stock"),_.a.createElement(m.a.Option,{key:4,value:"Pre-Orde"},"Pre-Order")))),_.a.createElement(i.a.TabPane,{tab:"Attribute",key:"Attribute"},_.a.createElement(B,{attributesTableData:at,setAttributesTableData:nt})),_.a.createElement(i.a.TabPane,{tab:"Price",key:"Price"},_.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please Enter Regular Price"}],name:"prod_regular_price",label:"Regular Price",initialValue:ge.id?null===Ee||void 0===Ee||null===(ie=Ee.data)||void 0===ie?void 0:ie.prod_regular_price:""},_.a.createElement(p.a,{placeholder:"Enter Regular Price",prefix:"US$  ",type:"number"})),_.a.createElement(c.a.Item,{name:"prod_sale_price",label:"Sales Price",initialValue:ge.id?null===Ee||void 0===Ee||null===(le=Ee.data)||void 0===le?void 0:le.prod_sale_price:""},_.a.createElement(p.a,{prefix:"US$  ",type:"number",placeholder:"Enter Sales Price"})),_.a.createElement(c.a.Item,{label:"Taxable"},_.a.createElement(l.a,{checked:qe,onChange:function(e){return Be(e)}}))),_.a.createElement(i.a.TabPane,{tab:"Discount",key:"Discount"},_.a.createElement(R,{discount:ot,setDiscount:ut})),_.a.createElement(i.a.TabPane,{tab:"Parts Of Product",key:"PartsOf"},_.a.createElement($,{products:st,setProducts:mt,selectedPartsOfProducts:_t,setSelectedPartsOfProducts:gt,partOfProductQuantities:Et,setPartOfProductQuantities:yt})),_.a.createElement(i.a.TabPane,{tab:"Images",key:"Images"},_.a.createElement(F,{featuresImage:jt,setFeaturesImage:Pt,gallaryImages:St,setGallaryImages:kt,singleProdUid:null===Ee||void 0===Ee||null===(oe=Ee.data)||void 0===oe?void 0:oe.prod_uuid,setIsLoading:pe}))),_.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},_.a.createElement(c.a.Item,null,_.a.createElement(h.a,{loading:me,size:"default",htmlType:"submit",type:"primary",raised:!0},me?"Processing":"Save"),_.a.createElement(H.b,{to:"/admin/roles/list"},_.a.createElement(h.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);