(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[64],{956:function(e,t,r){"use strict";r.r(t);r(200);var a=r(97),o=(r(201),r(74)),u=(r(314),r(218)),n=(r(166),r(98)),s=(r(288),r(69)),i=r(9),c=(r(289),r(52)),l=r(23),m=(r(148),r(45)),d=r(0),p=r.n(d),_=r(217),g=r(165),E=r(164),f=r(287),b=r(58),h=r(12),v=r(317),O=r.n(v),T=r(71),G=r(68),j=r.n(G),y=r(22),A=r(76),C=m.a.TextArea;t.default=function(){Object(y.f)("customer-group");var e=Object(b.useLocation)().search,t=O.a.parse(e),r=Object(b.useHistory)(),v=Object(d.useState)({data:[],isLoading:!0}),G=Object(l.a)(v,2),I=G[0],S=G[1],N=Object(d.useState)(!0),R=Object(l.a)(N,2),U=R[0],x=R[1],L=Object(d.useState)(!1),P=Object(l.a)(L,2),D=P[0],q=P[1],z=c.a.useForm(),M=Object(l.a)(z,1)[0];Object(d.useEffect)((function(){t.id&&T.j.query({query:T.i.GET_SINGLE_CUSTOMER_GROUP,variables:{query:{customer_group_id:parseInt(t.id)}},context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(e){var t,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleCustomerGroup;if(!(null===r||void 0===r?void 0:r.status))return Object(A.a)();S((function(e){return Object(i.a)(Object(i.a)({},e),{},{data:null===r||void 0===r?void 0:r.data,error:""})}))})).finally((function(){S((function(e){return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1})}))}))}),[]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(_.a,{title:t.id?"Manage Group | Edit ".concat(I.isLoading?"":"(".concat(I.data.customer_group_name,")")):"Add Customer Group"}),p.a.createElement(g.b,null,p.a.createElement(a.a,{gutter:25},p.a.createElement(o.a,{sm:24,xs:24},p.a.createElement(E.a,{headless:!0},t.id&&I.isLoading?p.a.createElement("div",{div:!0,className:"spin"},p.a.createElement(n.a,null)):p.a.createElement(c.a,{style:{width:"100%"},form:M,name:"addRole",onFinish:function(e){var a=e.customer_group_name,o=e.customergroup_description,u=e.customergroup_sortorder;if(t.id){var n={data:{id:parseInt(t.id),customer_group_name:a,customergroup_description:o,customergroup_sortorder:parseInt(u),customergroup_status:U}};T.j.mutate({mutation:T.h.UPDATE_CUSTOMER_GROUP,variables:n,refetchQueries:[{query:T.i.GET_ALL_CUSTOMER_GROUPS,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}},["getAllCustomerGroups"]],context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(t){var a,o=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateCustomerGroup;if(!(null===o||void 0===o?void 0:o.status))return Object(A.a)();setTimeout((function(){r.push("/admin/customers/group")}),1e3),s.b.success("".concat(e.customer_group_name," Group Updated successfully"))})).finally((function(){q(!1)}))}else{var i={data:{customer_group_name:a,customergroup_description:o,customergroup_sortorder:parseInt(u),customergroup_status:U}};T.j.mutate({mutation:T.h.CREATE_CUSTOMER_GROUP,variables:i,refetchQueries:[{query:T.i.GET_ALL_CUSTOMER_GROUPS,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}},["getAllCustomerGroups"]],context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(t){var a,o=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.createCustomerGroup;if(!(null===o||void 0===o?void 0:o.status))return Object(A.a)();setTimeout((function(){r.push("/admin/customers/group")}),1e3),s.b.success("".concat(e.customer_group_name," Group added successfully"))})).finally((function(){q(!1)}))}},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},p.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Attribute Group Name"}],name:"customer_group_name",label:"Group Name",initialValue:t.id?I.data.customer_group_name:""},p.a.createElement(m.a,{placeholder:"Enter Attribute Group Name"})),p.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Group Description"}],name:"customergroup_description",label:"Description",initialValue:I.data.customergroup_description||""},p.a.createElement(C,{rows:4,placeholder:"Enter Group Description"})),p.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Sort order"}],name:"customergroup_sortorder",label:"Sort order",initialValue:I.data.customergroup_sortorder?parseInt(I.data.customergroup_sortorder):""},p.a.createElement(m.a,{type:"number",placeholder:"Enter sort order"})),p.a.createElement(c.a.Item,{label:"Group Status"},p.a.createElement(u.a,{checked:U,onChange:function(e){return x(e)}})),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},p.a.createElement(c.a.Item,null,p.a.createElement(f.a,{loading:D,size:"default",htmlType:"submit",type:"primary",raised:!0},D?"Processing":"Save"),p.a.createElement(h.b,{to:"/admin/customers/group"},p.a.createElement(f.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);