{"version":3,"sources":["container/email/HeaderFooter.js","apollo/email/index.js"],"names":["ListEmail","viewPermission","useState","data","loading","error","headerFooter","setHeaderFooter","filteredHeaderFooter","setFilteredHeaderFooter","isFilter","setIsFilter","token","useSelector","state","auth","useEffect","apolloClient","query","EmailTemplateQuery","GET_EMAIL_HEADER_FOOTER_LIST","context","headers","TENANTID","process","Authorization","then","res","getEmailTempHeaderFooterList","s","catch","err","finally","columns","title","dataIndex","key","width","ellipsis","sorter","a","b","id","toUpperCase","name","slug","type","render","text","align","record","className","format","parseInt","to","buttons","size","icon","gutter","sm","xs","headless","placeholder","prefix","onChange","e","value","target","filter","hf","toLowerCase","includes","pagination","defaultPageSize","config","EMAIL_TEMPLATE_PER_PAGE","total","length","showTotal","range","rowKey","dataSource","rowClassName","index","gql","ADD_EMAIL_TEMPLATE_HEADER_FOOTER","SINGLE_EMAIL_TEMPLATE_HEADER_FOOTER","EMAIL_TEMPLATE_HEADER_FOOTER_UPDATE","GET_EMAIL_TEMPLATE_LIST","ADD_EMAIL_TEMPLATE_LIST","SINGLE_EMAIL_TEMPLATE_LIST","UPDATE_EMAIL_TEMPLATE_LIST","CREATE_EMAIL_TEMPLATE","GET_EMAIL_TEMPLATE_CONTENT_LIST","GET_SINGLE_EMAIL_CONTENT_TEMPLATE","UPDATE_EMAIL_TEMPLATE_CONTENT","GET_EMAIL_TEMPLATE_PREVIEW"],"mappings":"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","file":"static/js/37.7a0d3976.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { Row, Col, Spin, Input, Table } from 'antd';\nimport FeatherIcon from 'feather-icons-react';\nimport { PageHeader } from '../../components/page-headers/page-headers';\nimport { Main } from '../styled';\nimport { Cards } from '../../components/cards/frame/cards-frame';\nimport { Button } from '../../components/buttons/buttons';\nimport { Link } from 'react-router-dom';\nimport FontAwesome from 'react-fontawesome';\nimport apolloClient from '../../apollo';\nimport { useSelector } from 'react-redux';\nimport Moment from 'react-moment';\nimport { viewPermission } from '../../utility/utility';\nimport config from '../../config/config';\nimport { EmailTemplateQuery } from '../../apollo/email';\n\nconst ListEmail = () => {\n  viewPermission('email-template');\n  const [headerFooter, setHeaderFooter] = useState({ data: [], loading: true, error: '' });\n  const [filteredHeaderFooter, setFilteredHeaderFooter] = useState([]);\n  const [isFilter, setIsFilter] = useState(false);\n  const token = useSelector(state => state.auth.token);\n\n  useEffect(() => {\n    apolloClient\n      .query({\n        query: EmailTemplateQuery.GET_EMAIL_HEADER_FOOTER_LIST,\n        context: {\n          headers: {\n            TENANTID: process.env.REACT_APP_TENANTID,\n            Authorization: token,\n          },\n        },\n      })\n      .then(res => {\n        const data = res?.data?.getEmailTempHeaderFooterList;\n        setHeaderFooter(s => ({ ...s, data: data?.data, error: '' }));\n      })\n      .catch(err => {\n        setHeaderFooter(s => ({ ...s, error: 'Something went Wrong.!! ' }));\n      })\n      .finally(() => {\n        setHeaderFooter(s => ({ ...s, loading: false }));\n      });\n  }, []);\n\n\n  const columns = [\n    {\n      title: 'ID',\n      dataIndex: 'id',\n      key: 'id',\n      width: 40,\n      ellipsis: true,\n      sorter: (a, b) => (a.id.toUpperCase() > b.id.toUpperCase() ? 1 : -1),\n    },\n    {\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      width: 200,\n      ellipsis: true,\n      sorter: (a, b) => (a.name.toUpperCase() > b.name.toUpperCase() ? 1 : -1),\n    },\n    {\n      title: 'Alias',\n      dataIndex: 'slug',\n      key: 'slug',\n      width: 200,\n      ellipsis: true,\n      sorter: (a, b) => (a.slug.toUpperCase() > b.slug.toUpperCase() ? 1 : -1),\n    },\n    {\n      title: 'Type',\n      dataIndex: 'type',\n      key: 'type',\n      width: 200,\n      ellipsis: true,\n      sorter: (a, b) => (a.type.toUpperCase() > b.type.toUpperCase() ? 1 : -1),\n      render: (text) => text.toUpperCase()\n    },\n    {\n      title: 'Date',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n      align: 'center',\n      width: 120,\n      render: (text, record) => (\n        <span className={'status-text'}>{<Moment format=\"DD MMMM YYYY\">{parseInt(text)}</Moment>}</span>\n      ),\n    },\n    {\n      title: 'Action',\n      dataIndex: 'action',\n      align: 'right',\n      key: 'action',\n      width: 80,\n      render: (text, record) => (\n        <>\n          <Link to={`/admin/email/header-footer/edit/${record.id}`}>\n            <FontAwesome name=\"edit\" />\n          </Link>\n        </>\n      ),\n    },\n  ];\n\n  const onChangeSearch = e => {\n    const value = e.target.value;\n    setIsFilter(value);\n    setFilteredHeaderFooter(\n        headerFooter.data.filter(hf =>\n        (hf?.name + hf?.slug + hf?.type).toLowerCase().includes(value.toLowerCase()),\n      ),\n    );\n  };\n\n  return (\n    <>\n      <PageHeader\n        title=\"Email Header Footer\"\n        buttons={[\n          <div key=\"1\" className=\"page-header-actions\">\n            <Link to=\"/admin/email/header-footer/add\">\n              <Button size=\"small\" title=\"Add Email Header Footer\" type=\"primary\">\n                <FeatherIcon icon=\"plus\" />\n              </Button>\n            </Link>\n          </div>,\n        ]}\n      />\n      <Main>\n        <Row gutter={25}>\n          <Col sm={24} xs={24}>\n            <Cards headless>\n              {headerFooter.loading ? (\n                <div className=\"spin\">\n                  <Spin />\n                </div>\n              ) : headerFooter.error ? (\n                <p>{headerFooter.error}</p>\n              ) : (\n                <>\n                  <Input placeholder=\"Search in Email Header Footer...\" prefix={<SearchOutlined />} onChange={onChangeSearch} />\n                  <br />\n                  <br />\n\n                  <span className={'psp_list'}>\n                    <Table\n                      className=\"table-responsive\"\n                      columns={columns}\n                      pagination={{\n                        defaultPageSize: config.EMAIL_TEMPLATE_PER_PAGE,\n                        total: isFilter ? headerFooter?.data?.length : headerFooter?.data?.length,\n                        showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items`,\n                      }}\n                      rowKey={'id'}\n                      size=\"small\"\n                      dataSource={isFilter ? filteredHeaderFooter : headerFooter.data}\n                      rowClassName={(record, index) => (index % 2 === 0 ? '' : 'altTableClass')}\n                    />\n                  </span>\n                </>\n              )}\n            </Cards>\n          </Col>\n        </Row>\n      </Main>\n    </>\n  );\n};\n\nexport default ListEmail;\n","import { gql } from '@apollo/client';\n\nexport const EmailTemplateQuery = {\n  GET_EMAIL_HEADER_FOOTER_LIST: gql`\n    query getEmailTempHeaderFooterList {\n      getEmailTempHeaderFooterList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  `,\n  ADD_EMAIL_TEMPLATE_HEADER_FOOTER: gql`\n    mutation addEmailTempHeaderFooter($data: AddEmailTempHFInput) {\n      addEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  SINGLE_EMAIL_TEMPLATE_HEADER_FOOTER: gql`\n    query getSingleEmailTempHeaderFooter($query: GetSingleEmailHeaderFooterInput) {\n      getSingleEmailTempHeaderFooter(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  `,\n  EMAIL_TEMPLATE_HEADER_FOOTER_UPDATE: gql`\n    mutation updateEmailTempHeaderFooter($data: UpdateEmailTempHFInput) {\n      updateEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  GET_EMAIL_TEMPLATE_LIST: gql`\n    query getAllEmailTemplateList {\n      getAllEmailTemplateList {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  `,\n  ADD_EMAIL_TEMPLATE_LIST: gql`\n    mutation addEmailTemplateOnList($data: AddEmailTemplateListInput) {\n      addEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  SINGLE_EMAIL_TEMPLATE_LIST: gql`\n    query getSingleEmailTemplateList($query: GetSingleEmailTemplateListInput) {\n      getSingleEmailTemplateList(query: $query) {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  `,\n  UPDATE_EMAIL_TEMPLATE_LIST: gql`\n    mutation updateEmailTemplateOnList($data: UpdateEmailTemplateListInput) {\n      updateEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  CREATE_EMAIL_TEMPLATE: gql`\n    mutation createEmailTemplate($data: addEmailTemplateInput) {\n      createEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  GET_EMAIL_TEMPLATE_CONTENT_LIST: gql`\n    query getEmailTemplateList {\n      getEmailTemplateList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n          }\n          emailFooter {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n  `,\n  GET_SINGLE_EMAIL_CONTENT_TEMPLATE: gql`\n    query getSingleEmailTemplate($query: GetSingleEmailTemplateInput) {\n      getSingleEmailTemplate(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n          emailFooter {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n        }\n      }\n    }\n  `,\n  UPDATE_EMAIL_TEMPLATE_CONTENT: gql`\n    mutation updateEmailTemplate($data: updateEmailTemplateInput) {\n      updateEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  `,\n  GET_EMAIL_TEMPLATE_PREVIEW: gql`\n    query getEmailTemplatePreview($query: GetEmailTemplatePreviewInput) {\n      getEmailTemplatePreview(query: $query) {\n        message\n        status\n        tenant_id\n        data\n      }\n    }\n  `,\n};\n"],"sourceRoot":""}