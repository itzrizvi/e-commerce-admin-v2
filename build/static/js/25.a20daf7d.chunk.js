(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[25],{614:function(e,a,t){"use strict";t.d(a,"a",(function(){return m}));var n,r,d,l,i,o,u,c=t(12),s=t(30),m={GET_ALL_BRAND:Object(s.d)(n||(n=Object(c.a)(["\n  query getAllBrands {\n  getAllBrands {\n    message\n    tenant_id\n    status\n    data {\n      brand_uuid\n      brand_name\n      brand_slug\n      brand_description\n      brand_status\n      image\n      brand_sort_order\n      createdAt\n    }\n  }\n}"]))),GET_CATEGORIES:Object(s.d)(r||(r=Object(c.a)(["\n  query getParentCategories {\n    getParentCategories {\n      message\n      status\n      tenant_id\n      categories {\n        cat_id\n        cat_name\n      }\n    }\n  }\n"]))),GET_SINGLE_BRAND:Object(s.d)(d||(d=Object(c.a)(["\n  query getSingleBrand($brand_uuid : UUID!){\n    getSingleBrand(query: {brand_uuid: $brand_uuid}) {\n      message\n      tenant_id\n      status\n      data {\n        brand_name\n        brand_description\n        brand_status\n        brand_sort_order\n        image\n        categories {\n          cat_id\n          cat_name\n        }\n      }\n    }\n  }\n"]))),BRAND_UPDATE:Object(s.d)(l||(l=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput, $file:Upload){\n    updateBrand(data:$data, file: $file){\n      message\n      status\n    }\n  }"]))),BRAND_UPDATE_WI:Object(s.d)(i||(i=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput){\n    updateBrand(data:$data){\n      message\n      status\n    }\n  }"]))),BRAND_ADD:Object(s.d)(o||(o=Object(c.a)(["\n    mutation createBrand($data: BrandCreateInput, $file:Upload) {\n      createBrand(data: $data, file:$file) {\n        message\n        tenant_id\n        status\n      }\n    }"]))),BRAND_ADD_WI:Object(s.d)(u||(u=Object(c.a)(["\n      mutation createBrand($data: BrandCreateInput) {\n        createBrand(data: $data) {\n          message\n          tenant_id\n          status\n        }\n     }"])))}},865:function(e,a,t){"use strict";t.r(a);t(129);var n=t(66),r=(t(130),t(41)),d=(t(605),t(604)),l=(t(254),t(146)),i=(t(696),t(698)),o=(t(280),t(132)),u=(t(196),t(119)),c=t(11),s=(t(278),t(58)),m=t(33),b=(t(142),t(67)),v=t(0),g=t.n(v),_=t(145),p=t(144),E=t(143),f=t(175),h=t(54),O=t(10),j=t(42),A=t(46),B=t(349),y=t(614),I=t(281),D=t(197),N=t.n(D),S=t(257),T=t(282);a.default=function(){var e,a,t,D,C,L=Object(h.useLocation)().search,U=N.a.parse(L),w=b.a.TextArea,P=Object(h.useHistory)(),R=Object(j.d)((function(e){return e.auth.token})),$=Object(v.useState)(!1),q=Object(m.a)($,2),x=q[0],G=q[1],z=Object(v.useState)(!1),F=Object(m.a)(z,2),M=F[0],k=F[1],V=Object(v.useState)(!0),W=Object(m.a)(V,2),J=W[0],H=W[1],Q=Object(v.useState)(""),Y=Object(m.a)(Q,2),K=Y[0],X=Y[1],Z=Object(v.useState)(""),ee=Object(m.a)(Z,2),ae=ee[0],te=ee[1],ne=Object(v.useState)(0),re=Object(m.a)(ne,2),de=re[0],le=re[1],ie=Object(v.useState)([]),oe=Object(m.a)(ie,2),ue=oe[0],ce=oe[1],se=Object(v.useState)([]),me=Object(m.a)(se,2),be=me[0],ve=me[1],ge=Object(v.useState)({data:{},loading:!0,error:""}),_e=Object(m.a)(ge,2),pe=_e[0],Ee=_e[1],fe=s.a.useForm(),he=Object(m.a)(fe,1)[0],Oe=g.a.createElement("div",null,g.a.createElement(B.a,null),g.a.createElement("div",{style:{marginTop:8}}," Upload "));return Object(v.useEffect)((function(){k(!0),I.b.query({query:y.a.GET_CATEGORIES,context:{headers:{TENANTID:"100001",Authorization:R}}}).then((function(e){var a,t,n=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.getParentCategories)||void 0===t?void 0:t.categories;ve(n)})).catch((function(e){ve([]),console.log(e)})),I.b.query({query:y.a.GET_SINGLE_BRAND,variables:{brand_uuid:null===U||void 0===U?void 0:U.id},context:{headers:{TENANTID:"100001",Authorization:R}}}).then((function(e){var a,t,n,r,d,l,i,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.getSingleBrand;if(o.status){Ee({data:null===o||void 0===o?void 0:o.data,loading:!1,error:""});var u=[];null===o||void 0===o||null===(t=o.data)||void 0===t||t.categories.map((function(e){u.push(e.cat_id)})),ce(u),k(!1),H(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.brand_status),te(Object(S.renderImage)(null===U||void 0===U?void 0:U.id,null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.image,"brand","128x128")),he.setFieldsValue({brand_name:null===o||void 0===o||null===(d=o.data)||void 0===d?void 0:d.brand_name,brand_description:null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.brand_description}),le(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.brand_sort_order)}})).catch((function(e){console.log(e),Ee({data:{},loading:!1,error:"Something went worng"})}))}),[]),g.a.createElement(g.a.Fragment,null,g.a.createElement(_.a,{title:"Manage Manufacture | Edit Manufacture ".concat((null===pe||void 0===pe||null===(e=pe.data)||void 0===e?void 0:e.brand_name)?"(".concat(null===pe||void 0===pe||null===(a=pe.data)||void 0===a?void 0:a.brand_name,")"):"")}),g.a.createElement(p.b,null,g.a.createElement(n.a,{gutter:25},g.a.createElement(r.a,{sm:24,xs:24},g.a.createElement(E.a,{headless:!0},M?g.a.createElement("div",{style:{textAlign:"center"}},g.a.createElement(u.a,{tip:"processing..."})):g.a.createElement(s.a,{style:{width:"100%"},form:he,name:"editBrand",onFinish:function(e){G(!0);var a=[];ue.forEach((function(e){a.push({cat_id:e})}));var t=Object(c.a)(Object(c.a)({},e),{},{brand_status:J,brand_sort_order:de,categories:a,brand_uuid:null===U||void 0===U?void 0:U.id});I.a.mutate({mutation:K?y.a.BRAND_UPDATE:y.a.BRAND_UPDATE_WI,variables:K?{data:t,file:K}:{data:t},refetchQueries:[{query:y.a.GET_ALL_BRAND,context:{headers:{TENANTID:"100001",Authorization:R}}},"getAllBrands"],context:{headers:{TENANTID:"100001",Authorization:R}}}).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.updateBrand;if(!(null===t||void 0===t?void 0:t.status))return A.b.error("Something Went wrong !!");P.push("/admin/brand/list"),A.b.success(null===t||void 0===t?void 0:t.message),window.location.reload(!1)})).catch((function(e){A.b.error("Something Went wrong !!")})).finally((function(){return G(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},g.a.createElement(s.a.Item,{rules:[{required:!0,max:30,message:"Please Enter Manufacture Name"}],name:"brand_name",label:"Name"},g.a.createElement(b.a,{placeholder:"Enter Manufacture Name",defaultValue:null===pe||void 0===pe||null===(t=pe.data)||void 0===t?void 0:t.brand_name})),g.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please Enter Manufacture Description"}],name:"brand_description",label:"Description"},g.a.createElement(w,{rows:4,placeholder:"Enter Manufacture Description",defaultValue:null===pe||void 0===pe||null===(D=pe.data)||void 0===D?void 0:D.brand_description})),g.a.createElement(s.a.Item,{label:"Categories"},g.a.createElement(o.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Categories",defaultValue:ue,onChange:function(e){return ce(e)},optionLabelProp:"label"},be.map((function(e){return g.a.createElement(o.a.Option,{key:e.cat_id,value:e.cat_id,label:e.cat_name},g.a.createElement("div",{className:"demo-option-label-item"},e.cat_name))})))),g.a.createElement(s.a.Item,{label:"Sort Order"},g.a.createElement(i.a,{defaultValue:null===pe||void 0===pe||null===(C=pe.data)||void 0===C?void 0:C.brand_sort_order,onChange:le,style:{width:"100%"}})),g.a.createElement(s.a.Item,{label:"Status"},g.a.createElement(l.a,{checked:J,onChange:function(e){return H(e)},checkedChildren:"ON",unCheckedChildren:"OFF"})),g.a.createElement(s.a.Item,{label:"Image"},g.a.createElement(d.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:function(e){var a="image/jpeg"===e.type;a||A.b.error("You can only upload JPG file!");var t=e.size/1024/1024<1;return t||A.b.error("Image must smaller than 1MB!"),a&&t&&(te(URL.createObjectURL(e)),X(e)),!1},fileList:[]},ae?g.a.createElement(T.LazyLoadImage,{src:ae,onError:S.errorImageSrc,alt:"image",style:{width:"100%"}}):Oe)),g.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},g.a.createElement(s.a.Item,null,g.a.createElement(f.a,{loading:x,size:"default",htmlType:"submit",type:"primary",raised:!0},x?"Processing":"Save"),g.a.createElement(O.b,{to:"/admin/brand/list"},g.a.createElement(f.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);