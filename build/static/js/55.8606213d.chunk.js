(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[55],{903:function(e,t,a){"use strict";a.r(t);a(126);var n=a(67),r=(a(127),a(45)),i=(a(211),a(65)),l=(a(268),a(152)),o=(a(187),a(110)),d=a(95),c=a(97),u=a(12),s=a(38),m=(a(207),a(40)),p=a(26),f=(a(109),a(31)),h=a(0),g=a.n(h),E=a(151),y=a(129),b=a(128),v=a(186),x=a(58),j=a(11),O=a(209),A=a.n(O),I=a(47),_=a(50),C=a.n(_),V=a(36),S=a(33),D=(a(188),a(94)),T=(a(82),a(37)),N=a(21),k=a.n(N),P=function(e){var t=e.initialData1,a=e.billingAddresses,n=e.setBillingAddresses,r=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return g.a.createElement(f.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return g.a.createElement(l.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return g.a.createElement(T.a,{size:"",title:"Remove",type:"danger",onClick:function(){return i(t.id)}},g.a.createElement(k.a,{icon:"minus"}))}}],i=function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))};return g.a.createElement("div",null,g.a.createElement(D.a,{columns:r,pagination:!1,rowKey:"id",size:"small",dataSource:a}),g.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},g.a.createElement(T.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){n((function(e){return[].concat(Object(d.a)(e),[Object(u.a)(Object(u.a)({},t),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},g.a.createElement(k.a,{icon:"plus"}))))},w=function(e){var t=e.initialData2,a=e.shippingAddresses,n=e.setShippingAddresses,r=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return g.a.createElement(f.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return g.a.createElement(f.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return g.a.createElement(l.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return g.a.createElement(T.a,{size:"",title:"Remove",type:"danger",onClick:function(){return i(t.id)}},g.a.createElement(k.a,{icon:"minus"}))}}],i=function(e){n((function(t){return t.filter((function(t){return t.id!==e}))}))};return g.a.createElement("div",null,g.a.createElement(D.a,{columns:r,pagination:!1,rowKey:"id",size:"small",dataSource:a}),g.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},g.a.createElement(T.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){n((function(e){return[].concat(Object(d.a)(e),[Object(u.a)(Object(u.a)({},t),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},g.a.createElement(k.a,{icon:"plus"}))))},z=["id"],F=["id"],R=f.a.TextArea;t.default=function(){var e,t;Object(S.b)("vendor");var a=Object(x.useLocation)().search,O=A.a.parse(a),_=Object(x.useHistory)(),D=Object(h.useState)({data:[],isLoading:!0}),T=Object(p.a)(D,2),N=T[0],k=T[1],q=Object(h.useState)(!0),B=Object(p.a)(q,2),L=B[0],X=B[1],G=Object(h.useState)(!1),Z=Object(p.a)(G,2),W=Z[0],H=Z[1],J=m.a.useForm(),K=Object(p.a)(J,1)[0],U=(e={id:(new Date).getTime(),address1:""},Object(s.a)(e,"address1",""),Object(s.a)(e,"country",""),Object(s.a)(e,"city",""),Object(s.a)(e,"state",""),Object(s.a)(e,"zip_code",""),Object(s.a)(e,"email",""),Object(s.a)(e,"fax",""),Object(s.a)(e,"phone",""),Object(s.a)(e,"status",!0),e),M=Object(h.useState)([U]),Q=Object(p.a)(M,2),Y=Q[0],$=Q[1],ee=(t={id:(new Date).getTime(),address1:""},Object(s.a)(t,"address1",""),Object(s.a)(t,"country",""),Object(s.a)(t,"city",""),Object(s.a)(t,"state",""),Object(s.a)(t,"zip_code",""),Object(s.a)(t,"email",""),Object(s.a)(t,"fax",""),Object(s.a)(t,"phone",""),Object(s.a)(t,"status",!0),t),te=Object(h.useState)([ee]),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1];Object(h.useEffect)((function(){O.id&&I.j.query({query:I.p.GET_SINGLE_VENDOR,variables:{query:{id:parseInt(O.id)}},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var t,a,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleVendor;if(null===r||void 0===r?void 0:r.status){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{data:null===r||void 0===r?void 0:r.data,error:""})}));var i=[],l=[];null===r||void 0===r||null===(a=r.data)||void 0===a||null===(n=a.addresses)||void 0===n||n.forEach((function(e){var t={id:e.id,address1:e.address1,address2:e.address2,country:e.country,city:e.city,state:e.state,zip_code:e.zip_code,email:e.email,fax:e.fax,phone:e.phone,status:e.status};return"billing"===e.type?i.push(t):l.push(t)})),$(i),re(l)}})).catch((function(e){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){k((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1})}))}))}),[]);return g.a.createElement(g.a.Fragment,null,g.a.createElement(E.a,{title:O.id?"Manage Vendor | Edit ".concat(N.data.company_name?"(".concat(N.data.company_name,")"):""):"Add Vendor"}),g.a.createElement(y.b,null,g.a.createElement(n.a,{gutter:25},g.a.createElement(r.a,{sm:24,xs:24},g.a.createElement(b.a,{headless:!0},O.id&&N.isLoading?g.a.createElement("div",{div:!0,className:"spin"},g.a.createElement(o.a,null)):g.a.createElement(m.a,{style:{width:"100%"},form:K,name:"addVendor",onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{status:L}),a=Y.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,i=e.state,l=e.zip_code,o=e.email,d=e.fax,c=e.phone,u=e.address2;return!(t&&a&&n&&r&&i&&l&&o&&d&&c&&u)}));if(null===a||void 0===a?void 0:a.id)return V.b.warning("Enter Billing Address Correctly!");var n=ne.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,i=e.state,l=e.zip_code,o=e.email,d=e.fax,c=e.phone,u=e.address2;return!(t&&a&&n&&r&&i&&l&&o&&d&&c&&u)}));if(null===n||void 0===n?void 0:n.id)return V.b.warning("Enter Shipping Address Correctly!");H(!0),O.id?I.j.mutate({mutation:I.o.UPDATE_VENDOR,variables:{data:Object(u.a)(Object(u.a)({},t),{},{id:parseInt(O.id)})},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateVendor;if(!a.status)return V.b.error(a.message);var n=[].concat(Object(d.a)(Y),Object(d.a)(ne));n.forEach((function(e,t){I.j.mutate({mutation:I.o.UPDATE_VENDOR_ADDRESS,variables:{data:e},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var a;null===e||void 0===e||null===(a=e.data)||void 0===a||a.addVendorShippingAddress;n.length===t+1&&setTimeout((function(){_.push("/admin/vendor/list"),window.location.reload()}),2e3)})).catch((function(e){return W(!1),V.b.error("Something went wrong")}))}))})).catch((function(e){return console.log("got error on update vendor",e),V.b.error("Something Went wrong !!")})):I.j.mutate({mutation:I.o.CREATE_VENDOR,variables:{data:t},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createVendor;if(!a.status)return V.b.error(a.message);var n=a.id;Y.forEach((function(t,a){t.id;var r=Object(c.a)(t,z);I.j.mutate({mutation:I.o.ADD_VENDOR_BILLING_ADDRESS,variables:{data:Object(u.a)(Object(u.a)({},r),{},{parent_id:n})},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var t;null===e||void 0===e||null===(t=e.data)||void 0===t||t.addVendorBillingAddress})).catch((function(t){return console.log("error on add billing:\n",e),W(!1),V.b.error("Something went wrong")}))})),ne.forEach((function(t,a){t.id;var r=Object(c.a)(t,F);I.j.mutate({mutation:I.o.ADD_VENDOR_SHIPPING_ADDRESS,variables:{data:Object(u.a)(Object(u.a)({},r),{},{parent_id:n})},context:{headers:{TENANTID:"100001",Authorization:C.a.get("psp_t")}}}).then((function(e){var t;null===e||void 0===e||null===(t=e.data)||void 0===t||t.addVendorShippingAddress;ne.length===a+1&&setTimeout((function(){_.push("/admin/vendor/list"),window.location.reload()}),2e3)})).catch((function(t){return console.log("error on add billing:\n",e),W(!1),V.b.error("Something went wrong")}))}))})).catch((function(e){return console.log("got error on add vendor",e),V.b.error("Something Went wrong !!")}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4},initialValues:O.id?{company_name:N.data.company_name,contact_person:N.data.contact_person,email:N.data.email,description:N.data.description,phone_number:N.data.phone_number,EIN_no:N.data.EIN_no,TAX_ID:N.data.TAX_ID,FAX_no:N.data.FAX_no}:null},g.a.createElement(i.a,null,g.a.createElement(i.a.TabPane,{tab:"General",key:"general"},g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Company Name"}],name:"company_name",label:"Company Name"},g.a.createElement(f.a,{placeholder:"Enter Vendor Company Name"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Contact Person"}],label:"Contact Person",name:"contact_person"},g.a.createElement(f.a,{placeholder:"Enter Contact Person"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Email"}],name:"email",label:"Email"},g.a.createElement(f.a,{placeholder:"Enter Vendor Email",type:"email"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Phone Number"}],name:"phone_number",label:"Phone"},g.a.createElement(f.a,{placeholder:"Enter Vendor Phone Number"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax No"}],name:"FAX_no",label:"Fax"},g.a.createElement(f.a,{placeholder:"Enter Vendor Fax"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter EIN No"}],name:"EIN_no",label:"EIN"},g.a.createElement(f.a,{placeholder:"Enter Vendor EIN Number"})),g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax Id"}],name:"TAX_ID",label:"Tax Id"},g.a.createElement(f.a,{placeholder:"Enter Vendor Tax Id"})),g.a.createElement(m.a.Item,{rules:[{required:!0,message:"Please enter Vendor Description"}],name:"description",label:"Description"},g.a.createElement(R,{rows:4,placeholder:"Enter Vendor Description"})),g.a.createElement(m.a.Item,{label:"Vendor Status"},g.a.createElement(l.a,{checked:L,onChange:function(e){return X(e)}}))),g.a.createElement(i.a.TabPane,{tab:"Billing Address",key:"billing_address"},g.a.createElement(P,{initialData1:U,billingAddresses:Y,setBillingAddresses:$})),g.a.createElement(i.a.TabPane,{tab:"Shipping Address",key:"shipping_address"},g.a.createElement(w,{initialData2:ee,shippingAddresses:ne,setShippingAddresses:re}))),g.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},g.a.createElement(m.a.Item,null,g.a.createElement(v.a,{loading:W,size:"default",htmlType:"submit",type:"primary",raised:!0},W?"Processing":"Save"),g.a.createElement(j.b,{to:"/admin/vendor/list"},g.a.createElement(v.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);