(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[61],{980:function(e,t,a){"use strict";a.r(t);a(100);var n=a(50),r=(a(101),a(40)),i=(a(157),a(44)),l=(a(202),a(127)),d=(a(121),a(69)),u=a(57),o=a(7),c=(a(154),a(24)),s=a(14),m=(a(74),a(17)),p=a(0),f=a.n(p),g=a(81),h=a(77),y=a(76),E=a(72),b=a(63),v=a(11),x=a(128),j=a.n(x),A=a(29),C=a(65),I=a.n(C),O=a(26),_=a(25),D=(a(102),a(54)),V=a(75),k=(a(82),a(38)),S=(a(203),a(93)),N=a(18),T=a.n(N),P=function(e){var t=e.defaultBilling,a=e.initialAddressData,n=e.billingAddresses,r=e.setBillingAddresses,i=e.setDefaultBilling,d=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return f.a.createElement(m.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return f.a.createElement(l.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Default",dataIndex:"isDefault",key:"isDefault",align:"right",render:function(e,a){return f.a.createElement(S.a,{checked:t===a.id,onChange:function(e){return i(a.id)}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return f.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return u(t.id)}},f.a.createElement(T.a,{icon:"minus"}))}}],u=function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))};return f.a.createElement("div",null,f.a.createElement(D.a,{columns:d,pagination:!1,rowKey:"id",size:"small",dataSource:n}),f.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},f.a.createElement(k.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){r((function(e){return[].concat(Object(V.a)(e),[Object(o.a)(Object(o.a)({},a),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},f.a.createElement(T.a,{icon:"plus"}))))},w=function(e){var t=e.defaultShipping,a=e.initialAddressData,n=e.shippingAddresses,r=e.setShippingAddresses,i=e.setDefaultShipping,d=[{title:"Address 1",dataIndex:"address1",key:"address1",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Address 1",onChange:function(e){return t.address1=e.target.value}})}},{title:"Address 2",dataIndex:"address2",key:"address2",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Address 2",onChange:function(e){return t.address2=e.target.value}})}},{title:"Country",dataIndex:"country ",key:"country ",render:function(e,t){return f.a.createElement(m.a,{defaultValue:t.country,type:"text",placeholder:"Country",onChange:function(e){return t.country=e.target.value}})}},{title:"City",dataIndex:"city",key:"city",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"City",onChange:function(e){return t.city=e.target.value}})}},{title:"State",dataIndex:"state",key:"state",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"State",onChange:function(e){return t.state=e.target.value}})}},{title:"Zip Code",dataIndex:"zip_code",key:"zip_code",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Zip Code",onChange:function(e){return t.zip_code=e.target.value}})}},{title:"Fax",dataIndex:"fax",key:"fax",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Fax",onChange:function(e){return t.fax=e.target.value}})}},{title:"Email",dataIndex:"email",key:"email",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"email",placeholder:"Email",onChange:function(e){return t.email=e.target.value}})}},{title:"Phone",dataIndex:"phone",key:"phone",render:function(e,t){return f.a.createElement(m.a,{defaultValue:e,type:"text",placeholder:"Phone",onChange:function(e){return t.phone=e.target.value}})}},{title:"Status",dataIndex:"status",key:"status",align:"right",render:function(e,t){return f.a.createElement(l.a,{defaultChecked:e,title:"Status",onChange:function(e){return t.status=e}})}},{title:"Default",dataIndex:"isDefault",key:"isDefault",align:"right",render:function(e,a){return f.a.createElement(S.a,{name:"isDefault",checked:t===a.id,onChange:function(e){return i(a.id)}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return f.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return u(t.id)}},f.a.createElement(T.a,{icon:"minus"}))}}],u=function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))};return f.a.createElement("div",null,f.a.createElement(D.a,{columns:d,pagination:!1,rowKey:"id",size:"small",dataSource:n}),f.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},f.a.createElement(k.a,{title:"Add Address",htmlType:"button",type:"primary",onClick:function(){r((function(e){return[].concat(Object(V.a)(e),[Object(o.a)(Object(o.a)({},a),{},{id:(new Date).getTime()})])}))},style:{marginRight:".5em"}},f.a.createElement(T.a,{icon:"plus"}))))},z=["updatedAt","createdAt","__typename","type","isDefault"],F=["parent_id","isNew","id","isDefault"],q=["parent_id","isNew","isDefault","id"],B=m.a.TextArea;t.default=function(){Object(_.c)("vendor");var e=Object(b.useLocation)().search,t=j.a.parse(e),a=(Object(b.useHistory)(),Object(p.useState)({data:[],isLoading:!0})),x=Object(s.a)(a,2),C=x[0],D=x[1],V=Object(p.useState)(!0),k=Object(s.a)(V,2),S=k[0],N=k[1],T=Object(p.useState)(!1),R=Object(s.a)(T,2),L=R[0],X=R[1],Z=Object(p.useState)(null),G=Object(s.a)(Z,2),J=G[0],K=G[1],U=Object(p.useState)(null),H=Object(s.a)(U,2),M=H[0],W=H[1],Q=c.a.useForm(),Y=Object(s.a)(Q,1)[0],$=Object(p.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=Object(p.useState)(null),re=Object(s.a)(ne,2),ie=re[0],le=re[1],de=Object(p.useState)(!1),ue=Object(s.a)(de,2),oe=(ue[0],ue[1]),ce={id:(new Date).getTime(),parent_id:"",address1:"",address2:"",country:"",city:"",state:"",zip_code:"",email:"",fax:"",phone:"",status:!0,isDefault:!1,isNew:!0},se=Object(p.useState)([ce]),me=Object(s.a)(se,2),pe=me[0],fe=me[1],ge=Object(p.useState)([ce]),he=Object(s.a)(ge,2),ye=he[0],Ee=he[1];Object(p.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&A.j.query({query:A.p.GET_SINGLE_VENDOR,variables:{query:{id:parseInt(t.id)}},context:{headers:{TENANTID:"100001",Authorization:I.a.get("psp_t")}}}).then((function(e){var t,a,n,r,i=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleVendor;if(null===i||void 0===i?void 0:i.status){ce.parent_id=null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.id,D((function(e){return Object(o.a)(Object(o.a)({},e),{},{data:null===i||void 0===i?void 0:i.data,error:""})}));var l=[],d=[];null===i||void 0===i||null===(n=i.data)||void 0===n||null===(r=n.addresses)||void 0===r||r.forEach((function(e){e.updatedAt,e.createdAt,e.__typename,e.type;var t,a=e.isDefault,n=Object(u.a)(e,z),r=Object(o.a)({isDefault:!1,isNew:!1,parent_id:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.id},n);return"billing"===e.type?(a&&K(e.id),l.push(r)):"shipping"===e.type?(a&&W(e.id),d.push(r)):void 0})),fe(l),Ee(d)}})).catch((function(e){D((function(e){return Object(o.a)(Object(o.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){D((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1})}))}))}),[null===t||void 0===t?void 0:t.id]);return Object(p.useEffect)((function(){if(te){var e=pe.map((function(e){e.parent_id;var t=e.isNew,a=e.id,n=(e.isDefault,Object(u.a)(e,F));return Object(o.a)(Object(o.a)({isDefault:J===a,parent_id:ie,isNew:t},n),!t&&{id:a})})),t=ye.map((function(e){e.parent_id;var t=e.isNew,a=(e.isDefault,e.id),n=Object(u.a)(e,q);return Object(o.a)(Object(o.a)({isDefault:M===a,parent_id:ie,isNew:t},n),!t&&{id:a})}));["billing","shipping"].forEach((function(a){X(!0),A.j.mutate({mutation:A.o.UPDATE_VENDOR_ADDRESS,variables:{data:{ref_id:ie,type:a,addresses:Object(o.a)({},"billing"===a?e:t)}},context:{headers:{TENANTID:"100001",Authorization:I.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateVendorAddress;null===a||void 0===a||a.status})).catch((function(e){oe(!0)})).finally((function(e){X(!1)}))}))}}),[te]),f.a.createElement(f.a.Fragment,null,f.a.createElement(g.a,{title:t.id?"Manage Vendor | Edit ".concat(C.data.company_name?"(".concat(C.data.company_name,")"):""):"Add Vendor"}),f.a.createElement(h.b,null,f.a.createElement(n.a,{gutter:25},f.a.createElement(r.a,{sm:24,xs:24},f.a.createElement(y.a,{headless:!0},t.id&&C.isLoading?f.a.createElement("div",{div:!0,className:"spin"},f.a.createElement(d.a,null)):f.a.createElement(c.a,{style:{width:"100%"},form:Y,name:"addVendor",onFinish:function(e){var a=Object(o.a)(Object(o.a)({},e),{},{status:S}),n=pe.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,i=e.state,l=e.zip_code,d=e.email,u=e.fax,o=e.phone,c=e.address2;return!(t&&a&&n&&r&&i&&l&&d&&u&&o&&c)}));if(null===n||void 0===n?void 0:n.id)return O.b.warning("Enter Billing Address Correctly!");var r=ye.find((function(e){var t=e.id,a=e.address1,n=e.country,r=e.city,i=e.state,l=e.zip_code,d=e.email,u=e.fax,o=e.phone,c=e.address2;return!(t&&a&&n&&r&&i&&l&&d&&u&&o&&c)}));if(null===r||void 0===r?void 0:r.id)return O.b.warning("Enter Shipping Address Correctly!");X(!0),t.id?A.j.mutate({mutation:A.o.UPDATE_VENDOR,variables:{data:Object(o.a)(Object(o.a)({},a),{},{id:parseInt(t.id)})},context:{headers:{TENANTID:"100001",Authorization:I.a.get("psp_t")}}}).then((function(e){var a,n=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.updateVendor;if(!n.status)return O.b.error(n.message);le(parseInt(null===t||void 0===t?void 0:t.id)),ae(!0)})).catch((function(e){console.log("got error on update vendor",e),oe(!0)})).finally((function(){X(!1)})):A.j.mutate({mutation:A.o.CREATE_VENDOR,variables:{data:a},context:{headers:{TENANTID:"100001",Authorization:I.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createVendor;if(!a.status)return O.b.error(a.message);le(parseInt(a.id)),ae(!0)})).catch((function(e){X(!1),console.log("got error on add vendor",e),oe(!0)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4},initialValues:t.id?{company_name:C.data.company_name,contact_person:C.data.contact_person,email:C.data.email,description:C.data.description,phone_number:C.data.phone_number,EIN_no:C.data.EIN_no,TAX_ID:C.data.TAX_ID,FAX_no:C.data.FAX_no}:null},f.a.createElement(i.a,null,f.a.createElement(i.a.TabPane,{tab:"General",key:"general"},f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Company Name"}],name:"company_name",label:"Company Name"},f.a.createElement(m.a,{placeholder:"Enter Vendor Company Name"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Vendor Contact Person"}],label:"Contact Person",name:"contact_person"},f.a.createElement(m.a,{placeholder:"Enter Contact Person"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Email"}],name:"email",label:"Email"},f.a.createElement(m.a,{placeholder:"Enter Vendor Email",type:"email"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Phone Number"}],name:"phone_number",label:"Phone"},f.a.createElement(m.a,{placeholder:"Enter Vendor Phone Number"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax No"}],name:"FAX_no",label:"Fax"},f.a.createElement(m.a,{placeholder:"Enter Vendor Fax"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter EIN No"}],name:"EIN_no",label:"EIN"},f.a.createElement(m.a,{placeholder:"Enter Vendor EIN Number"})),f.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Fax Id"}],name:"TAX_ID",label:"Tax Id"},f.a.createElement(m.a,{placeholder:"Enter Vendor Tax Id"})),f.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Vendor Description"}],name:"description",label:"Description"},f.a.createElement(B,{rows:4,placeholder:"Enter Vendor Description"})),f.a.createElement(c.a.Item,{label:"Vendor Status"},f.a.createElement(l.a,{checked:S,onChange:function(e){return N(e)}}))),f.a.createElement(i.a.TabPane,{tab:"Billing Address",key:"billing_address"},f.a.createElement(P,{defaultBilling:J,initialAddressData:ce,billingAddresses:pe,setBillingAddresses:fe,setDefaultBilling:K})),f.a.createElement(i.a.TabPane,{tab:"Shipping Address",key:"shipping_address"},f.a.createElement(w,{defaultShipping:M,initialAddressData:ce,shippingAddresses:ye,setShippingAddresses:Ee,setDefaultShipping:W}))),f.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},f.a.createElement(c.a.Item,null,f.a.createElement(E.a,{loading:L,size:"default",htmlType:"submit",type:"primary",raised:!0},L?"Processing":"Save"),f.a.createElement(v.b,{to:"/admin/vendor/list"},f.a.createElement(E.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);