(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[22],{627:function(e,n,a){"use strict";a.d(n,"a",(function(){return b}));var t,r,u,i,l,d,s,o=a(11),c=a(20),b={BANNER_ADD:Object(c.d)(t||(t=Object(o.a)(["\n    mutation addBanner($data: BannerInput) {\n        addBanner(data: $data) {\n        message\n        status\n        data {\n            banner_uuid\n        }\n      }\n    }"]))),BANNER_IMAGE_ADD:Object(c.d)(r||(r=Object(o.a)(["\n    mutation addBannerImage($data: BannerImageInput!) {\n      addBannerImage(data: $data) {\n        message\n        status\n        data {\n          banner_uuid\n          title\n          link\n          sort_order\n        }\n      }\n    }"]))),GET_ALL_BANNER:Object(c.d)(u||(u=Object(o.a)(["\n    query getAllBanners{\n      getAllBanners {\n        message\n        status\n        tenant_id\n        data {\n          banner_uuid\n          banner_name\n          banner_slug\n          banner_status\n          createdAt\n        }\n      }\n    }"]))),GET_SINGLE_BANNER:Object(c.d)(i||(i=Object(o.a)(["\n    query getSingleBanner($banner_uuid : UUID!){\n    getSingleBanner(query: {banner_uuid: $banner_uuid}) {\n      message\n      tenant_id\n      status\n      data {\n        banner_uuid\n        banner_name\n        banner_status\n        bannerimages {\n          banner_uuid \n          image\n          link\n          sort_order\n          title\n        }\n      }\n    }\n  }"]))),BANNER_UPDATE:Object(c.d)(l||(l=Object(o.a)(["\n  mutation updateBanner($data: UpdateBannerInput){\n    updateBanner(data:$data){\n      message\n      status\n    }\n  }"]))),BANNER_IMAGE_UPDATE:Object(c.d)(d||(d=Object(o.a)(["\n    mutation updateBannerImage($data: UpdateBannerImageInput){\n    updateBannerImage(data: $data) {\n      message\n      status\n    }\n  }"]))),BANNER_IMAGE_DELETE:Object(c.d)(s||(s=Object(o.a)(["\n    mutation deleteBannerImage($banner_uuid: UUID!) {\n      deleteBannerImage(data: {banner_uuid: $banner_uuid}) {\n        message\n        status\n        tenant_id\n      }\n    }"])))}},890:function(e,n,a){"use strict";a.r(n);a(131);var t=a(67),r=(a(132),a(44)),u=(a(282),a(133)),i=(a(143),a(68)),l=(a(199),a(122)),d=(a(257),a(147)),s=a(12),o=a(33),c=a(0),b=a.n(c),m=a(174),_=a(26),g=a.n(_),E=a(146),p=a(145),v=a(144),f=a(178),A=a(10),B=a(112),h=a.n(B),N=a(284),j=a(627),O=a(46),I=a(286),D=a.n(I),w=a(50),y=a(34),S=a(123);n.default=function(){var e,n;Object(y.b)("banner");var a=Object(c.useState)({data:[],loading:!0,error:""}),_=Object(o.a)(a,2),B=_[0],I=_[1],U=Object(c.useState)([]),k=Object(o.a)(U,2),x=k[0],C=k[1],T=Object(c.useState)(!1),$=Object(o.a)(T,2),R=$[0],L=$[1],G=Object(O.d)((function(e){return e.auth.token}));Object(c.useEffect)((function(){N.b.query({query:j.a.GET_ALL_BANNER,context:{headers:{TENANTID:"100001",Authorization:G}}}).then((function(e){var n,a=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.getAllBanners;I((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){I((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){I((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[]);var P=[{title:"ID",dataIndex:"banner_uuid",key:"banner_uuid",width:80,ellipsis:!0,sorter:function(e,n){return e.banner_uuid.toUpperCase()>n.banner_uuid.toUpperCase()?1:-1}},{title:"Name",dataIndex:"banner_name",key:"banner_name",width:250,ellipsis:!0,sorter:function(e,n){return e.banner_name.toUpperCase()>n.banner_name.toUpperCase()?1:-1}},{title:"Alias",dataIndex:"banner_slug",key:"banner_slug",width:250,ellipsis:!0,sorter:function(e,n){return e.banner_slug.toUpperCase()>n.banner_slug.toUpperCase()?1:-1}},{title:"Status",dataIndex:"banner_status",key:"banner_status",align:"right",width:120,render:function(e,n){return b.a.createElement(d.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,n){var a={data:{banner_uuid:e.banner_uuid,banner_status:n}};N.b.mutate({mutation:j.a.BANNER_UPDATE,variables:a,context:{headers:{TENANTID:"100001",Authorization:G}}}).then((function(n){var a,t,r,u=null===n||void 0===n||null===(a=n.data)||void 0===a||null===(t=a.updateBanner)||void 0===t?void 0:t.status;if(console.log(e),!u)return w.b.error(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);w.b.success("".concat(e.banner_name," Status updated."))})).catch((function(e){console.log(e),w.b.error("Something went wrong!!")}))}(n,e)}})},filters:[{text:"Enable",value:!0},{text:"Disable",value:!1}],onFilter:function(e,n){return n.banner_status===e},sorter:function(e,n){return e.banner_status-n.banner_status}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:120,align:"center",render:function(e,n){return b.a.createElement("span",{className:"status-text"},b.a.createElement(D.a,{format:"DD MMMM YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"action",align:"right",key:"action",width:100,render:function(e,n){return b.a.createElement(b.a.Fragment,null,b.a.createElement(A.b,{to:"/admin/banner/edit?id=".concat(n.banner_uuid)},b.a.createElement(h.a,{name:"edit"})))}}];return b.a.createElement(b.a.Fragment,null,b.a.createElement(E.a,{title:"Banner List",buttons:[b.a.createElement("div",{key:"1",className:"page-header-actions"},b.a.createElement(A.b,{to:"/admin/banner/add"},b.a.createElement(f.a,{size:"small",title:"Add Banner",type:"primary"},b.a.createElement(g.a,{icon:"plus"}))))]}),b.a.createElement(p.b,null,b.a.createElement(t.a,{gutter:25},b.a.createElement(r.a,{sm:24,xs:24},b.a.createElement(v.a,{headless:!0},B.loading?b.a.createElement("div",{className:"spin"},b.a.createElement(l.a,null)):B.error?b.a.createElement("p",null,B.error):b.a.createElement(b.a.Fragment,null,b.a.createElement(i.a,{placeholder:"Search in Banner...",prefix:b.a.createElement(m.a,null),onChange:function(e){var n=e.target.value;L(n),C(B.data.filter((function(e){return((null===e||void 0===e?void 0:e.banner_name)+(null===e||void 0===e?void 0:e.banner_slug)+(null===e||void 0===e?void 0:e.banner_uuid)).toLowerCase().includes(n.toLowerCase())})))}}),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement("span",{className:"psp_list"},b.a.createElement(u.a,{className:"table-responsive",columns:P,pagination:{defaultPageSize:S.a.BANNER_PER_PAGE,total:R?null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.length:null===B||void 0===B||null===(n=B.data)||void 0===n?void 0:n.length,showTotal:function(e,n){return"".concat(n[0],"-").concat(n[1]," of ").concat(e," items")}},rowKey:"banner_uuid",size:"small",dataSource:R?x:B.data,rowClassName:function(e,n){return n%2===0?"":"altTableClass"}}))))))))}}}]);