(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[57],{1044:function(e,t,a){"use strict";a.r(t);a(89);var n=a(33),r=(a(152),a(44)),l=(a(70),a(20)),d=(a(71),a(14)),o=(a(92),a(25)),c=(a(134),a(73)),i=(a(167),a(77)),u=a(6),s=a(9),m=(a(408),a(334)),p=a(0),b=a.n(p),f=a(26),E=a.n(f),h=a(142),O=a(108),y=a(107),v=a(72),j=a(75),g=a(12),S=a(153),D=a.n(S),_=a(663),I=a(218),A=a(32),T=a(28),w=a(21),C=a(40),k=a(169),L=a(135),P=a.n(L),N=a(124),x=a.n(N),U=a(244),M=a.n(U),R=a(252),Y=a(219),z=m.a.RangePicker,q=!1;t.default=function(){var e,t=Object(p.useState)({data:[],loading:!1,error:""}),a=Object(s.a)(t,2),m=a[0],f=a[1],S=Object(C.d)((function(e){return e.auth.token})),L=Object(p.useState)(!1),N=Object(s.a)(L,2),U=N[0],H=N[1],F=Object(j.useHistory)(),Q=Object(j.useLocation)().search,K=M.a.parse(Q),W=Object(p.useState)(!1),G=Object(s.a)(W,2),B=G[0],J=G[1],V=Object(p.useState)({data:[],loading:!1,error:""}),$=Object(s.a)(V,2),X=$[0],Z=$[1],ee=Object(p.useState)({data:[],loading:!1,error:""}),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],re=Object(p.useState)({data:[],loading:!1,error:""}),le=Object(s.a)(re,2),de=le[0],oe=le[1],ce=Object(p.useState)(!0),ie=Object(s.a)(ce,2),ue=ie[0],se=ie[1],me=Object(p.useState)(null),pe=Object(s.a)(me,2),be=pe[0],fe=pe[1],Ee=Object(p.useState)([]),he=Object(s.a)(Ee,2),Oe=he[0],ye=he[1],ve=Object(p.useState)(null),je=Object(s.a)(ve,2),ge=je[0],Se=je[1],De=Object(p.useState)(!1),_e=Object(s.a)(De,2),Ie=_e[0],Ae=_e[1],Te=Object(p.useState)({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""}),we=Object(s.a)(Te,2),Ce=we[0],ke=we[1],Le=function(e,t){if(!Object(w.a)(t))return F.push("/admin/403");ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{statuses:[null===ae||void 0===ae?void 0:ae.data.filter((function(t){return t.slug===e})).shift().id]})}))};Object(p.useEffect)((function(){if(K&&0!==ae.data.length)if(K.status)switch(Ae(!0),K.status){case Y.a.STOCK_CHECK:Le(Y.a.STOCK_CHECK,"order-stock-check");break;case Y.a.CREDIT_CHECK:Le(Y.a.CREDIT_CHECK,"order-credit-check");break;case Y.a.ALLOCATION:Le(Y.a.ALLOCATION,"order-allocation");break;case Y.a.SHIP_REVIEW:Le(Y.a.SHIP_REVIEW,"order-ship-review");break;case Y.a.ALLOCATION_HOLD:Le(Y.a.ALLOCATION_HOLD,"order-allocation-hold")}else if(!Object(w.a)("order"))return F.push("/admin/403")}),[ae.data.length,null===K||void 0===K?void 0:K.status]);var Pe=[{title:"Order Id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1},render:function(e,t){return b.a.createElement(g.b,{to:"/admin/order/view?id=".concat(t.id)},e)}},{title:"Customer",dataIndex:["customer","first_name"],key:"first_name",width:150,render:function(e,t){return"".concat(e," ").concat(t.customer.last_name)},sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Customer Email",dataIndex:["customer","email"],key:"email",width:200,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"Total Amount",dataIndex:"total",key:"total",align:"center",width:120,render:function(e){return"$".concat(e)},sorter:function(e,t){return e.total>t.total?1:-1}},{title:"Status",dataIndex:["orderStatus","name"],key:"name",align:"center",width:150,render:function(e){return b.a.createElement("span",{style:{borderRadius:"4em",padding:".5em 1.5em",color:"Pending"===e?"#feaf00":"Completed"===e?"#2fb083":"",background:"Pending"===e?"#fef6e6":"Completed"===e?"#ebf9f4":""}},e)},sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Payment Method",dataIndex:["paymentmethod","name"],key:"name",width:150,sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Date Added",dataIndex:"createdAt",key:"createdAt",align:"center",width:150,sorter:function(e,t){return e.createdAt===t.createdAt?0:e.createdAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Date Updated",dataIndex:"updatedAt",key:"updatedAt",align:"center",width:150,sorter:function(e,t){return e.updatedAt===t.updatedAt?0:e.updatedAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"action",width:140,align:"center",key:"createdAt",render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(i.a,{placement:"topLeft",title:"Edit Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/order/edit/".concat(t.id)},b.a.createElement(D.a,{name:"edit",style:{margin:".5em 1em",color:"#5F63F2"}}))),b.a.createElement(i.a,{placement:"topLeft",title:"Make Purchase Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/po/add?order_id=".concat(t.id)},b.a.createElement(D.a,{name:"cart-plus",style:{margin:".5em 1em",color:"#e67e22"}}))))}}],Ne=function(e,t){return[x()(e,"YYYY-MM-DD"),x()(t,"YYYY-MM-DD")]};return Object(p.useEffect)((function(){f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!0})})),T.j.query({query:R.a.GET_PAYMENT_METHOD_LIST,context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getPaymentMethodListPublic;a.status&&Z(a)})).catch((function(e){Z((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Z((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})})),f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),T.j.query({query:k.a.GET_ORDER_STATUS_LIST,context:{headers:{TENANTID:"100001",Authorization:S}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderStatusList;a.status&&ne(a)})).catch((function(e){ne((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){ne((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})})),f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),T.j.query({query:k.a.GET_ORDER_UPDATE_ADMIN_LIST,context:{headers:{TENANTID:"100001",Authorization:S}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderUpdateAdminList;a.status&&oe(a)})).catch((function(e){oe((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){oe((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})})),f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),q&&(Ce.paymentmethods.length>0||Ce.productIds.length>0||Ce.statuses.length>0||Ce.updatedby.length>0||""!==Ce.searchQuery||""!==Ce.orderEntryEndDate||""!==Ce.orderEntryStartDate||""!==Ce.orderUpdatedEndDate||""!==Ce.orderUpdatedStartDate?se(!1):se(!0)),q=!0}),[Ce]),b.a.createElement(b.a.Fragment,null,b.a.createElement(h.a,{title:"List Orders",buttons:[b.a.createElement("div",{key:"1",className:"page-header-actions"},b.a.createElement(v.a,{size:"small",type:"white",onClick:function(){return H((function(e){return!e}))}},b.a.createElement(E.a,{icon:"filter"}),"Filter"),b.a.createElement(v.a,{size:"small",type:"white",onClick:function(){fe(null),se(!0),Se(null),ke({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""})}},b.a.createElement(_.a,null),"Reset Filter"),b.a.createElement(g.b,{to:"/admin/order/add"},b.a.createElement(v.a,{size:"small",title:"Add Order",type:"primary"},b.a.createElement(E.a,{icon:"plus"}))))]}),b.a.createElement(O.b,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{sm:24,xs:24},b.a.createElement(y.a,{headless:!0},m.loading?b.a.createElement("div",{className:"spin"},b.a.createElement(c.a,null)):m.error?b.a.createElement("p",null,m.error):b.a.createElement(b.a.Fragment,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{span:18},b.a.createElement(o.a,{style:{height:"42px"},placeholder:"Search Order By Customer...",prefix:b.a.createElement(I.a,null),value:null===Ce||void 0===Ce?void 0:Ce.searchQuery,onChange:function(e){e.persist();var t=e.target.value;ke((function(e){return Object(u.a)(Object(u.a)({},e),{},{searchQuery:t})}))}})),b.a.createElement(d.a,{span:6},b.a.createElement(v.a,{style:{height:"42px"},size:"large",type:"primary",disabled:ue,onClick:function(){var e,t,a,n,r;f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!0})})),T.j.query({query:k.a.GET_ALL_ORDER,variables:{query:{searchQuery:null!==(e=Ce.searchQuery)&&void 0!==e?e:"",productIds:Ce.productIds.length?Ce.productIds:null,paymentmethods:Ce.paymentmethods.length?Ce.paymentmethods:null,statuses:Ce.statuses.length?Ce.statuses:null,updatedby:Ce.updatedby.length?Ce.updatedby:null,orderEntryStartDate:null!==(t=Ce.orderEntryStartDate)&&void 0!==t?t:"",orderEntryEndDate:null!==(a=Ce.orderEntryEndDate)&&void 0!==a?a:"",orderUpdatedStartDate:null!==(n=Ce.orderUpdatedStartDate)&&void 0!==n?n:"",orderUpdatedEndDate:null!==(r=Ce.orderUpdatedEndDate)&&void 0!==r?r:""}},context:{headers:{TENANTID:"100001",Authorization:S}},fetchPolicy:"network-only"}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderlistAdmin;a.status&&f(a)})).catch((function(e){f((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})})),J(!B)}))}},"Search"))),b.a.createElement("br",null),b.a.createElement("br",null),U&&b.a.createElement("div",{style:{marginBottom:"2.5em"}},b.a.createElement(l.a,{gutter:16},b.a.createElement(d.a,{span:8},"Product: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Product",options:Oe,showSearch:!0,allowClear:!0,optionFilterProp:"label",size:"middle",mode:"multiple",value:null===Ce||void 0===Ce?void 0:Ce.productIds,onDeselect:function(e){return ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{productIds:t.productIds.filter((function(t){return t!==e}))})}))},onSelect:function(e){ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{productIds:Ce.productIds.concat(parseInt(e))})}))},onSearch:function(e){e.length>3?T.j.query({query:R.a.SEARCH_PRODUCT,variables:{query:{searchQuery:e}},context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSearchedProducts;a.status&&ye(a.data.map((function(e){return Object(u.a)({label:(null===e||void 0===e?void 0:e.prod_name)+(null===e||void 0===e?void 0:e.prod_slug)+(null===e||void 0===e?void 0:e.prod_sku)+(null===e||void 0===e?void 0:e.prod_partnum)+(null===e||void 0===e?void 0:e.mfg_build_part_number),value:null===e||void 0===e?void 0:e.id},e)})))})):ye([])}})),b.a.createElement(d.a,{span:8},"Payment Method: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:X.loading?"Loading..":"Select Payment Method",size:"middle",mode:"multiple",optionFilterProp:"label",value:null===Ce||void 0===Ce?void 0:Ce.paymentmethods,onDeselect:function(e){return ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{paymentmethods:t.paymentmethods.filter((function(t){return t!==e}))})}))},onSelect:function(e){ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{paymentmethods:Ce.paymentmethods.concat(parseInt(e))})}))},options:null===X||void 0===X?void 0:X.data.map((function(e){return{label:e.name,value:e.id}}))})),b.a.createElement(d.a,{span:8},"Order Status : ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:ae.loading?"Loading..":"Select Order Status",disabled:Ie,size:"middle",mode:"multiple",optionFilterProp:"label",value:null===Ce||void 0===Ce?void 0:Ce.statuses,onDeselect:function(e){return ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{statuses:t.statuses.filter((function(t){return t!==e}))})}))},onSelect:function(e){ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{statuses:Ce.statuses.concat(parseInt(e))})}))},options:null===ae||void 0===ae?void 0:ae.data.map((function(e){return{label:e.name,value:e.id}}))}))),b.a.createElement(l.a,{gutter:16,style:{marginTop:".5em"}},b.a.createElement(d.a,{span:8},"Updated By: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},size:"middle",mode:"multiple",value:null===Ce||void 0===Ce?void 0:Ce.updatedby,onDeselect:function(e){return ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{updatedby:t.updatedby.filter((function(t){return t!==e}))})}))},placeholder:de.loading?"Loading...":"Select Admins..",options:null===de||void 0===de||null===(e=de.data)||void 0===e?void 0:e.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})),onSelect:function(e){ke((function(t){return Object(u.a)(Object(u.a)({},t),{},{updatedby:Ce.updatedby.concat(parseInt(e))})}))}})),b.a.createElement(d.a,{span:8},"Date Added: ",b.a.createElement("br",null),b.a.createElement(z,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==be?be:"",onChange:function(e){e?(ke((function(t){var a,n;return Object(u.a)(Object(u.a)({},t),{},{orderEntryStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderEntryEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),fe(Ne(e[0],e[1]))):fe(null)}})),b.a.createElement(d.a,{span:8},"Date Updated: ",b.a.createElement("br",null),b.a.createElement(z,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==ge?ge:"",onChange:function(e){e?(ke((function(t){var a,n;return Object(u.a)(Object(u.a)({},t),{},{orderUpdatedStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderUpdatedEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),Se(Ne(e[0],e[1]))):Se(null)}})))),b.a.createElement("span",{className:"psp_list"},b.a.createElement(n.a,{className:"table-responsive",columns:Pe,rowKey:"id",size:"small",dataSource:(null===m||void 0===m?void 0:m.data)?m.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:A.a.ORDER_PER_PAGE,total:(null===m||void 0===m?void 0:m.data)?m.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);