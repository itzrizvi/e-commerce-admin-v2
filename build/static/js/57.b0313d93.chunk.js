(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[57],{1023:function(e,t,a){"use strict";a.r(t);a(99);var n=a(49),r=(a(144),a(38)),l=(a(87),a(27)),d=(a(88),a(19)),o=(a(92),a(24)),c=(a(143),a(89)),i=(a(186),a(85)),u=a(6),s=a(11),m=(a(386),a(329)),p=a(0),b=a.n(p),f=a(22),E=a.n(f),h=a(133),y=a(115),v=a(114),O=a(63),g=a(13),j=a(145),D=a.n(j),S=a(640),_=a(215),I=a(94),w=a(28),A=a(25),T=a(48),k=a(187),x=a(172),P=a.n(x),N=a(118),U=a.n(N),C=a(249),M=m.a.RangePicker,Y=!1;t.default=function(){var e;Object(A.d)("order");var t=Object(p.useState)({data:[],loading:!1,error:""}),a=Object(s.a)(t,2),m=a[0],f=a[1],j=Object(T.d)((function(e){return e.auth.token})),x=Object(p.useState)(!1),N=Object(s.a)(x,2),z=N[0],L=N[1],R=Object(p.useState)(!1),q=Object(s.a)(R,2),F=q[0],Q=q[1],G=Object(p.useState)({data:[],loading:!1,error:""}),W=Object(s.a)(G,2),B=W[0],H=W[1],J=Object(p.useState)({data:[],loading:!1,error:""}),K=Object(s.a)(J,2),V=K[0],$=K[1],X=Object(p.useState)({data:[],loading:!1,error:""}),Z=Object(s.a)(X,2),ee=Z[0],te=Z[1],ae=Object(p.useState)(!0),ne=Object(s.a)(ae,2),re=ne[0],le=ne[1],de=Object(p.useState)(null),oe=Object(s.a)(de,2),ce=oe[0],ie=oe[1],ue=Object(p.useState)([]),se=Object(s.a)(ue,2),me=se[0],pe=se[1],be=Object(p.useState)(null),fe=Object(s.a)(be,2),Ee=fe[0],he=fe[1],ye=Object(p.useState)({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""}),ve=Object(s.a)(ye,2),Oe=ve[0],ge=ve[1],je=[{title:"Order Id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1}},{title:"Customer",dataIndex:["customer","first_name"],key:"first_name",width:150,render:function(e,t){return"".concat(e," ").concat(t.customer.last_name)},sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Customer Email",dataIndex:["customer","email"],key:"email",width:200,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"Total Amount",dataIndex:"total",key:"total",align:"center",width:120,render:function(e){return"$".concat(e)},sorter:function(e,t){return e.total>t.total?1:-1}},{title:"Status",dataIndex:["orderStatus","name"],key:"name",align:"center",width:150,render:function(e){return b.a.createElement("span",{style:{borderRadius:"4em",padding:".5em 1.5em",color:"Pending"===e?"#feaf00":"Completed"===e?"#2fb083":"",background:"Pending"===e?"#fef6e6":"Completed"===e?"#ebf9f4":""}},e)},sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Payment Method",dataIndex:["paymentmethod","name"],key:"name",width:150,sorter:function(e,t){return e.name>t.name?1:-1}},{title:"Date Added",dataIndex:"createdAt",key:"createdAt",align:"center",width:150,sorter:function(e,t){return e.createdAt===t.createdAt?0:e.createdAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Date Updated",dataIndex:"updatedAt",key:"updatedAt",align:"center",width:150,sorter:function(e,t){return e.updatedAt===t.updatedAt?0:e.updatedAt?-1:1},render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(P.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"View",dataIndex:"id",width:70,align:"right",key:"id",render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(g.b,{to:"/admin/order/view?id=".concat(e)},b.a.createElement(D.a,{name:"eye",style:{margin:".5em 1em",color:"rgb(46, 204, 113)"}})))}},{title:"Action",dataIndex:"action",width:140,align:"center",key:"createdAt",render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(i.a,{placement:"topLeft",title:"Edit Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/order/edit/".concat(t.id)},b.a.createElement(D.a,{name:"edit",style:{margin:".5em 1em",color:"#5F63F2"}}))),b.a.createElement(i.a,{placement:"topLeft",title:"Make Purchase Order",color:"cyan"},b.a.createElement(g.b,{to:"/admin/po/add?order_id=".concat(t.id)},b.a.createElement(D.a,{name:"cart-plus",style:{margin:".5em 1em",color:"#e67e22"}}))))}}],De=function(e,t){return[U()(e,"YYYY-MM-DD"),U()(t,"YYYY-MM-DD")]};return Object(p.useEffect)((function(){w.j.query({query:C.a.GET_PAYMENT_METHOD_LIST,context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getPaymentMethodListPublic;a.status&&H(a)})).catch((function(e){H((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){H((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),w.j.query({query:k.a.GET_ORDER_STATUS_LIST,context:{headers:{TENANTID:"100001",Authorization:j}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderStatusList;a.status&&$(a)})).catch((function(e){$((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){$((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),w.j.query({query:k.a.GET_ORDER_UPDATE_ADMIN_LIST,context:{headers:{TENANTID:"100001",Authorization:j}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderUpdateAdminList;a.status&&te(a)})).catch((function(e){te((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){te((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))})),Y&&(Oe.paymentmethods.length>0||Oe.productIds.length>0||Oe.statuses.length>0||Oe.updatedby.length>0||""!==Oe.searchQuery||""!==Oe.orderEntryEndDate||""!==Oe.orderEntryStartDate||""!==Oe.orderUpdatedEndDate||""!==Oe.orderUpdatedStartDate?le(!1):le(!0)),Y=!0}),[Oe]),b.a.createElement(b.a.Fragment,null,b.a.createElement(h.a,{title:"List Orders",buttons:[b.a.createElement("div",{key:"1",className:"page-header-actions"},b.a.createElement(O.a,{size:"small",type:"white",onClick:function(){return L((function(e){return!e}))}},b.a.createElement(E.a,{icon:"filter"}),"Filter"),b.a.createElement(O.a,{size:"small",type:"white",onClick:function(){ie(null),le(!0),he(null),ge({paymentmethods:[],productIds:[],statuses:[],updatedby:[],searchQuery:"",orderEntryStartDate:"",orderEntryEndDate:"",orderUpdatedStartDate:"",orderUpdatedEndDate:""})}},b.a.createElement(S.a,null),"Reset Filter"),b.a.createElement(g.b,{to:"/admin/order/add"},b.a.createElement(O.a,{size:"small",title:"Add Order",type:"primary"},b.a.createElement(E.a,{icon:"plus"}))))]}),b.a.createElement(y.b,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{sm:24,xs:24},b.a.createElement(v.a,{headless:!0},m.loading?b.a.createElement("div",{className:"spin"},b.a.createElement(c.a,null)):m.error?b.a.createElement("p",null,m.error):b.a.createElement(b.a.Fragment,null,b.a.createElement(l.a,{gutter:25},b.a.createElement(d.a,{span:18},b.a.createElement(o.a,{style:{height:"42px"},placeholder:"Search Order By Customer...",prefix:b.a.createElement(_.a,null),value:null===Oe||void 0===Oe?void 0:Oe.searchQuery,onChange:function(e){e.persist();var t=e.target.value;ge((function(e){return Object(u.a)(Object(u.a)({},e),{},{searchQuery:t})}))}})),b.a.createElement(d.a,{span:6},b.a.createElement(O.a,{style:{height:"42px"},size:"large",type:"primary",disabled:re,onClick:function(){var e,t,a,n,r;f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!0})})),w.j.query({query:k.a.GET_ALL_ORDER,variables:{query:{searchQuery:null!==(e=Oe.searchQuery)&&void 0!==e?e:"",productIds:Oe.productIds.length?Oe.productIds:null,paymentmethods:Oe.paymentmethods.length?Oe.paymentmethods:null,statuses:Oe.statuses.length?Oe.statuses:null,updatedby:Oe.updatedby.length?Oe.updatedby:null,orderEntryStartDate:null!==(t=Oe.orderEntryStartDate)&&void 0!==t?t:"",orderEntryEndDate:null!==(a=Oe.orderEntryEndDate)&&void 0!==a?a:"",orderUpdatedStartDate:null!==(n=Oe.orderUpdatedStartDate)&&void 0!==n?n:"",orderUpdatedEndDate:null!==(r=Oe.orderUpdatedEndDate)&&void 0!==r?r:""}},context:{headers:{TENANTID:"100001",Authorization:j}},fetchPolicy:"network-only"}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderlistAdmin;a.status&&f(a)})).catch((function(e){f((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){f((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})})),Q(!F)}))}},"Search"))),b.a.createElement("br",null),b.a.createElement("br",null),z&&b.a.createElement("div",{style:{marginBottom:"2.5em"}},b.a.createElement(l.a,{gutter:16},b.a.createElement(d.a,{span:8},"Product: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Product",options:me,showSearch:!0,allowClear:!0,optionFilterProp:"label",size:"middle",mode:"multiple",value:null===Oe||void 0===Oe?void 0:Oe.productIds,onDeselect:function(e){return ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{productIds:t.productIds.filter((function(t){return t!==e}))})}))},onSelect:function(e){ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{productIds:Oe.productIds.concat(parseInt(e))})}))},onSearch:function(e){e.length>3?w.j.query({query:C.a.SEARCH_PRODUCT,variables:{query:{searchQuery:e}},context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSearchedProducts;a.status&&pe(a.data.map((function(e){return Object(u.a)({label:(null===e||void 0===e?void 0:e.prod_name)+(null===e||void 0===e?void 0:e.prod_slug)+(null===e||void 0===e?void 0:e.prod_sku)+(null===e||void 0===e?void 0:e.prod_partnum)+(null===e||void 0===e?void 0:e.mfg_build_part_number),value:null===e||void 0===e?void 0:e.id},e)})))})):pe([])}})),b.a.createElement(d.a,{span:8},"Payment Method: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:B.loading?"Loading..":"Select Payment Method",size:"middle",mode:"multiple",optionFilterProp:"label",value:null===Oe||void 0===Oe?void 0:Oe.paymentmethods,onDeselect:function(e){return ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{paymentmethods:t.paymentmethods.filter((function(t){return t!==e}))})}))},onSelect:function(e){ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{paymentmethods:Oe.paymentmethods.concat(parseInt(e))})}))},options:null===B||void 0===B?void 0:B.data.map((function(e){return{label:e.name,value:e.id}}))})),b.a.createElement(d.a,{span:8},"Order Status : ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:V.loading?"Loading..":"Select Order Status",size:"middle",mode:"multiple",optionFilterProp:"label",value:null===Oe||void 0===Oe?void 0:Oe.statuses,onDeselect:function(e){return ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{statuses:t.statuses.filter((function(t){return t!==e}))})}))},onSelect:function(e){ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{statuses:Oe.statuses.concat(parseInt(e))})}))},options:null===V||void 0===V?void 0:V.data.map((function(e){return{label:e.name,value:e.id}}))}))),b.a.createElement(l.a,{gutter:16,style:{marginTop:".5em"}},b.a.createElement(d.a,{span:8},"Updated By: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},size:"middle",mode:"multiple",value:null===Oe||void 0===Oe?void 0:Oe.updatedby,onDeselect:function(e){return ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{updatedby:t.updatedby.filter((function(t){return t!==e}))})}))},placeholder:ee.loading?"Loading...":"Select Admins..",options:null===ee||void 0===ee||null===(e=ee.data)||void 0===e?void 0:e.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})),onSelect:function(e){ge((function(t){return Object(u.a)(Object(u.a)({},t),{},{updatedby:Oe.updatedby.concat(parseInt(e))})}))}})),b.a.createElement(d.a,{span:8},"Date Added: ",b.a.createElement("br",null),b.a.createElement(M,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==ce?ce:"",onChange:function(e){e?(ge((function(t){var a,n;return Object(u.a)(Object(u.a)({},t),{},{orderEntryStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderEntryEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),ie(De(e[0],e[1]))):ie(null)}})),b.a.createElement(d.a,{span:8},"Date Updated: ",b.a.createElement("br",null),b.a.createElement(M,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==Ee?Ee:"",onChange:function(e){e?(ge((function(t){var a,n;return Object(u.a)(Object(u.a)({},t),{},{orderUpdatedStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",orderUpdatedEndDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),he(De(e[0],e[1]))):he(null)}})))),b.a.createElement("span",{className:"psp_list"},b.a.createElement(n.a,{className:"table-responsive",columns:je,rowKey:"id",size:"small",dataSource:(null===m||void 0===m?void 0:m.data)?m.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:I.a.ORDER_PER_PAGE,total:(null===m||void 0===m?void 0:m.data)?m.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);
//# sourceMappingURL=57.b0313d93.chunk.js.map