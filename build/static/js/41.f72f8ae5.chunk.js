(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[41],{852:function(t,e,n){"use strict";n.r(e);n(129);var a=n(66),o=(n(130),n(41)),u=(n(279),n(131)),r=(n(142),n(67)),c=(n(196),n(119)),i=(n(254),n(146)),s=n(11),l=n(33),d=n(176),p=n(0),m=n.n(p),_=n(25),f=n.n(_),g=n(171),E=n(145),v=n(144),b=n(143),y=n(175),h=n(10),x=n(111),C=n.n(x),O=n(40),S=n(50),j=n.n(S),k=n(46),A=n(120);e.default=function(){Object(d.a)(Array(10).keys()).map((function(t){return{n:"Coupon".concat(t+1),c:t+1,t:"aaa",aa:102,mia:100,maa:1e3,sd:"18 oct 2022",ed:"18 oct 2022",status:!0,d:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Atque, architecto quod quidem fuga assumenda temporibus quam quae sapiente cupiditate voluptatum.",so:t+1}}));var t=Object(p.useState)({data:[],isLoading:!0}),e=Object(l.a)(t,2),n=e[0],_=e[1],x=Object(p.useState)([]),S=Object(l.a)(x,2),I=S[0],N=S[1],w=Object(p.useState)(""),U=Object(l.a)(w,2),D=U[0],L=U[1];Object(p.useEffect)((function(){O.j.query({query:O.g.GET_ALL_COUPONS,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(t){var e,n=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.getAllCoupons;(null===n||void 0===n?void 0:n.status)&&_((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:null===n||void 0===n?void 0:n.data,error:""})}))})).catch((function(t){_((function(t){return Object(s.a)(Object(s.a)({},t),{},{error:"Something went Wrong.!! "})}))})).finally((function(){_((function(t){return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1})}))}))}),[]);var P=[{title:"Name",dataIndex:"coupon_name",key:"coupon_name",sorter:function(t,e){return t.coupon_name.toUpperCase()>e.coupon_name.toUpperCase()?1:-1}},{title:"CODE",dataIndex:"coupon_code",key:"coupon_code",sorter:function(t,e){return t.coupon_code.toUpperCase()>e.coupon_code.toUpperCase()?1:-1}},{title:"Type",dataIndex:"coupon_type",key:"coupon_type",sorter:function(t,e){return t.coupon_type.toUpperCase()>e.coupon_type.toUpperCase()?1:-1}},{title:"Amount",dataIndex:"coupon_amount",key:"coupon_amount",align:"center",sorter:function(t,e){return t.coupon_amount===e.coupon_amount?0:t.coupon_amount?-1:1}},{title:"Min Amount",dataIndex:"coupon_minamount",key:"coupon_minamount",align:"center",sorter:function(t,e){return t.coupon_minamount===e.coupon_minamount?0:t.coupon_minamount?-1:1}},{title:"Max Amount",dataIndex:"coupon_maxamount",key:"coupon_maxamount",align:"center",sorter:function(t,e){return t.coupon_maxamount===e.coupon_maxamount?0:t.coupon_maxamount?-1:1}},{title:"Start Date",dataIndex:"coupon_startdate",key:"coupon_startdate",sorter:function(t,e){return t.coupon_startdate===e.coupon_startdate?0:t.coupon_startdate?-1:1},render:function(t,e){return new Date(parseInt(t)).toLocaleDateString()}},{title:"End Date",dataIndex:"coupon_enddate",key:"coupon_enddate",sorter:function(t,e){return t.coupon_enddate===e.coupon_enddate?0:t.coupon_enddate?-1:1},render:function(t,e){return new Date(parseInt(t)).toLocaleDateString()}},{title:"Sort Order",dataIndex:"coupon_sortorder",key:"coupon_sortorder",align:"center",sorter:function(t,e){return t.coupon_sortorder===e.coupon_sortorder?0:t.coupon_sortorder?-1:1}},{title:"Status",dataIndex:"coupon_status",key:"coupon_status",align:"center",sorter:function(t,e){return t.coupon_status===e.coupon_status?0:t.coupon_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(t,e){return e.attrgroup_status===t},render:function(t,e){return m.a.createElement(i.a,{defaultChecked:t,title:"Status",onChange:function(t){return T(e,t)}})}},{title:"Action",dataIndex:"coupon_uuid",key:"coupon_uuid",width:70,align:"right",render:function(t,e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.b,{to:"/admin/products/add-coupon?id=".concat(t,"&name=").concat(e.coupon_name)},m.a.createElement(C.a,{name:"edit",style:{margin:".5em 1em"}})))}}],T=function(t,e){var n={data:{coupon_uuid:t.coupon_uuid,coupon_status:e}};console.log(n),O.j.mutate({mutation:O.f.UPDATE_COUPON,variables:n,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(e){var n,a=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.updateCoupon;if(!a.status)return k.b.error(a.message);k.b.success("".concat(t.coupon_name," status updated successfully"))})).catch((function(t){return console.log("got error on status update",t),k.b.error("Something Went wrong !!")}))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(E.a,{title:"Coupons",buttons:[m.a.createElement("div",{key:"1",className:"page-header-actions"},m.a.createElement(h.b,{to:"/admin/products/add-coupon"},m.a.createElement(y.a,{size:"small",title:"Add Coupons",type:"primary"},m.a.createElement(f.a,{icon:"file-plus"}))))]}),m.a.createElement(v.b,null,m.a.createElement(a.a,{gutter:25},m.a.createElement(o.a,{sm:24,xs:24},m.a.createElement(b.a,{headless:!0},n.isLoading?m.a.createElement("div",{className:"spin"},m.a.createElement(c.a,null)):m.a.createElement(m.a.Fragment,null,m.a.createElement(r.a,{placeholder:"Search Coupons...",prefix:m.a.createElement(g.a,null),onChange:function(t){var e=t.target.value;L(e),N(n.data.filter((function(t){return((null===t||void 0===t?void 0:t.coupon_name)+t.coupon_description+t.coupon_code).toLowerCase().includes(e.toLowerCase())})))}}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("span",{className:"psp_list"},m.a.createElement(u.a,{scroll:{x:"max-content"},className:"table-responsive",columns:P,rowKey:"coupon_uuid",size:"small",dataSource:D?I:n.data,rowClassName:function(t,e){return e%2==0?"":"altTableClass"},pagination:{defaultPageSize:A.a.COUPON_GROUPS_PER_PAGE,total:D?I.length:n.data.length,showTotal:function(t,e){return"".concat(e[0],"-").concat(e[1]," of ").concat(t," items")}}}))))))))}}}]);