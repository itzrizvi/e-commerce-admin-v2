(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[61],{943:function(e,t,a){"use strict";a.r(t);a(200);var n=a(97),r=(a(201),a(74)),i=(a(150),a(77)),l=(a(148),a(45)),s=(a(166),a(98)),u=(a(314),a(218)),d=a(9),o=a(23),c=(a(288),a(69)),m=a(0),f=a.n(m),v=a(21),p=a.n(v),E=a(217),h=a(165),_=a(164),g=a(192),b=a(287),y=a(71),j=a(50),x=a(12),I=a(126),A=a.n(I),O=a(68),S=a.n(O),k=a(135),w=a(223),N=a(222),F=a(152),L=a(22);t.default=function(){Object(L.f)("user");var e=Object(j.d)((function(e){return e.auth.token})),t=Object(m.useState)(""),a=Object(o.a)(t,2),v=a[0],I=a[1],O=Object(m.useState)([]),T=Object(o.a)(O,2),z=T[0],C=T[1],U=Object(m.useState)({data:[],isLoading:!0,error:""}),D=Object(o.a)(U,2),P=D[0],R=D[1];Object(m.useEffect)((function(){y.j.query({query:y.e.GET_ALL_STAFF,context:{headers:{TENANTID:"100001",Authorization:e}}}).then((function(e){var t,a;(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.getAllStaff)||void 0===a?void 0:a.isAuth)?R((function(t){var a,n;return Object(d.a)(Object(d.a)({},t),{},{data:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getAllStaff)||void 0===n?void 0:n.data,error:""})})):dispatch(Object(w.b)())})).finally((function(){R((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var V=[{title:"ID",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1}},{title:"Image",dataIndex:"id",key:"id",width:70,render:function(e,t){return f.a.createElement(N.LazyLoadImage,{effect:"blur",width:"40",src:Object(F.renderImage)(t.id,t.image,"user","128x128"),onError:F.errorImageSrc,alt:t.id})}},{title:"Email",dataIndex:"email",key:"email",width:200,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"First Name",dataIndex:"first_name",key:"first_name",ellipsis:!0,sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Last Name",dataIndex:"last_name",key:"last_name",ellipsis:!0,sorter:function(e,t){return e.last_name>t.last_name?1:-1}},{title:"Roles",dataIndex:"roles",key:"roles",ellipsis:!0,sorter:function(e,t){return e.roles.length>t.roles.length?-1:1},render:function(e){var t=e.map((function(e){return e.role})).join(", ");return f.a.createElement("p",null,t)}},{title:"Verified",dataIndex:"email_verified",key:"email_verified",width:100,align:"center",render:function(e){return e.toString().toUpperCase()},sorter:function(e,t){return e.email_verified===t.email_verified?0:e.email_verified?-1:1},filters:[{text:"Verified",value:!0},{text:"Not Verified",value:!1}],onFilter:function(e,t){return t.email_verified===e}},{title:"Status",dataIndex:"status",key:"status",width:100,align:"center",sorter:function(e,t){return e.status===t.status?0:e.status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.user_status===e},render:function(e,t){return f.a.createElement(u.a,{defaultChecked:t.user_status,title:"Status",onChange:function(e){return function(e,t){var a={data:{id:e.id,user_status:t,sendEmail:!1}};y.j.mutate({mutation:y.d.ADMIN_UPDATE,variables:a,context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(t){var a,n,r;if(!(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.adminUpdate)||void 0===n?void 0:n.status))return c.b.error(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.adminUpdate.message);c.b.success("".concat(e.email," user status updated successfully."))}))}(t,e)}})}},{title:"Action",dataIndex:"action",width:90,align:"center",render:function(e,t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(x.b,{to:"/admin/admin/add-admin?id=".concat(t.id)},f.a.createElement(A.a,{name:"edit",style:{color:"#5F63F2"}})))},key:"last_name"}];return f.a.createElement(f.a.Fragment,null,f.a.createElement(E.a,{title:"Users",buttons:[f.a.createElement("div",{key:"1",className:"page-header-actions"},f.a.createElement(x.b,{to:"/admin/admin/add-admin"},f.a.createElement(b.a,{size:"small",title:"Add user",type:"primary"},f.a.createElement(p.a,{icon:"user-plus"}))))]}),f.a.createElement(h.b,null,f.a.createElement(n.a,{gutter:25},f.a.createElement(r.a,{sm:24,xs:24},f.a.createElement(_.a,{headless:!0},P.isLoading?f.a.createElement("div",{className:"spin"},f.a.createElement(s.a,null)):P.error?f.a.createElement("p",null,P.error):f.a.createElement(f.a.Fragment,null,f.a.createElement(l.a,{placeholder:"Search user",prefix:f.a.createElement(g.a,null),onChange:function(e){var t=e.target.value;I(t),C(P.data.filter((function(e){var a;return((null===e||void 0===e?void 0:e.email)+(null===e||void 0===e?void 0:e.first_name)+(null===e||void 0===e?void 0:e.last_name)+(null===e||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.role)).toLowerCase().includes(t.toLowerCase())})))}}),f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement("span",{className:"psp_list"},f.a.createElement(i.a,{className:"table-responsive",columns:V,rowKey:"id",size:"small",dataSource:v?z:P.data,pagination:{defaultPageSize:k.a.USERS_PER_PAGE,total:v?z.length:P.data.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);