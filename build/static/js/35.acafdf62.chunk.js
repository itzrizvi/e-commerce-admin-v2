(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[35],{868:function(e,t,a){"use strict";a.r(t);a(129);var r=a(66),n=(a(130),a(41)),i=(a(254),a(146)),u=(a(196),a(119)),o=(a(142),a(67)),l=a(11),c=(a(278),a(57)),s=a(33),d=(a(280),a(132)),m=a(0),b=a.n(m),g=(a(28),a(145)),p=a(144),f=a(143),E=a(175),h=a(53),A=a(10),_=a(197),T=a.n(_),v=a(40),j=a(50),O=a.n(j),y=a(46),S=d.a.Option;t.default=function(){var e=Object(h.useLocation)().search,t=T.a.parse(e),a=Object(h.useHistory)(),_=Object(m.useState)({data:[],isLoading:!0}),j=Object(s.a)(_,2),N=j[0],w=j[1],I=Object(m.useState)(t.g_id||""),L=Object(s.a)(I,2),x=L[0],G=L[1],P=Object(m.useState)(!0),R=Object(s.a)(P,2),z=R[0],C=R[1],D=Object(m.useState)(!1),F=Object(s.a)(D,2),U=F[0],q=F[1],k=c.a.useForm(),B=Object(s.a)(k,1)[0];Object(m.useEffect)((function(){v.j.query({query:v.c.GET_ALL_ATTR_GROUPS,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttrGroups;(null===a||void 0===a?void 0:a.status)&&w((function(e){return Object(l.a)(Object(l.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){w((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){w((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1})}))}))}),[]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(g.a,{title:t.id?"Manage Attribute | Edit (".concat(t.name,")"):"Add Attribute"}),b.a.createElement(p.b,null,b.a.createElement(r.a,{gutter:25},b.a.createElement(n.a,{sm:24,xs:24},b.a.createElement(f.a,{headless:!0},b.a.createElement(c.a,{style:{width:"100%"},form:B,name:"addRole",onFinish:function(e){var r=e.attribute_name;if(!x)return y.b.warning("Attribute Group is not selected");if(q(!0),t.id){var n={data:{attribute_uuid:t.id,attribute_name:r,attribute_status:z,attr_group_uuid:x}};console.log(n),v.j.mutate({mutation:v.b.UPDATE_ATTRIBUTE,variables:n,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")},refetchQueries:[{query:v.c.GET_ALL_ATTRIBUTES,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}},"getAllAttributes"]}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updateAttribute;if(!n.status)return y.b.error(n.message);a.push("/admin/attributes/list"),window.location.reload(),y.b.success("".concat(e.attr_group_name," updated successfully"))})).catch((function(e){return console.log("got error on addPermission",e),y.b.error("Something Went wrong !!")})).finally((function(){q(!1)}))}else{var i={data:{attribute_name:r,attribute_status:z,attr_group_uuid:x}};v.j.mutate({mutation:v.b.CREATE_ATTRIBUTE,variables:i,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")},refetchQueries:[{query:v.c.GET_ALL_ATTRIBUTES,context:{headers:{TENANTID:"100001",Authorization:O.a.get("psp_t")}}},"getAllAttributes"]}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.createAttribute;if(!n.status)return y.b.error(n.message);a.push("/admin/attributes/list"),window.location.reload(),y.b.success("".concat(e.attribute_name," Added successfully"))})).catch((function(e){return console.log("got error on addPermission",e),y.b.error("Something Went wrong !!")})).finally((function(){q(!1)}))}},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},b.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please enter Attribute Name"}],name:"attribute_name",label:"Attribute Name",initialValue:t.name||""},b.a.createElement(o.a,{placeholder:"Enter Attribute Name"})),b.a.createElement(c.a.Item,{initialValue:"",label:"Attribute Group"},N.isLoading?b.a.createElement("div",{className:"spin"},b.a.createElement(u.a,null)):b.a.createElement(b.a.Fragment,null,b.a.createElement(d.a,{allowClear:!0,placeholder:"Select Attribute Group",value:x,onChange:function(e){return G(e)}},N.data.map((function(e){return b.a.createElement(S,{key:e.attr_group_uuid,value:e.attr_group_uuid},e.attr_group_name)}))))),b.a.createElement(c.a.Item,{name:"attrgroup_status",label:"Status"},b.a.createElement(i.a,{checked:z,onChange:function(e){return C(e)}})),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},b.a.createElement(c.a.Item,null,b.a.createElement(E.a,{loading:U,size:"default",htmlType:"submit",type:"primary",raised:!0},U?"Processing":"Save"),b.a.createElement(A.b,{to:"/admin/attributes/list"},b.a.createElement(E.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);