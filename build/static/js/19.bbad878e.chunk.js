(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[19],{655:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a,l,o,i,r=n(8),c=n(16),s={BANNER_ADD:Object(c.d)(a||(a=Object(r.a)(["\n    mutation addBanner($data: BannerInput) {\n      addBanner(data: $data) {\n        message\n        status\n        id\n      }\n    }\n  "]))),GET_ALL_BANNER:Object(c.d)(l||(l=Object(r.a)(["\n    query getAllBanners {\n      getAllBanners {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          status\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),GET_SINGLE_BANNER:Object(c.d)(o||(o=Object(r.a)(["\n    query getSingleBanner($banner_id: Int!) {\n      getSingleBanner(query: { banner_id: $banner_id }) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          status\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),BANNER_UPDATE:Object(c.d)(i||(i=Object(r.a)(["\n    mutation updateBanner($data: UpdateBannerInput) {\n      updateBanner(data: $data) {\n        message\n        status\n      }\n    }\n  "])))}},685:function(e,t,n){"use strict";n(42),n(100),n(321),n(686)},686:function(e,t,n){},693:function(e,t,n){"use strict";var a=n(1),l=n(5),o=n(171),i=n(4),r=n.n(i),c=n(43),s=n(14),u=n(0),d=n(67),m=n(232),v=n(25),p=n(38),b=n(170),f=n(304),g=n(78),E=n(84),y=n(299),h=function(e){var t=e.prefixCls,n=e.okButtonProps,l=e.cancelButtonProps,o=e.title,i=e.cancelText,r=e.okText,c=e.okType,s=e.icon,m=e.showCancel,v=void 0===m||m,h=e.close,O=e.onConfirm,j=e.onCancel,C=u.useContext(d.b).getPrefixCls;return u.createElement(g.a,{componentName:"Popconfirm",defaultLocale:E.a.Popconfirm},(function(e){return u.createElement("div",{className:"".concat(t,"-inner-content")},u.createElement("div",{className:"".concat(t,"-message")},s&&u.createElement("span",{className:"".concat(t,"-message-icon")},s),u.createElement("div",{className:"".concat(t,"-message-title")},Object(y.a)(o))),u.createElement("div",{className:"".concat(t,"-buttons")},v&&u.createElement(p.a,Object(a.a)({onClick:j,size:"small"},l),null!==i&&void 0!==i?i:e.cancelText),u.createElement(f.a,{buttonProps:Object(a.a)(Object(a.a)({size:"small"},Object(b.a)(c)),n),actionFn:O,close:h,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==r&&void 0!==r?r:e.okText)))}))},O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},j=u.forwardRef((function(e,t){var n=u.useContext(d.b).getPrefixCls,i=Object(c.a)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),p=Object(l.a)(i,2),b=p[0],f=p[1],g=function(t,n){var a,l;f(t,!0),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n),null===(l=e.onOpenChange)||void 0===l||l.call(e,t,n)},E=e.prefixCls,y=e.placement,j=void 0===y?"top":y,C=e.trigger,N=void 0===C?"click":C,T=e.okType,x=void 0===T?"primary":T,B=e.icon,A=void 0===B?u.createElement(o.a,null):B,k=e.children,_=e.overlayClassName,P=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),S=n("popover",E),I=n("popconfirm",E),w=r()(I,_);return u.createElement(m.a,Object(a.a)({},P,{trigger:N,prefixCls:S,placement:j,onOpenChange:function(t){var n=e.disabled;void 0!==n&&n||g(t)},open:b,ref:t,overlayClassName:w,_overlay:u.createElement(h,Object(a.a)({okType:x,icon:A},e,{prefixCls:S,close:function(e){g(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,t)},onCancel:function(t){var n;g(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)}}))}),Object(v.a)(k,{onKeyDown:function(e){var t,n;u.isValidElement(k)&&(null===(n=null===k||void 0===k?void 0:(t=k.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.a.ESC&&b&&g(!1,e)}(e)}}))}));t.a=j},959:function(e,t,n){"use strict";n.r(t);n(200);var a=n(97),l=(n(201),n(74)),o=(n(685),n(693)),i=(n(314),n(218)),r=(n(166),n(98)),c=(n(288),n(69)),s=n(9),u=(n(289),n(52)),d=n(23),m=(n(148),n(45)),v=n(0),p=n.n(v),b=n(217),f=n(165),g=n(164),E=n(287),y=n(58),h=n(50),O=n(99),j=n(22),C=n(648),N=n.n(C),T=(n(649),n(650)),x=n.n(T),B=n(651),A=n.n(B),k=n(655),_=n(76);C.Quill.register("modules/imageResize",x.a),C.Quill.register("modules/htmlEditButton",A.a);var P={toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]],imageResize:{parchment:C.Quill.import("parchment"),modules:["Resize","DisplaySize"]},htmlEditButton:{okText:"Save",msg:'Edit HTML here, when you click "Save" the quill editor\'s contents will be replaced'}};t.default=function(){var e,t;Object(j.f)("banner");var n=Object(y.useParams)(),C=m.a.TextArea,T=Object(y.useHistory)(),x=Object(h.d)((function(e){return e.auth.token})),B=Object(v.useState)(!1),A=Object(d.a)(B,2),S=A[0],I=A[1],w=Object(v.useState)(""),R=Object(d.a)(w,2),z=R[0],L=R[1],q=Object(v.useState)(""),D=Object(d.a)(q,2),F=D[0],V=D[1],G=Object(v.useState)(!1),H=Object(d.a)(G,2),$=H[0],M=H[1],Q=Object(v.useState)(!0),U=Object(d.a)(Q,2),J=U[0],K=U[1],Y=Object(v.useState)({data:{},loading:!0,error:""}),W=Object(d.a)(Y,2),X=W[0],Z=W[1],ee=u.a.useForm(),te=Object(d.a)(ee,1)[0];return Object(v.useEffect)((function(){parseInt(null===n||void 0===n?void 0:n.id)&&O.b.query({query:k.a.GET_SINGLE_BANNER,variables:{banner_id:parseInt(null===n||void 0===n?void 0:n.id)},context:{headers:{TENANTID:"100001",Authorization:x}},fetchPolicy:"network-only"}).then((function(e){var t,n,a,l,o,i,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleBanner;if(!(null===r||void 0===r?void 0:r.status))return Object(_.a)();Z({data:null===r||void 0===r?void 0:r.data,loading:!1,error:""}),te.setFieldsValue({name:null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.name}),V(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.content),L(null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.content),K(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.status),M("custom"===(null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.layout_type))}))}),[null===n||void 0===n?void 0:n.id]),p.a.createElement(p.a.Fragment,null,p.a.createElement(b.a,{title:"Manage Banner | Edit Banner ".concat((null===X||void 0===X||null===(e=X.data)||void 0===e?void 0:e.name)?"(".concat(null===X||void 0===X||null===(t=X.data)||void 0===t?void 0:t.name,")"):"")}),p.a.createElement(f.b,null,p.a.createElement(a.a,{gutter:25},p.a.createElement(l.a,{sm:24,xs:24},p.a.createElement(g.a,{headless:!0},X.loading?p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement(r.a,{tip:"processing..."})):p.a.createElement(u.a,{style:{width:"100%"},form:te,name:"EditBanner",onFinish:function(e){var t;I(!0),t=$?{layout_type:"custom",content:F}:{layout_type:"dynamic",content:z},O.b.mutate({mutation:k.a.BANNER_UPDATE,variables:{data:Object(s.a)(Object(s.a)(Object(s.a)({},e),t),{},{status:J,banner_id:parseInt(null===n||void 0===n?void 0:n.id)})},refetchQueries:[{query:k.a.GET_ALL_BANNER,context:{headers:{TENANTID:"100001",Authorization:x}},fetchPolicy:"network-only"},["getAllBanners"]],context:{headers:{TENANTID:"100001",Authorization:x}}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateBanner;if(!(null===n||void 0===n?void 0:n.status))return Object(_.a)();setTimeout((function(){T.push("/admin/banner/list")}),2e3),c.b.success(null===n||void 0===n?void 0:n.message)})).finally((function(){return I(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},p.a.createElement(u.a.Item,{rules:[{required:!0,max:100,message:"Please enter banner name"}],name:"name",label:"Name"},p.a.createElement(m.a,{style:{width:"50%"},placeholder:"Enter banner name"})),p.a.createElement(u.a.Item,{label:"Status"},p.a.createElement(i.a,{checked:J,onChange:function(e){return K(e)}})),p.a.createElement(u.a.Item,{label:"Custom HTML"},p.a.createElement(i.a,{checked:$,onChange:function(e){return M(e)}})),!$&&p.a.createElement(u.a.Item,{label:"Content"},p.a.createElement(N.a,{theme:"snow",value:z,modules:P,placeholder:"Content goes here...",onChange:L})),$&&p.a.createElement(u.a.Item,{label:"Custom HTML"},p.a.createElement(C,{style:{height:200},defaultValue:F,onChange:function(e){return V(e.target.value)},placeholder:"Paste your HTML Code Here..."})),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},p.a.createElement(o.a,{title:"Cancel Task",placement:"topRight",okText:"Yes",cancelText:"No",onConfirm:function(){return T.push("/admin/banner/list")}},p.a.createElement(E.a,{style:{marginRight:10},type:"light",size:"default"},"Cancel")),p.a.createElement(E.a,{loading:S,size:"default",htmlType:"submit",type:"primary",raised:!0},S?"Processing":"Update Banner"))))))))}}}]);