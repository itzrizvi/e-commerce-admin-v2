(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[36],{873:function(e,t,a){"use strict";a.r(t);a(126);var n=a(67),s=(a(127),a(45)),r=(a(268),a(152)),i=(a(109),a(31)),o=a(12),l=(a(207),a(40)),m=a(26),c=a(0),u=a.n(c),d=a(151),p=a(129),E=a(128),h=a(186),f=a(58),b=a(11),g=a(46),S=a(50),N=a.n(S),P=a(36),O=a(209),_=a.n(O),v=a(33);t.default=function(){Object(v.b)("permission");var e=Object(f.useLocation)().search,t=_.a.parse(e),a=Object(f.useHistory)(),S=l.a.useForm(),O=Object(m.a)(S,1)[0],I=Object(c.useState)(!t.status||"true"==t.status),y=Object(m.a)(I,2),A=y[0],R=y[1],T=Object(c.useState)(!1),j=Object(m.a)(T,2),w=j[0],L=j[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,{title:t.name?"Manage Permission | Edit Permission (".concat(t.name,")"):"Add Permission"}),u.a.createElement(p.b,null,u.a.createElement(n.a,{gutter:25},u.a.createElement(s.a,{sm:24,xs:24},u.a.createElement(E.a,{headless:!0},u.a.createElement(l.a,{style:{width:"100%"},form:O,name:"addRole",onFinish:function(e){if(console.log(e),L(!0),t.id){var n={data:{id:parseInt(t.id),roles_permission_name:e.permissionName,roles_permission_status:A}};g.j.mutate({mutation:g.d.UPDATE_ROLES_PERMISSION,variables:n,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}},refetchQueries:[{query:g.e.GET_ALL_ROLES_PERMISSION,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}},"getAllRolesPermission"]}).then((function(t){var n,s=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.updateRolesPermission;if(!s.status)return P.b.error(s.message);a.push("/admin/permission/list"),window.location.reload(),P.b.success("".concat(e.permissionName," updated successfully"))})).catch((function(e){return console.log("got error on update Permission",e),P.b.error("Soemthing Went wrong !!")})).finally((function(){L(!1)}))}else g.j.mutate({mutation:g.d.CREATE_ROLES_PERMISSION,variables:{data:Object(o.a)(Object(o.a)({},e),{},{permissionStatus:A})},context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}},refetchQueries:[{query:g.e.GET_ALL_ROLES_PERMISSION,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}},"getAllRolesPermission"]}).then((function(t){var n,s=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.createRolesPermission;if(!s.status)return P.b.error(s.message);a.push("/admin/permission/list"),window.location.reload(),P.b.success("".concat(e.permissionName," added successfully"))})).catch((function(e){return console.log("got error on addPermission",e),P.b.error("Soemthing Went wrong !!")})).finally((function(){L(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},u.a.createElement(l.a.Item,{rules:[{required:!0,max:30,message:"Please enter Role Name"}],name:"permissionName",label:"Name",initialValue:t.name||""},u.a.createElement(i.a,{placeholder:"Enter Permission Name"})),u.a.createElement(l.a.Item,{name:"permissionStatus",label:"Status"},u.a.createElement(r.a,{checked:A,onChange:function(e){return R(e)}})),u.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},u.a.createElement(l.a.Item,null,u.a.createElement(h.a,{loading:w,size:"default",htmlType:"submit",type:"primary",raised:!0},w?"Processing":"Save"),u.a.createElement(b.b,{to:"/admin/permission/list"},u.a.createElement(h.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);