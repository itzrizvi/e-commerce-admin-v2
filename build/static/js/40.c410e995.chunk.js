(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[40],{630:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n,l,i,r,d,m,o,u,s,c,E,p,T,b=a(8),g=a(16),O={GET_EMAIL_HEADER_FOOTER_LIST:Object(g.d)(n||(n=Object(b.a)(["\n    query getEmailTempHeaderFooterList {\n      getEmailTempHeaderFooterList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_HEADER_FOOTER:Object(g.d)(l||(l=Object(b.a)(["\n    mutation addEmailTempHeaderFooter($data: AddEmailTempHFInput) {\n      addEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_HEADER_FOOTER:Object(g.d)(i||(i=Object(b.a)(["\n    query getSingleEmailTempHeaderFooter($query: GetSingleEmailHeaderFooterInput) {\n      getSingleEmailTempHeaderFooter(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),EMAIL_TEMPLATE_HEADER_FOOTER_UPDATE:Object(g.d)(r||(r=Object(b.a)(["\n    mutation updateEmailTempHeaderFooter($data: UpdateEmailTempHFInput) {\n      updateEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_LIST:Object(g.d)(d||(d=Object(b.a)(["\n    query getAllEmailTemplateList {\n      getAllEmailTemplateList {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_LIST:Object(g.d)(m||(m=Object(b.a)(["\n    mutation addEmailTemplateOnList($data: AddEmailTemplateListInput) {\n      addEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_LIST:Object(g.d)(o||(o=Object(b.a)(["\n    query getSingleEmailTemplateList($query: GetSingleEmailTemplateListInput) {\n      getSingleEmailTemplateList(query: $query) {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_LIST:Object(g.d)(u||(u=Object(b.a)(["\n    mutation updateEmailTemplateOnList($data: UpdateEmailTemplateListInput) {\n      updateEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),CREATE_EMAIL_TEMPLATE:Object(g.d)(s||(s=Object(b.a)(["\n    mutation createEmailTemplate($data: addEmailTemplateInput) {\n      createEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_CONTENT_LIST:Object(g.d)(c||(c=Object(b.a)(["\n    query getEmailTemplateList {\n      getEmailTemplateList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n          }\n          emailFooter {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_EMAIL_CONTENT_TEMPLATE:Object(g.d)(E||(E=Object(b.a)(["\n    query getSingleEmailTemplate($query: GetSingleEmailTemplateInput) {\n      getSingleEmailTemplate(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n          emailFooter {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_CONTENT:Object(g.d)(p||(p=Object(b.a)(["\n    mutation updateEmailTemplate($data: updateEmailTemplateInput) {\n      updateEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_PREVIEW:Object(g.d)(T||(T=Object(b.a)(["\n    query getEmailTemplatePreview($query: GetEmailTemplatePreviewInput) {\n      getEmailTemplatePreview(query: $query) {\n        message\n        status\n        tenant_id\n        data\n      }\n    }\n  "])))}},974:function(e,t,a){"use strict";a.r(t);a(200);var n=a(97),l=(a(201),a(74)),i=(a(314),a(218)),r=(a(202),a(63)),d=(a(166),a(98)),m=(a(288),a(69)),o=a(9),u=(a(289),a(52)),s=a(23),c=(a(148),a(45)),E=a(0),p=a.n(E),T=a(217),b=a(165),g=a(164),O=a(287),A=a(58),_=a(12),L=a(50),y=a(99),j=a(22),v=a(648),I=a.n(v),f=(a(649),a(630)),h=a(650),M=a.n(h),S=a(651),P=a.n(S),H=a(76);v.Quill.register("modules/imageResize",M.a),v.Quill.register("modules/htmlEditButton",P.a);var q={toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]],imageResize:{parchment:v.Quill.import("parchment"),modules:["Resize","DisplaySize"]},htmlEditButton:{okText:"Save",msg:'Edit HTML here, when you click "Save" the quill editor\'s contents will be replaced'}};t.default=function(){var e,t;Object(j.f)("email-template");var a=c.a.TextArea,v=Object(A.useHistory)(),h=Object(L.d)((function(e){return e.auth.token})),M=Object(E.useState)(!1),S=Object(s.a)(M,2),P=S[0],F=S[1],N=Object(E.useState)(""),C=Object(s.a)(N,2),$=C[0],D=C[1],R=Object(E.useState)(""),G=Object(s.a)(R,2),k=G[0],w=G[1],x=Object(E.useState)(!1),z=Object(s.a)(x,2),B=z[0],U=z[1],Q=u.a.useForm(),J=Object(s.a)(Q,1)[0],V=Object(E.useState)({data:[],loading:!0,error:""}),W=Object(s.a)(V,2),K=W[0],X=W[1],Y=Object(E.useState)({data:[],loading:!0,error:""}),Z=Object(s.a)(Y,2),ee=Z[0],te=Z[1];return Object(E.useEffect)((function(){y.b.query({query:f.a.GET_EMAIL_HEADER_FOOTER_LIST,context:{headers:{TENANTID:"100001",Authorization:h}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getEmailTempHeaderFooterList;X((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},{data:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.filter((function(e){return"header"===e.type})),error:""})})),te((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},{data:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.filter((function(e){return"footer"===e.type})),error:""})}))})).finally((function(){X((function(e){return Object(o.a)(Object(o.a)({},e),{},{loading:!1})})),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{loading:!1})}))}))}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(T.a,{title:"Add Email Content"}),p.a.createElement(b.b,null,p.a.createElement(n.a,{gutter:25},p.a.createElement(l.a,{sm:24,xs:24},p.a.createElement(g.a,{headless:!0},K.loading||ee.loading?p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement(d.a,{tip:"processing..."})):p.a.createElement(u.a,{style:{width:"100%"},form:J,name:"addEmailContent",onFinish:function(e){var t;F(!0),t=B?{layout_type:"custom",content:k}:{layout_type:"dynamic",content:$},y.b.mutate({mutation:f.a.CREATE_EMAIL_TEMPLATE,variables:{data:Object(o.a)(Object(o.a)({},e),t)},refetchQueries:[{query:f.a.GET_EMAIL_TEMPLATE_CONTENT_LIST,context:{headers:{TENANTID:"100001",Authorization:h}},fetchPolicy:"network-only"},["getEmailTemplateList"]],context:{headers:{TENANTID:"100001",Authorization:h}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createEmailTemplate;if(!(null===a||void 0===a?void 0:a.status))return Object(H.a)();setTimeout((function(){v.push("/admin/email/content/list")}),1e3),m.b.success(null===a||void 0===a?void 0:a.message)})).finally((function(){return F(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},p.a.createElement(u.a.Item,{rules:[{required:!0,max:100,message:"Please Enter Email Body Name"}],name:"name",label:"Name"},p.a.createElement(c.a,{placeholder:"Enter Email Content Name"})),p.a.createElement(u.a.Item,{name:"header_id",label:"Header",rules:[{required:!0,message:"Please Select Header"}]},p.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Content Header",optionLabelProp:"label"},null===K||void 0===K||null===(e=K.data)||void 0===e?void 0:e.map((function(e){return p.a.createElement(r.a.Option,{value:e.id,label:e.name},p.a.createElement("div",{className:"demo-option-label-item"},e.name))})))),p.a.createElement(u.a.Item,{name:"footer_id",label:"Footer",rules:[{required:!0,message:"Please Select Footer"}]},p.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Content Footer",optionLabelProp:"label"},null===ee||void 0===ee||null===(t=ee.data)||void 0===t?void 0:t.map((function(e){return p.a.createElement(r.a.Option,{value:e.id,label:e.name},p.a.createElement("div",{className:"demo-option-label-item"},e.name))})))),p.a.createElement(u.a.Item,{label:"Custom HTML"},p.a.createElement(i.a,{defaultChecked:!1,onChange:function(e){return U(e)}})),!B&&p.a.createElement(u.a.Item,{label:"Body"},p.a.createElement(I.a,{theme:"snow",modules:q,placeholder:"Body content goes here...",onChange:D})),B&&p.a.createElement(u.a.Item,{label:"Custom HTML"},p.a.createElement(a,{onChange:function(e){return w(e.target.value)},placeholder:"Paste your HTML Code Here..."})),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},p.a.createElement(u.a.Item,null,p.a.createElement(O.a,{loading:P,size:"default",htmlType:"submit",type:"primary",raised:!0},P?"Processing":"Save"),p.a.createElement(_.b,{to:"/admin/email/content/list"},p.a.createElement(O.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);