(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[38],{1029:function(e,a,t){"use strict";t.r(a);t(200);var n=t(96),r=(t(201),t(74)),d=(t(377),t(221)),l=(t(312),t(219)),i=(t(759),t(781)),o=(t(202),t(64)),u=(t(166),t(97)),s=t(9),c=(t(287),t(53)),m=t(23),b=(t(148),t(45)),g=t(0),v=t.n(g),_=t(218),p=t(165),E=t(164),f=t(217),O=t(59),h=t(12),j=t(50),A=t(51),B=t(372),y=t(650),I=t(98),T=t(315),N=t.n(T),D=t(152),S=t(223),C=t(22),L=t(115);a.default=function(){var e,a,t,T,R;Object(C.f)("manufacture");var q=Object(O.useLocation)().search,G=N.a.parse(q),$=b.a.TextArea,U=Object(O.useHistory)(),w=Object(j.d)((function(e){return e.auth.token})),P=Object(g.useState)(!1),x=Object(m.a)(P,2),z=x[0],F=x[1],M=Object(g.useState)(!1),k=Object(m.a)(M,2),W=k[0],V=k[1],J=Object(g.useState)(!0),H=Object(m.a)(J,2),Y=H[0],Q=H[1],K=Object(g.useState)(""),X=Object(m.a)(K,2),Z=X[0],ee=X[1],ae=Object(g.useState)(""),te=Object(m.a)(ae,2),ne=te[0],re=te[1],de=Object(g.useState)(0),le=Object(m.a)(de,2),ie=le[0],oe=le[1],ue=Object(g.useState)([]),se=Object(m.a)(ue,2),ce=se[0],me=se[1],be=Object(g.useState)([]),ge=Object(m.a)(be,2),ve=ge[0],_e=ge[1],pe=Object(g.useState)({data:{},loading:!0,error:""}),Ee=Object(m.a)(pe,2),fe=Ee[0],Oe=Ee[1],he=c.a.useForm(),je=Object(m.a)(he,1)[0],Ae=v.a.createElement("div",null,v.a.createElement(B.a,null),v.a.createElement("div",{style:{marginTop:8}}," Upload "));return Object(g.useEffect)((function(){V(!0),I.b.query({query:y.a.GET_CATEGORIES,context:{headers:{TENANTID:"100001",Authorization:w}}}).then((function(e){var a,t,n=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.getParentCategories)||void 0===t?void 0:t.categories;_e(n)})).catch((function(e){_e([]),console.log(e)})),I.b.query({query:y.a.GET_SINGLE_BRAND,variables:{query:{brand_id:parseInt(null===G||void 0===G?void 0:G.id)}},context:{headers:{TENANTID:"100001",Authorization:w}}}).then((function(e){var a,t,n,r,d,l,i,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.getSingleBrand;if(!o.status)return Object(L.a)();Oe({data:null===o||void 0===o?void 0:o.data,loading:!1,error:""});var u=[];null===o||void 0===o||null===(t=o.data)||void 0===t||t.categories.map((function(e){u.push(e.id)})),me(u),V(!1),Q(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.brand_status),re(Object(D.renderImage)(null===G||void 0===G?void 0:G.id,null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.image,"brand","",!0)),je.setFieldsValue({brand_name:null===o||void 0===o||null===(d=o.data)||void 0===d?void 0:d.brand_name,brand_description:null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.brand_description}),oe(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.brand_sort_order)})).catch((function(e){console.log(e),Oe({data:{},loading:!1,error:"Something went worng"})}))}),[]),v.a.createElement(v.a.Fragment,null,v.a.createElement(_.a,{title:"Manage Manufacture | Edit Manufacture ".concat((null===fe||void 0===fe||null===(e=fe.data)||void 0===e?void 0:e.brand_name)?"(".concat(null===fe||void 0===fe||null===(a=fe.data)||void 0===a?void 0:a.brand_name,")"):"")}),v.a.createElement(p.b,null,v.a.createElement(n.a,{gutter:25},v.a.createElement(r.a,{sm:24,xs:24},v.a.createElement(E.a,{headless:!0},W?v.a.createElement("div",{style:{textAlign:"center"}},v.a.createElement(u.a,{tip:"processing..."})):v.a.createElement(c.a,{style:{width:"100%"},form:je,name:"editBrand",onFinish:function(e){F(!0);var a=[];ce.forEach((function(e){a.push({cat_id:e})}));var t=Object(s.a)(Object(s.a)({},e),{},{brand_status:Y,brand_sort_order:ie,categories:a,brand_id:parseInt(null===G||void 0===G?void 0:G.id)});I.a.mutate({mutation:Z?y.a.BRAND_UPDATE:y.a.BRAND_UPDATE_WI,variables:Z?{data:t,file:Z}:{data:t},refetchQueries:[{query:y.a.GET_ALL_BRAND,context:{headers:{TENANTID:"100001",Authorization:w}}},["getAllBrands"]],context:{headers:{TENANTID:"100001",Authorization:w}}}).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.updateBrand;if(!(null===t||void 0===t?void 0:t.status))return A.b.error("Something Went wrong !!");setTimeout((function(){U.push("/admin/brand/list")}),1e3),A.b.success(null===t||void 0===t?void 0:t.message)})).catch((function(e){A.b.error("Something Went wrong !!")})).finally((function(){return F(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},v.a.createElement(c.a.Item,{rules:[{required:!0,max:30,message:"Please Enter Manufacture Name"}],name:"brand_name",label:"Name"},v.a.createElement(b.a,{placeholder:"Enter Manufacture Name",defaultValue:null===fe||void 0===fe||null===(t=fe.data)||void 0===t?void 0:t.brand_name})),v.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please Enter Manufacture Description"}],name:"brand_description",label:"Description"},v.a.createElement($,{rows:4,placeholder:"Enter Manufacture Description",defaultValue:null===fe||void 0===fe||null===(T=fe.data)||void 0===T?void 0:T.brand_description})),v.a.createElement(c.a.Item,{label:"Categories"},v.a.createElement(o.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Categories",defaultValue:ce,onChange:function(e){return me(e)},optionLabelProp:"label"},ve.map((function(e){return v.a.createElement(o.a.Option,{key:e.id,value:e.id,label:e.cat_name},v.a.createElement("div",{className:"demo-option-label-item"},e.cat_name))})))),v.a.createElement(c.a.Item,{label:"Sort Order"},v.a.createElement(i.a,{defaultValue:null===fe||void 0===fe||null===(R=fe.data)||void 0===R?void 0:R.brand_sort_order,onChange:oe,style:{width:"100%"}})),v.a.createElement(c.a.Item,{label:"Status"},v.a.createElement(l.a,{checked:Y,onChange:function(e){return Q(e)},checkedChildren:"ON",unCheckedChildren:"OFF"})),v.a.createElement(c.a.Item,{label:"Image"},v.a.createElement(d.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:function(e){var a="image/jpeg"===e.type;a||A.b.error("You can only upload JPG file!");var t=e.size/1024/1024<1;return t||A.b.error("Image must smaller than 1MB!"),a&&t&&(re(URL.createObjectURL(e)),ee(e)),!1},fileList:[]},ne?v.a.createElement(S.LazyLoadImage,{src:ne,onError:D.errorImageSrc,alt:"image",style:{width:"100%"}}):Ae)),v.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},v.a.createElement(c.a.Item,null,v.a.createElement(f.a,{loading:z,size:"default",htmlType:"submit",type:"primary",raised:!0},z?"Processing":"Save"),v.a.createElement(h.b,{to:"/admin/brand/list"},v.a.createElement(f.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}},650:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n,r,d,l,i,o,u,s,c=t(8),m=t(16),b={GET_ALL_BRAND:Object(m.d)(n||(n=Object(c.a)(["\n  query getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_description\n      brand_status\n      image\n      brand_sort_order\n      createdAt\n    }\n  }\n}"]))),GET_ALL_BRAND_WITH_CATEGORY:Object(m.d)(r||(r=Object(c.a)(["\nquery getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_status\n      brand_description\n      image\n      createdAt\n      updatedAt\n      categories {\n        id\n        cat_name\n        cat_slug\n        cat_status\n        subcategories {\n          id\n          cat_name\n          cat_slug\n          cat_status\n          subsubcategories {\n            id\n            cat_name\n            cat_slug\n            cat_status\n          }\n        }\n      }\n    }\n  }\n}\n\n"]))),GET_CATEGORIES:Object(m.d)(d||(d=Object(c.a)(["\n  query getParentCategories {\n    getParentCategories {\n      message\n      status\n      categories {\n        id\n        cat_name\n      }\n    }\n  }\n"]))),GET_SINGLE_BRAND:Object(m.d)(l||(l=Object(c.a)(["\n  query getSingleBrand($query: GetSingleBrandInput){\n    getSingleBrand(query: $query) {\n      message\n      status\n      data {\n        brand_name\n        brand_description\n        brand_status\n        brand_sort_order\n        image\n        categories {\n          id\n          cat_name\n        }\n      }\n    }\n  }\n"]))),BRAND_UPDATE:Object(m.d)(i||(i=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput, $file:Upload){\n    updateBrand(data:$data, file: $file){\n      message\n      status\n    }\n  }"]))),BRAND_UPDATE_WI:Object(m.d)(o||(o=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput){\n    updateBrand(data:$data){\n      message\n      status\n    }\n  }"]))),BRAND_ADD:Object(m.d)(u||(u=Object(c.a)(["\n    mutation createBrand($data: BrandCreateInput, $file:Upload) {\n      createBrand(data: $data, file:$file) {\n        message\n        status\n      }\n    }"]))),BRAND_ADD_WI:Object(m.d)(s||(s=Object(c.a)(["\n      mutation createBrand($data: BrandCreateInput) {\n        createBrand(data: $data) {\n          message\n          status\n        }\n     }"])))}}}]);