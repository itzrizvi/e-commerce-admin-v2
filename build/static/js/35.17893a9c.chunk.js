(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[35],{905:function(e,t,a){"use strict";a.r(t);a(126);var n,r=a(67),o=(a(127),a(45)),i=(a(188),a(94)),u=(a(109),a(31)),s=(a(187),a(110)),l=(a(268),a(152)),c=a(12),d=a(26),m=a(0),p=a.n(m),f=a(21),g=a.n(f),_=a(151),E=a(129),h=a(128),v=a(186),b=a(11),O=a(118),y=a.n(O),S=a(181),j=a(130),C=a(47),w=(a(50),a(36)),A=a(33),x=a(46),k=a(9),U=a(19),I={GET_ALL_ORDER:Object(U.d)(n||(n=Object(k.a)(["\n    query getOrderlistAdmin {\n      getOrderlistAdmin {\n        message\n        tenant_id\n        status\n        data {\n          id\n          total\n          sub_total\n          shipping_cost\n          discount_amount\n          tax_amount\n          tax_exempt\n          createdAt\n          updatedAt\n          customer {\n            id\n            first_name\n            last_name\n            email\n            email_verified\n            user_status\n            image\n          }\n          payment {\n            id\n            name\n            slug\n            description\n            status\n          }\n          orderStatus {\n            id\n            name\n            slug\n            description\n            status\n          }\n        }\n      }\n    }\n  "])))},D=a(293),T=a.n(D);t.default=function(){Object(A.b)("order");var e=Object(m.useState)({data:[],loading:!0,error:""}),t=Object(d.a)(e,2),a=t[0],n=t[1],f=Object(m.useState)([]),O=Object(d.a)(f,2),k=O[0],U=O[1],D=Object(m.useState)(!1),N=Object(d.a)(D,2),P=N[0],R=N[1],L=Object(x.d)((function(e){return e.auth.token}));Object(m.useEffect)((function(){n((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!0})})),C.j.query({query:I.GET_ALL_ORDER,context:{headers:{TENANTID:"100001",Authorization:L}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getOrderlistAdmin;if(a.status){var r=[];a.data.forEach((function(e){var t=e.customer,a=e.id,n=e.createdAt,o=e.orderStatus,i=e.payment,u=e.total,s={id:a,customer_name:t.first_name,customer_email:t.email,createdAt:n,orderStatus:o.name,payment_name:i.name,total:u};r.push(s)})),console.log(item_one),n((function(e){return Object(c.a)(Object(c.a)({},e),{},{data:r,error:""})}))}})).catch((function(e){n((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){n((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})}))}))}),[]),Object(m.useEffect)((function(){console.log(a)}),[a.data]);var G=[{title:"Order Id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id.toUpperCase()>t.id.toUpperCase()?1:-1}},{title:"Customer",dataIndex:"customer_name",key:"customer_name",width:150,sorter:function(e,t){return e.customer_name.toUpperCase()>t.customer.first_name.toUpperCase()?1:-1}},{title:"Customer Email",dataIndex:"customer_email",key:"customer_email",width:200,ellipsis:!0,sorter:function(e,t){return e.customer_email.toUpperCase()>t.customer.customer_email.toUpperCase()?1:-1}},{title:"Total Amount",dataIndex:"total",key:"total",width:120,render:function(e){return"$".concat(e)},sorter:function(e,t){return e.total.toUpperCase()>t.total.toUpperCase()?1:-1}},{title:"Payment Method",dataIndex:"payment_name",key:"payment_name",width:150,sorter:function(e,t){return e.payment_name.toUpperCase()>t.payment_name.toUpperCase()?1:-1}},{title:"Status",dataIndex:"orderStatus",key:"orderStatus",align:"center",width:100,sorter:function(e,t){return e.orderStatus===t.orderStatus?0:e.orderStatus?-1:1},filters:[{text:"Pending",value:"Pending"},{text:"Delivered",value:"Delivered"}],onFilter:function(e,t){return t.orderStatus===e},render:function(e,t){return p.a.createElement(l.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,t){var a={data:{customer_group_uuid:e.customer_group_uuid,customergroup_status:t}};C.j.mutate({mutation:C.h.UPDATE_CUSTOMER_GROUP,variables:a,context:{headers:{TENANTID:"100001",Authorization:L}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateCustomerGroup;if(!n.status)return w.b.error(n.message);w.b.success("".concat(e.customer_group_name," Group Status Updated successfully"))})).catch((function(e){return console.log("got error on updateStatus",e),w.b.error("Something Went wrong !!")}))}(t,e)}})}},{title:"Date",dataIndex:"createdAt",key:"createdAt",align:"center",width:150,render:function(e,t){return p.a.createElement("span",{className:"status-text"},p.a.createElement(T.a,{format:"DD MMMM YYYY"},parseInt(e)))}},{title:"View",dataIndex:"id",width:70,align:"right",key:"id",render:function(e,t){return p.a.createElement(p.a.Fragment,null,p.a.createElement(b.b,{to:"/admin/order/view?id=".concat(e)},p.a.createElement(y.a,{name:"eye",style:{margin:".5em 1em"}})))}},{title:"Action",dataIndex:"action",width:70,align:"right",key:"last_name",render:function(e,t){return p.a.createElement(p.a.Fragment,null,p.a.createElement(b.b,{to:"/admin/order/add?id=".concat(e)},p.a.createElement(y.a,{name:"edit",style:{margin:".5em 1em"}})))}}];return p.a.createElement(p.a.Fragment,null,p.a.createElement(_.a,{title:"List Orders",buttons:[p.a.createElement("div",{key:"1",className:"page-header-actions"},p.a.createElement(v.a,{size:"small",title:"Add Order",type:"primary"},p.a.createElement(g.a,{icon:"user-plus"})))]}),p.a.createElement(E.b,null,p.a.createElement(r.a,{gutter:25},p.a.createElement(o.a,{sm:24,xs:24},p.a.createElement(h.a,{headless:!0},a.loading?p.a.createElement("div",{className:"spin"},p.a.createElement(s.a,null)):p.a.createElement(p.a.Fragment,null,p.a.createElement(u.a,{placeholder:"Search Orders..",prefix:p.a.createElement(S.a,null),onChange:function(e){var t=e.target.value;R(t),U(a.data.filter((function(e){return((null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.customer_name)+(null===e||void 0===e?void 0:e.customer_email)+(null===e||void 0===e?void 0:e.orderStatus)+(null===e||void 0===e?void 0:e.payment_name)+(null===e||void 0===e?void 0:e.total)).toLowerCase().includes(t.toLowerCase())})))}}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("span",{className:"psp_list"},p.a.createElement(i.a,{className:"table-responsive",columns:G,rowKey:"g_s",size:"small",dataSource:P?k:a.data,rowClassName:function(e,t){return t%2==0?"":"altTableClass"},pagination:{defaultPageSize:j.a.ORDER_PER_PAGE,total:P?k.length:a.data.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);