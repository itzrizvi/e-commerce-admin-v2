(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[29],{616:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n,l,i,r,d,m,o,u,s,c,E,p,T=a(8),b=a(20),g={GET_EMAIL_HEADER_FOOTER_LIST:Object(b.d)(n||(n=Object(T.a)(["\n    query getEmailTempHeaderFooterList {\n      getEmailTempHeaderFooterList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_HEADER_FOOTER:Object(b.d)(l||(l=Object(T.a)(["\n    mutation addEmailTempHeaderFooter($data: AddEmailTempHFInput) {\n      addEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_HEADER_FOOTER:Object(b.d)(i||(i=Object(T.a)(["\n    query getSingleEmailTempHeaderFooter($query: GetSingleEmailHeaderFooterInput) {\n      getSingleEmailTempHeaderFooter(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),EMAIL_TEMPLATE_HEADER_FOOTER_UPDATE:Object(b.d)(r||(r=Object(T.a)(["\n    mutation updateEmailTempHeaderFooter($data: UpdateEmailTempHFInput) {\n      updateEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_LIST:Object(b.d)(d||(d=Object(T.a)(["\n    query getAllEmailTemplateList {\n      getAllEmailTemplateList {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_LIST:Object(b.d)(m||(m=Object(T.a)(["\n    mutation addEmailTemplateOnList($data: AddEmailTemplateListInput) {\n      addEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_LIST:Object(b.d)(o||(o=Object(T.a)(["\n    query getSingleEmailTemplateList($query: GetSingleEmailTemplateListInput) {\n      getSingleEmailTemplateList(query: $query) {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_LIST:Object(b.d)(u||(u=Object(T.a)(["\n    mutation updateEmailTemplateOnList($data: UpdateEmailTemplateListInput) {\n      updateEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),CREATE_EMAIL_TEMPLATE:Object(b.d)(s||(s=Object(T.a)(["\n    mutation createEmailTemplate($data: addEmailTemplateInput) {\n      createEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_CONTENT_LIST:Object(b.d)(c||(c=Object(T.a)(["\n    query getEmailTemplateList {\n      getEmailTemplateList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n          }\n          emailFooter {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_EMAIL_CONTENT_TEMPLATE:Object(b.d)(E||(E=Object(T.a)(["\n    query getSingleEmailTemplate($query: GetSingleEmailTemplateInput) {\n      getSingleEmailTemplate(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n          emailFooter {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_CONTENT:Object(b.d)(p||(p=Object(T.a)(["\n    mutation updateEmailTemplate($data: updateEmailTemplateInput) {\n      updateEmailTemplate(data: $data) {\n        message\n        status\n        tenant_id\n      }\n    }\n  "])))}},984:function(e,t,a){"use strict";a.r(t);a(99);var n=a(50),l=(a(100),a(40)),i=(a(155),a(37)),r=(a(79),a(17)),d=(a(121),a(68)),m=a(7),o=(a(154),a(21)),u=a(13),s=a(0),c=a.n(s),E=a(80),p=a(76),T=a(75),b=a(73),g=a(61),A=a(10),O=a(43),L=a(26),_=a(107),j=a(23),f=a(659),v=a.n(f),h=(a(660),a(616)),y=a(661),I=a.n(y),S=a(662),M=a.n(S);f.Quill.register("modules/imageResize",I.a),f.Quill.register("modules/htmlEditButton",M.a);var F={toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]],imageResize:{parchment:f.Quill.import("parchment"),modules:["Resize","DisplaySize"]},htmlEditButton:{okText:"Save",msg:'Edit HTML here, when you click "Save" the quill editor\'s contents will be replaced'}};t.default=function(){var e,t;Object(j.c)("email-template");var a=Object(g.useHistory)(),f=Object(O.d)((function(e){return e.auth.token})),y=Object(s.useState)(!1),I=Object(u.a)(y,2),S=I[0],M=I[1],P=Object(s.useState)(""),q=Object(u.a)(P,2),H=q[0],N=q[1],C=o.a.useForm(),$=Object(u.a)(C,1)[0],D=Object(s.useState)({data:[],loading:!0,error:""}),R=Object(u.a)(D,2),G=R[0],k=R[1],w=Object(s.useState)({data:[],loading:!0,error:""}),x=Object(u.a)(w,2),z=x[0],U=x[1];return Object(s.useEffect)((function(){_.b.query({query:h.a.GET_EMAIL_HEADER_FOOTER_LIST,context:{headers:{TENANTID:"100001",Authorization:f}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getEmailTempHeaderFooterList;k((function(e){var t;return Object(m.a)(Object(m.a)({},e),{},{data:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.filter((function(e){return"header"===e.type})),error:""})})),U((function(e){var t;return Object(m.a)(Object(m.a)({},e),{},{data:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.filter((function(e){return"footer"===e.type})),error:""})}))})).finally((function(){k((function(e){return Object(m.a)(Object(m.a)({},e),{},{loading:!1})})),U((function(e){return Object(m.a)(Object(m.a)({},e),{},{loading:!1})}))}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{title:"Add Email Content"}),c.a.createElement(p.b,null,c.a.createElement(n.a,{gutter:25},c.a.createElement(l.a,{sm:24,xs:24},c.a.createElement(T.a,{headless:!0},G.loading||z.loading?c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(d.a,{tip:"processing..."})):c.a.createElement(o.a,{style:{width:"100%"},form:$,name:"addEmailContent",onFinish:function(e){M(!0),_.b.mutate({mutation:h.a.CREATE_EMAIL_TEMPLATE,variables:{data:Object(m.a)(Object(m.a)({},e),{},{content:H})},refetchQueries:[{query:h.a.GET_EMAIL_TEMPLATE_CONTENT_LIST,context:{headers:{TENANTID:"100001",Authorization:f}},fetchPolicy:"network-only"},["getEmailTemplateList"]],context:{headers:{TENANTID:"100001",Authorization:f}}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createEmailTemplate;if(!(null===n||void 0===n?void 0:n.status))return L.b.error("Something Went wrong !!");setTimeout((function(){a.push("/admin/email/content/list")}),1e3),L.b.success(null===n||void 0===n?void 0:n.message)})).catch((function(e){L.b.error("Something Went wrong !!")})).finally((function(){return M(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},c.a.createElement(o.a.Item,{rules:[{required:!0,max:100,message:"Please Enter Email Content Name"}],name:"name",label:"Name"},c.a.createElement(r.a,{placeholder:"Enter Email Content Name"})),c.a.createElement(o.a.Item,{name:"header_id",label:"Header",rules:[{required:!0,message:"Please Select Header"}]},c.a.createElement(i.a,{style:{width:"100%"},placeholder:"Select Content Header",optionLabelProp:"label"},null===G||void 0===G||null===(e=G.data)||void 0===e?void 0:e.map((function(e){return c.a.createElement(i.a.Option,{value:e.id,label:e.name},c.a.createElement("div",{className:"demo-option-label-item"},e.name))})))),c.a.createElement(o.a.Item,{name:"footer_id",label:"Footer",rules:[{required:!0,message:"Please Select Footer"}]},c.a.createElement(i.a,{style:{width:"100%"},placeholder:"Select Content Footer",optionLabelProp:"label"},null===z||void 0===z||null===(t=z.data)||void 0===t?void 0:t.map((function(e){return c.a.createElement(i.a.Option,{value:e.id,label:e.name},c.a.createElement("div",{className:"demo-option-label-item"},e.name))})))),c.a.createElement(o.a.Item,{label:"Content",required:!0},c.a.createElement(v.a,{theme:"snow",modules:F,placeholder:"Content goes here...",onChange:N})),c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},c.a.createElement(o.a.Item,null,c.a.createElement(b.a,{loading:S,size:"default",htmlType:"submit",type:"primary",raised:!0},S?"Processing":"Save"),c.a.createElement(A.b,{to:"/admin/email/content/list"},c.a.createElement(b.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);