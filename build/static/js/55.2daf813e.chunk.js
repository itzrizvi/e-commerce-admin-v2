(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[55],{1038:function(e,t,a){"use strict";a.r(t);a(85);var r=a(32),n=(a(152),a(44)),l=(a(69),a(21)),i=(a(70),a(13)),u=(a(92),a(27)),c=(a(121),a(71)),s=a(6),o=a(54),d=a(9),m=(a(408),a(335)),f=a(0),E=a.n(f),b=a(28),v=a.n(b),y=a(142),h=a(102),g=a(101),p=a(663),S=a(219),O=a(73),j=a(30),_=a(36),D=a(12),w=a(153),x=a.n(w),k=a(24),V=a(249),C=a(136),I=a(22),A=a(116),N=a.n(A),Y=a(126),z=a.n(Y),F=m.a.RangePicker,M=!1;t.default=function(){var e;Object(I.g)("customer");var t=Object(_.d)((function(e){return e.auth.token})),a=Object(f.useState)(!1),m=Object(d.a)(a,2),b=m[0],w=m[1],A=Object(f.useState)(!1),Y=Object(d.a)(A,2),Q=Y[0],T=Y[1],R=Object(f.useState)(!0),L=Object(d.a)(R,2),P=L[0],q=L[1],G=Object(f.useState)(null),J=Object(d.a)(G,2),U=J[0],B=J[1],K=Object(f.useState)({data:[],loading:!1,error:""}),W=Object(d.a)(K,2),H=W[0],X=W[1],Z=Object(f.useState)((e={customerStatus:[],customerEntryStartDate:"",customerEntryEndDate:"",emailVerified:""},Object(o.a)(e,"customerStatus",""),Object(o.a)(e,"searchQuery",""),e)),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=[{title:"id",dataIndex:"id",key:"id",width:100,ellipsis:!0,sorter:function(e,t){return e.id>t.id?1:-1}},{title:"Image",dataIndex:"id",key:"id",width:90,render:function(e,t){return E.a.createElement(V.LazyLoadImage,{effect:"blur",width:"40",src:Object(C.renderImage)(t.id,t.image,"user","128x128",!0),onError:C.errorImageSrc,alt:t.id})}},{title:"Email",dataIndex:"email",key:"email",width:150,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"First Name",dataIndex:"first_name",width:150,key:"first_name",sorter:function(e,t){return e.first_name>t.first_name?1:-1}},{title:"Last Name",dataIndex:"last_name",width:150,key:"last_name",sorter:function(e,t){return e.last_name>t.last_name?1:-1}},{title:"Verified",dataIndex:"email_verified",key:"email_verified",width:120,align:"center",render:function(e){return e.toString()},sorter:function(e,t){return e.email_verified===t.email_verified?0:e.email_verified?-1:1},filters:[{text:"Verified",value:!0},{text:"Not Verified",value:!1}],onFilter:function(e,t){return t.email_verified===e}},{title:"Status",dataIndex:"user_status",key:"user_status",width:120,align:"center",render:function(e){return e.toString()},sorter:function(e,t){return e.user_status===t.user_status?0:e.user_status?-1:1},filters:[{text:"Enabled",value:!0},{text:"Disabled",value:!1}],onFilter:function(e,t){return t.user_status===e}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:150,align:"center",sorter:function(e,t){return e.createdAt===t.createdAt?0:e.createdAt?-1:1},render:function(e,t){return E.a.createElement("span",{className:"status-text"},E.a.createElement(N.a,{format:"DD-MMM-YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"id",key:"id",width:90,align:"center",render:function(e,t){return E.a.createElement(E.a.Fragment,null,E.a.createElement(D.b,{to:"/admin/customers/edit/".concat(e),style:{marginRight:"10px"}},E.a.createElement(x.a,{name:"edit",style:{color:"#5F63F2"}})),E.a.createElement(D.b,{to:"/admin/customers/view/".concat(e)},E.a.createElement(x.a,{name:"eye",style:{color:"rgb(46, 204, 113)"}})))}}],re=function(e,t){return[z()(e,"YYYY-MM-DD"),z()(t,"YYYY-MM-DD")]};return Object(f.useEffect)((function(){M&&(""!==ee.searchQuery||""!==ee.customerEntryStartDate||""!==ee.customerEntryEndDate||""!==ee.emailVerified||""!==ee.customerStatus?q(!1):q(!0)),M=!0}),[ee]),E.a.createElement(E.a.Fragment,null,E.a.createElement(y.a,{title:"Customers",buttons:[E.a.createElement("div",{key:"1",className:"page-header-actions"},E.a.createElement(O.a,{size:"small",type:"white",onClick:function(){return w((function(e){return!e}))}},E.a.createElement(v.a,{icon:"filter"}),"Filter"),E.a.createElement(O.a,{size:"small",type:"white",onClick:function(){B(null),q(!0),te({customerEntryStartDate:"",customerEntryEndDate:"",emailVerified:"",customerStatus:"",searchQuery:""})}},E.a.createElement(p.a,null),"Reset Filter"),E.a.createElement(D.b,{to:"/admin/customers/add"},E.a.createElement(O.a,{size:"small",title:"Add Customer",type:"primary"},E.a.createElement(v.a,{icon:"user-plus"}))))]}),E.a.createElement(h.b,null,E.a.createElement(l.a,{gutter:25},E.a.createElement(i.a,{sm:24,xs:24},E.a.createElement(g.a,{headless:!0},H.loading?E.a.createElement("div",{className:"spin"},E.a.createElement(c.a,null)):H.error?E.a.createElement("p",null,H.error):E.a.createElement(E.a.Fragment,null,E.a.createElement(l.a,{gutter:25},E.a.createElement(i.a,{span:18},E.a.createElement(u.a,{style:{height:"42px"},placeholder:"Search Customer...",prefix:E.a.createElement(S.a,null),value:null===ee||void 0===ee?void 0:ee.searchQuery,onChange:function(e){e.persist();var t=e.target.value;te((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchQuery:t})}))}})),E.a.createElement(i.a,{span:6},E.a.createElement(O.a,{style:{height:"42px"},size:"large",type:"primary",disabled:P,onClick:function(){var e,a,r,n,l;X((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0})})),j.j.query({query:j.i.GET_ALL_CUSTOMER,variables:{query:{searchQuery:null!==(e=ee.searchQuery)&&void 0!==e?e:"",customerStatus:null!==(a=ee.customerStatus)&&void 0!==a?a:"",emailVerified:null!==(r=ee.emailVerified)&&void 0!==r?r:"",customerEntryStartDate:null!==(n=ee.customerEntryStartDate)&&void 0!==n?n:"",customerEntryEndDate:null!==(l=ee.customerEntryEndDate)&&void 0!==l?l:""}},context:{headers:{TENANTID:"100001",Authorization:t}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCustomer;(null===a||void 0===a?void 0:a.status)&&X(a)})).catch((function(e){X((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){X((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})})),T(!Q)}))}},"Search"))),E.a.createElement("br",null),E.a.createElement("br",null),b&&E.a.createElement("div",{style:{marginBottom:"2.5em"}},E.a.createElement(l.a,{gutter:16},E.a.createElement(i.a,{span:8},"Customer Status: ",E.a.createElement("br",null),E.a.createElement(n.a,{style:{width:"100%"},placeholder:"Select customer status",size:"middle",mode:"single",value:"true"===(null===ee||void 0===ee?void 0:ee.customerStatus)||"false"!==(null===ee||void 0===ee?void 0:ee.customerStatus)&&"",onDeselect:function(e){return te((function(t){return Object(s.a)(Object(s.a)({},t),{},{customerStatus:t.customerStatus.filter((function(t){return t!==e}))})}))},onSelect:function(e){te((function(t){return Object(s.a)(Object(s.a)({},t),{},{customerStatus:e.toString()})}))},options:[{label:"Select customer status",value:"",hidden:!0},{label:"Enable",value:!0},{label:"Disable",value:!1}]})),E.a.createElement(i.a,{span:8},"Email Verified: ",E.a.createElement("br",null),E.a.createElement(n.a,{style:{width:"100%"},placeholder:"Select email status",size:"middle",mode:"single",value:"true"===(null===ee||void 0===ee?void 0:ee.emailVerified)||"false"!==(null===ee||void 0===ee?void 0:ee.emailVerified)&&"",onDeselect:function(e){return te((function(t){return Object(s.a)(Object(s.a)({},t),{},{emailVerified:t.emailVerified.filter((function(t){return t!==e}))})}))},onSelect:function(e){te((function(t){return Object(s.a)(Object(s.a)({},t),{},{emailVerified:e.toString()})}))},options:[{label:"Select email status",value:"",disabled:!0},{label:"Verified",value:!0},{label:"Not Verified",value:!1}]})),E.a.createElement(i.a,{span:8},"Date Added: ",E.a.createElement("br",null),E.a.createElement(F,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==U?U:"",onChange:function(e){e?(te((function(t){var a,r;return Object(s.a)(Object(s.a)({},t),{},{customerEntryStartDate:null!==(a=e[0]._d)&&void 0!==a?a:"",customerEntryEndDate:null!==(r=e[1]._d)&&void 0!==r?r:""})})),B(re(e[0],e[1]))):B(null)}})))),E.a.createElement("span",{className:"psp_list"},E.a.createElement(r.a,{className:"table-responsive",columns:ae,rowKey:"id",size:"small",dataSource:H.data?H.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:k.a.CUSTOMER_PER_PAGE,total:H.data?H.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);