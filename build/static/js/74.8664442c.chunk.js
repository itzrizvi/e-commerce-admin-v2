(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[74],{933:function(t,e,n){"use strict";n.r(e);n(200);var a=n(97),o=(n(201),n(74)),u=(n(150),n(77)),r=(n(148),n(45)),c=(n(166),n(98)),i=(n(288),n(69)),s=(n(314),n(218)),l=n(9),d=n(92),p=n(23),m=n(0),_=n.n(m),f=n(21),g=n.n(f),v=n(192),E=n(217),b=n(165),y=n(164),O=n(287),x=n(12),C=n(126),h=n.n(C),j=n(71),k=n(68),A=n.n(k),I=n(135),S=n(22),N=n(76);e.default=function(){Object(S.f)("coupon");var t=Object(m.useState)(!1),e=Object(p.a)(t,2),n=(e[0],e[1],Object(d.a)(Array(10).keys()).map((function(t){return{n:"Coupon".concat(t+1),c:t+1,t:"aaa",aa:102,mia:100,maa:1e3,sd:"18 oct 2022",ed:"18 oct 2022",status:!0,d:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Atque, architecto quod quidem fuga assumenda temporibus quam quae sapiente cupiditate voluptatum.",so:t+1}})),Object(m.useState)({data:[],isLoading:!0})),f=Object(p.a)(n,2),C=f[0],k=f[1],U=Object(m.useState)([]),w=Object(p.a)(U,2),D=w[0],L=w[1],T=Object(m.useState)(""),P=Object(p.a)(T,2),q=P[0],z=P[1];Object(m.useEffect)((function(){j.j.query({query:j.g.GET_ALL_COUPONS,context:{headers:{TENANTID:"100001",Authorization:A.a.get("psp_t")}}}).then((function(t){var e,n=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.getAllCoupons;if(!(null===n||void 0===n?void 0:n.status))return Object(N.a)();k((function(t){return Object(l.a)(Object(l.a)({},t),{},{data:null===n||void 0===n?void 0:n.data,error:""})}))})).finally((function(){k((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!1})}))}))}),[]);var F=[{title:"Name",dataIndex:"coupon_name",key:"coupon_name",sorter:function(t,e){return t.coupon_name.toUpperCase()>e.coupon_name.toUpperCase()?1:-1}},{title:"CODE",dataIndex:"coupon_code",key:"coupon_code",sorter:function(t,e){return t.coupon_code.toUpperCase()>e.coupon_code.toUpperCase()?1:-1}},{title:"Type",dataIndex:"coupon_type",key:"coupon_type",sorter:function(t,e){return t.coupon_type.toUpperCase()>e.coupon_type.toUpperCase()?1:-1}},{title:"Amount",dataIndex:"coupon_amount",key:"coupon_amount",align:"center",sorter:function(t,e){return t.coupon_amount===e.coupon_amount?0:t.coupon_amount?-1:1}},{title:"Min Amount",dataIndex:"coupon_minamount",key:"coupon_minamount",align:"center",sorter:function(t,e){return t.coupon_minamount===e.coupon_minamount?0:t.coupon_minamount?-1:1}},{title:"Max Amount",dataIndex:"coupon_maxamount",key:"coupon_maxamount",align:"center",sorter:function(t,e){return t.coupon_maxamount===e.coupon_maxamount?0:t.coupon_maxamount?-1:1}},{title:"Start Date",dataIndex:"coupon_startdate",key:"coupon_startdate",sorter:function(t,e){return t.coupon_startdate===e.coupon_startdate?0:t.coupon_startdate?-1:1},render:function(t,e){return new Date(parseInt(t)).toLocaleDateString()}},{title:"End Date",dataIndex:"coupon_enddate",key:"coupon_enddate",sorter:function(t,e){return t.coupon_enddate===e.coupon_enddate?0:t.coupon_enddate?-1:1},render:function(t,e){return new Date(parseInt(t)).toLocaleDateString()}},{title:"Sort Order",dataIndex:"coupon_sortorder",key:"coupon_sortorder",align:"center",sorter:function(t,e){return t.coupon_sortorder===e.coupon_sortorder?0:t.coupon_sortorder?-1:1}},{title:"Status",dataIndex:"coupon_status",key:"coupon_status",align:"center",sorter:function(t,e){return t.coupon_status===e.coupon_status?0:t.coupon_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(t,e){return e.attrgroup_status===t},render:function(t,e){return _.a.createElement(s.a,{defaultChecked:t,title:"Status",onChange:function(t){return G(e,t)}})}},{title:"Action",dataIndex:"id",key:"id",width:70,align:"right",render:function(t,e){return _.a.createElement(_.a.Fragment,null,_.a.createElement(x.b,{to:"/admin/products/add-coupon?id=".concat(t)},_.a.createElement(h.a,{name:"edit",style:{margin:".5em 1em"}})))}}],G=function(t,e){var n={data:{coupon_id:t.id,coupon_status:e}};console.log(n),j.j.mutate({mutation:j.f.UPDATE_COUPON,variables:n,context:{headers:{TENANTID:"100001",Authorization:A.a.get("psp_t")}}}).then((function(e){var n,a=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.updateCoupon;if(!(null===a||void 0===a?void 0:a.status))return Object(N.a)();i.b.success("".concat(t.coupon_name," status updated successfully"))}))};return _.a.createElement(_.a.Fragment,null,_.a.createElement(E.a,{title:"Coupons",buttons:[_.a.createElement("div",{key:"1",className:"page-header-actions"},_.a.createElement(x.b,{to:"/admin/products/add-coupon"},_.a.createElement(O.a,{size:"small",title:"Add Coupons",type:"primary"},_.a.createElement(g.a,{icon:"file-plus"}))))]}),_.a.createElement(b.b,null,_.a.createElement(a.a,{gutter:25},_.a.createElement(o.a,{sm:24,xs:24},_.a.createElement(y.a,{headless:!0},C.isLoading?_.a.createElement("div",{className:"spin"},_.a.createElement(c.a,null)):_.a.createElement(_.a.Fragment,null,_.a.createElement(r.a,{placeholder:"Search Coupons...",prefix:_.a.createElement(v.a,null),onChange:function(t){var e=t.target.value;z(e),L(C.data.filter((function(t){return((null===t||void 0===t?void 0:t.coupon_name)+t.coupon_description+t.coupon_code).toLowerCase().includes(e.toLowerCase())})))}}),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement("span",{className:"psp_list"},_.a.createElement(u.a,{scroll:{x:"max-content"},className:"table-responsive",size:"small",columns:F,rowKey:"id",dataSource:q?D:C.data,rowClassName:function(t,e){return e%2===0?"":"altTableClass"},pagination:{defaultPageSize:I.a.COUPON_GROUPS_PER_PAGE,total:q?D.length:C.data.length,showTotal:function(t,e){return"".concat(e[0],"-").concat(e[1]," of ").concat(t," items")}}}))))))))}}}]);