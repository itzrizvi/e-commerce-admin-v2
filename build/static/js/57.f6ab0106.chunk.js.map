{"version":3,"sources":["container/orders/ListOrder.js"],"names":["RangePicker","checkPoint","ListOrder","useState","data","loading","error","orders","setOrders","token","useSelector","state","auth","isFilter","setIsFilter","history","useHistory","search","useLocation","params","queryString","parse","searchButton","setSearchButton","paymentMethod","setPaymentMethod","orderStatus","setOrderStatus","orderUpdateAdmins","setOrderUpdateAdmins","searchDisable","setSearchDisable","dateRange","setChangeDateRange","productOption","setProductOption","updatedDateRange","setChangeUpdatedDateRange","isOrderStatusDisable","setIsOrderStatusDisable","paymentmethods","productIds","statuses","updatedby","searchQuery","orderEntryStartDate","orderEntryEndDate","orderUpdatedStartDate","orderUpdatedEndDate","filterParams","setFilterParams","useEffect","length","status","order_config","STOCK_CHECK","config_slug","slug","checkPermission","push","s","concat","filter","item","shift","id","status_check","columns","title","dataIndex","key","width","ellipsis","sorter","a","b","render","text","record","to","customer","last_name","first_name","email","align","val","total","style","borderRadius","padding","color","background","name","createdAt","className","format","parseInt","updatedAt","placement","margin","returnMomentDateRange","start","finish","moment","apolloClient","query","productSchema","GET_PAYMENT_METHOD_LIST","context","headers","TENANTID","process","then","res","getPaymentMethodListPublic","catch","err","finally","orderQuery","GET_ORDER_STATUS_LIST","Authorization","getOrderStatusList","GET_ORDER_UPDATE_ADMIN_LIST","getOrderUpdateAdminList","buttons","size","type","onClick","icon","gutter","sm","xs","headless","span","height","placeholder","prefix","value","onChange","e","persist","target","disabled","GET_ALL_ORDER","variables","fetchPolicy","getOrderlistAdmin","marginBottom","options","showSearch","allowClear","optionFilterProp","mode","onDeselect","prev","onSelect","onSearch","SEARCH_PRODUCT","getSearchedProducts","map","product","label","prod_name","prod_slug","prod_sku","prod_partnum","mfg_build_part_number","marginTop","picker","_d","rowKey","dataSource","rowClassName","index","pagination","defaultPageSize","config","ORDER_PER_PAGE","showTotal","range"],"mappings":"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","file":"static/js/57.f6ab0106.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Row, Col, Spin, Input, Table, Tooltip, Select, DatePicker } from 'antd';\nimport FeatherIcon from 'feather-icons-react';\nimport { PageHeader } from '../../components/page-headers/page-headers';\nimport { Main } from '../styled';\nimport { Cards } from '../../components/cards/frame/cards-frame';\nimport { Button } from '../../components/buttons/buttons';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport FontAwesome from 'react-fontawesome';\nimport { RetweetOutlined, SearchOutlined } from '@ant-design/icons';\nimport config from '../../config/config';\nimport apolloClient from '../../utility/apollo';\nimport { checkPermission } from '../../utility/utility';\nimport { useSelector } from 'react-redux';\nimport { orderQuery } from '../../apollo/order';\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport queryString from 'query-string';\nconst { RangePicker } = DatePicker;\nimport { productSchema } from '../../apollo/product';\nimport order_config from '../../config/order_config';\n\nlet checkPoint = false;\nconst ListOrder = () => {\n  const [orders, setOrders] = useState({ data: [], loading: false, error: '' });\n  const token = useSelector(state => state.auth.token);\n  const [isFilter, setIsFilter] = useState(false);\n  const history = useHistory();\n  const { search } = useLocation();\n  const params = queryString.parse(search);\n  const [searchButton, setSearchButton] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState({ data: [], loading: false, error: '' });\n  const [orderStatus, setOrderStatus] = useState({ data: [], loading: false, error: '' });\n  const [orderUpdateAdmins, setOrderUpdateAdmins] = useState({ data: [], loading: false, error: '' });\n  const [searchDisable, setSearchDisable] = useState(true);\n  const [dateRange, setChangeDateRange] = useState(null);\n  const [productOption, setProductOption] = useState([]);\n  const [updatedDateRange, setChangeUpdatedDateRange] = useState(null);\n  const [isOrderStatusDisable, setIsOrderStatusDisable] = useState(false);\n  const [filterParams, setFilterParams] = useState({\n    paymentmethods: [],\n    productIds: [],\n    statuses: [],\n    updatedby: [],\n    searchQuery: '',\n    orderEntryStartDate: '',\n    orderEntryEndDate: '',\n    orderUpdatedStartDate: '',\n    orderUpdatedEndDate: '',\n  });\n\n  const status_check = (config_slug, slug) => {\n    if (!checkPermission(slug)) return history.push('/admin/403');\n    setFilterParams(s => ({\n      ...s,\n      statuses: filterParams.statuses.concat(orderStatus?.data.filter(item => item.slug === config_slug).shift().id),\n    }));\n  };\n\n  useEffect(() => {\n    if (!params || orderStatus.data.length === 0) return;\n    if (params.status) {\n      setIsOrderStatusDisable(true);\n      switch (params.status) {\n        case order_config.STOCK_CHECK:\n          status_check(order_config.STOCK_CHECK, 'order-stock-check');\n          break;\n        default:\n          break;\n      }\n    } else {\n      if (!checkPermission('order')) return history.push('/admin/403');\n    }\n  }, [orderStatus.data.length]);\n\n  const searchOrderAdmin = () => {\n    setOrders(s => ({ ...s, loading: true }));\n    apolloClient\n      .query({\n        query: orderQuery.GET_ALL_ORDER,\n        variables: {\n          query: {\n            searchQuery: filterParams.searchQuery ?? '',\n            productIds: filterParams.productIds.length ? filterParams.productIds : null,\n            paymentmethods: filterParams.paymentmethods.length ? filterParams.paymentmethods : null,\n            statuses: filterParams.statuses.length ? filterParams.statuses : null,\n            updatedby: filterParams.updatedby.length ? filterParams.updatedby : null,\n            orderEntryStartDate: filterParams.orderEntryStartDate ?? '',\n            orderEntryEndDate: filterParams.orderEntryEndDate ?? '',\n            orderUpdatedStartDate: filterParams.orderUpdatedStartDate ?? '',\n            orderUpdatedEndDate: filterParams.orderUpdatedEndDate ?? '',\n          },\n        },\n        context: {\n          headers: {\n            TENANTID: process.env.REACT_APP_TENANTID,\n            Authorization: token,\n          },\n        },\n        fetchPolicy: 'network-only',\n      })\n      .then(res => {\n        const data = res?.data?.getOrderlistAdmin;\n        if (!data.status) return;\n        setOrders(data);\n      })\n      .catch(err => {\n        setOrders(s => ({ ...s, error: 'Something went Wrong.!! ' }));\n      })\n      .finally(() => {\n        setOrders(s => ({ ...s, loading: false }));\n        setSearchButton(!searchButton);\n      });\n  };\n\n  const columns = [\n    {\n      title: 'Order Id',\n      dataIndex: 'id',\n      key: 'id',\n      width: 100,\n      ellipsis: true,\n      sorter: (a, b) => (a.id > b.id ? 1 : -1),\n      render: (text, record) => <Link to={`/admin/order/view?id=${record.id}`}>{text}</Link>,\n    },\n    {\n      title: 'Customer',\n      dataIndex: ['customer', 'first_name'],\n      key: 'first_name',\n      width: 150,\n      render: (text, record) => `${text} ${record.customer.last_name}`,\n      sorter: (a, b) => (a.first_name > b.first_name ? 1 : -1),\n    },\n    {\n      title: 'Customer Email',\n      dataIndex: ['customer', 'email'],\n      key: 'email',\n      width: 200,\n      ellipsis: true,\n      sorter: (a, b) => (a.email > b.email ? 1 : -1),\n    },\n    {\n      title: 'Total Amount',\n      dataIndex: 'total',\n      key: 'total',\n      align: 'center',\n      width: 120,\n      render: val => `$${val}`,\n      sorter: (a, b) => (a.total > b.total ? 1 : -1),\n    },\n    {\n      title: 'Status',\n      dataIndex: ['orderStatus', 'name'],\n      key: 'name',\n      align: 'center',\n      width: 150,\n      render: val => (\n        <span\n          style={{\n            borderRadius: '4em',\n            padding: '.5em 1.5em',\n            color: val === 'Pending' ? '#feaf00' : val === 'Completed' ? '#2fb083' : '',\n            background: val === 'Pending' ? '#fef6e6' : val === 'Completed' ? '#ebf9f4' : '',\n          }}\n        >\n          {val}\n        </span>\n      ),\n      sorter: (a, b) => (a.name > b.name ? 1 : -1),\n    },\n    {\n      title: 'Payment Method',\n      dataIndex: ['paymentmethod', 'name'],\n      key: 'name',\n      width: 150,\n      sorter: (a, b) => (a.name > b.name ? 1 : -1),\n    },\n    // {\n    //   title: 'Shipping Type',\n    //   dataIndex: ['paymentmethod', 'name'],\n    //   key: 'name',\n    //   width: 150,\n    //   sorter: (a, b) => (a.name > b.name ? 1 : -1),\n    // },\n    {\n      title: 'Date Added',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n      align: 'center',\n      width: 150,\n      sorter: (a, b) => (a.createdAt === b.createdAt ? 0 : a.createdAt ? -1 : 1),\n      render: (text, record) => (\n        <span className={'status-text'}>{<Moment format=\"DD-MMM-YYYY\">{parseInt(text)}</Moment>}</span>\n      ),\n    },\n    {\n      title: 'Date Updated',\n      dataIndex: 'updatedAt',\n      key: 'updatedAt',\n      align: 'center',\n      width: 150,\n      sorter: (a, b) => (a.updatedAt === b.updatedAt ? 0 : a.updatedAt ? -1 : 1),\n      render: (text, record) => (\n        <span className={'status-text'}>{<Moment format=\"DD-MMM-YYYY\">{parseInt(text)}</Moment>}</span>\n      ),\n    },\n    {\n      title: 'Action',\n      dataIndex: 'action',\n      width: 140,\n      align: 'center',\n      key: 'createdAt',\n      render: (text, record) => (\n        <>\n          <Tooltip placement=\"topLeft\" title=\"Edit Order\" color=\"cyan\">\n            <Link to={`/admin/order/edit/${record.id}`}>\n              <FontAwesome name=\"edit\" style={{ margin: '.5em 1em', color: '#5F63F2' }} />\n            </Link>\n          </Tooltip>\n          <Tooltip placement=\"topLeft\" title=\"Make Purchase Order\" color=\"cyan\">\n            <Link to={`/admin/po/add?order_id=${record.id}`}>\n              <FontAwesome name=\"cart-plus\" style={{ margin: '.5em 1em', color: '#e67e22' }} />\n            </Link>\n          </Tooltip>\n        </>\n      ),\n    },\n  ];\n\n  const onDateRangeChange = dateRange => {\n    if (dateRange) {\n      setFilterParams(s => ({\n        ...s,\n        orderEntryStartDate: dateRange[0]._d ?? '',\n        orderEntryEndDate: dateRange[1]._d ?? '',\n      }));\n      setChangeDateRange(returnMomentDateRange(dateRange[0], dateRange[1]));\n    } else {\n      setChangeDateRange(null);\n    }\n  };\n\n  const onDateUpdatedRangeChange = updatedDateRange => {\n    if (updatedDateRange) {\n      setFilterParams(s => ({\n        ...s,\n        orderUpdatedStartDate: updatedDateRange[0]._d ?? '',\n        orderUpdatedEndDate: updatedDateRange[1]._d ?? '',\n      }));\n      setChangeUpdatedDateRange(returnMomentDateRange(updatedDateRange[0], updatedDateRange[1]));\n    } else {\n      setChangeUpdatedDateRange(null);\n    }\n  };\n\n  const returnMomentDateRange = (start, finish) => {\n    return [moment(start, 'YYYY-MM-DD'), moment(finish, 'YYYY-MM-DD')];\n  };\n\n  useEffect(() => {\n    setOrders(s => ({ ...s, loading: true }));\n    // Load Payment Mathod\n    apolloClient\n      .query({\n        query: productSchema.GET_PAYMENT_METHOD_LIST,\n        context: {\n          headers: {\n            TENANTID: process.env.REACT_APP_TENANTID,\n          },\n        },\n      })\n      .then(res => {\n        const data = res?.data?.getPaymentMethodListPublic;\n        if (!data.status) return;\n        setPaymentMethod(data);\n      })\n      .catch(err => {\n        setPaymentMethod(s => ({ ...s, error: 'Something went Wrong.!! ' }));\n      })\n      .finally(() => {\n        setPaymentMethod(s => ({ ...s, loading: false }));\n        setOrders(s => ({ ...s, loading: false }));\n      });\n\n    // Load Order Status\n    apolloClient\n      .query({\n        query: orderQuery.GET_ORDER_STATUS_LIST,\n        context: {\n          headers: {\n            TENANTID: process.env.REACT_APP_TENANTID,\n            Authorization: token,\n          },\n        },\n      })\n      .then(res => {\n        const data = res?.data?.getOrderStatusList;\n        if (!data.status) return;\n        setOrderStatus(data);\n      })\n      .catch(err => {\n        setOrderStatus(s => ({ ...s, error: 'Something went Wrong.!! ' }));\n      })\n      .finally(() => {\n        setOrderStatus(s => ({ ...s, loading: false }));\n        setOrders(s => ({ ...s, loading: false }));\n      });\n\n    // Load Order Update Admin List\n    apolloClient\n      .query({\n        query: orderQuery.GET_ORDER_UPDATE_ADMIN_LIST,\n        context: {\n          headers: {\n            TENANTID: process.env.REACT_APP_TENANTID,\n            Authorization: token,\n          },\n        },\n      })\n      .then(res => {\n        const data = res?.data?.getOrderUpdateAdminList;\n        if (!data.status) return;\n        setOrderUpdateAdmins(data);\n      })\n      .catch(err => {\n        setOrderUpdateAdmins(s => ({ ...s, error: 'Something went Wrong.!! ' }));\n      })\n      .finally(() => {\n        setOrderUpdateAdmins(s => ({ ...s, loading: false }));\n        setOrders(s => ({ ...s, loading: false }));\n      });\n\n    if (checkPoint) {\n      if (\n        filterParams.paymentmethods.length > 0 ||\n        filterParams.productIds.length > 0 ||\n        filterParams.statuses.length > 0 ||\n        filterParams.updatedby.length > 0 ||\n        filterParams.searchQuery !== '' ||\n        filterParams.orderEntryEndDate !== '' ||\n        filterParams.orderEntryStartDate !== '' ||\n        filterParams.orderUpdatedEndDate !== '' ||\n        filterParams.orderUpdatedStartDate !== ''\n      ) {\n        setSearchDisable(false);\n      } else {\n        setSearchDisable(true);\n      }\n    }\n    checkPoint = true;\n  }, [filterParams]);\n\n  return (\n    <>\n      <PageHeader\n        title=\"List Orders\"\n        buttons={[\n          <div key=\"1\" className=\"page-header-actions\">\n            <Button size=\"small\" type=\"white\" onClick={() => setIsFilter(state => !state)}>\n              <FeatherIcon icon=\"filter\" />\n              Filter\n            </Button>\n            <Button\n              size=\"small\"\n              type=\"white\"\n              onClick={() => {\n                setChangeDateRange(null);\n                setSearchDisable(true);\n                setChangeUpdatedDateRange(null);\n                setFilterParams({\n                  paymentmethods: [],\n                  productIds: [],\n                  statuses: [],\n                  updatedby: [],\n                  searchQuery: '',\n                  orderEntryStartDate: '',\n                  orderEntryEndDate: '',\n                  orderUpdatedStartDate: '',\n                  orderUpdatedEndDate: '',\n                });\n              }}\n            >\n              <RetweetOutlined />\n              Reset Filter\n            </Button>\n            <Link to=\"/admin/order/add\">\n              <Button size=\"small\" title=\"Add Order\" type=\"primary\">\n                <FeatherIcon icon=\"plus\" />\n              </Button>\n            </Link>\n          </div>,\n        ]}\n      />\n      <Main>\n        <Row gutter={25}>\n          <Col sm={24} xs={24}>\n            <Cards headless>\n              {orders.loading ? (\n                <div className=\"spin\">\n                  <Spin />\n                </div>\n              ) : orders.error ? (\n                <p>{orders.error}</p>\n              ) : (\n                <>\n                  <Row gutter={25}>\n                    <Col span={18}>\n                      <Input\n                        style={{ height: '42px' }}\n                        placeholder=\"Search Order By Customer...\"\n                        prefix={<SearchOutlined />}\n                        value={filterParams?.searchQuery}\n                        onChange={e => {\n                          e.persist();\n                          const value = e.target.value;\n                          setFilterParams(s => ({ ...s, searchQuery: value }));\n                        }}\n                      />\n                    </Col>\n                    <Col span={6}>\n                      <Button\n                        style={{ height: '42px' }}\n                        size=\"large\"\n                        type=\"primary\"\n                        disabled={searchDisable}\n                        onClick={searchOrderAdmin}\n                      >\n                        Search\n                      </Button>\n                    </Col>\n                  </Row>\n                  <br />\n                  <br />\n                  {isFilter && (\n                    <div style={{ marginBottom: '2.5em' }}>\n                      <Row gutter={16}>\n                        <Col span={8}>\n                          Product: <br />\n                          <Select\n                            style={{ width: '100%' }}\n                            placeholder=\"Select Product\"\n                            options={productOption}\n                            showSearch\n                            allowClear\n                            optionFilterProp=\"label\"\n                            size=\"middle\"\n                            mode=\"multiple\"\n                            value={filterParams?.productIds}\n                            onDeselect={val =>\n                              setFilterParams(prev => ({\n                                ...prev,\n                                productIds: prev.productIds.filter(item => item !== val),\n                              }))\n                            }\n                            onSelect={val => {\n                              setFilterParams(s => ({\n                                ...s,\n                                productIds: filterParams.productIds.concat(parseInt(val)),\n                              }));\n                            }}\n                            onSearch={val => {\n                              if (val.length > 3) {\n                                apolloClient\n                                  .query({\n                                    query: productSchema.SEARCH_PRODUCT,\n                                    variables: {\n                                      query: {\n                                        searchQuery: val,\n                                      },\n                                    },\n                                    context: {\n                                      headers: {\n                                        TENANTID: process.env.REACT_APP_TENANTID,\n                                      },\n                                    },\n                                  })\n                                  .then(res => {\n                                    const data = res?.data?.getSearchedProducts;\n                                    if (!data.status) return;\n                                    setProductOption(\n                                      data.data.map(product => ({\n                                        label:\n                                          product?.prod_name +\n                                          product?.prod_slug +\n                                          product?.prod_sku +\n                                          product?.prod_partnum +\n                                          product?.mfg_build_part_number,\n                                        value: product?.id,\n                                        ...product,\n                                      })),\n                                    );\n                                  });\n                              } else {\n                                setProductOption([]);\n                              }\n                            }}\n                          />\n                        </Col>\n                        <Col span={8}>\n                          Payment Method: <br />\n                          <Select\n                            style={{ width: '100%' }}\n                            placeholder={paymentMethod.loading ? 'Loading..' : 'Select Payment Method'}\n                            size=\"middle\"\n                            mode=\"multiple\"\n                            optionFilterProp=\"label\"\n                            value={filterParams?.paymentmethods}\n                            onDeselect={val =>\n                              setFilterParams(prev => ({\n                                ...prev,\n                                paymentmethods: prev.paymentmethods.filter(item => item !== val),\n                              }))\n                            }\n                            onSelect={val => {\n                              setFilterParams(s => ({\n                                ...s,\n                                paymentmethods: filterParams.paymentmethods.concat(parseInt(val)),\n                              }));\n                            }}\n                            options={paymentMethod?.data.map(item => ({\n                              label: item.name,\n                              value: item.id,\n                            }))}\n                          />\n                        </Col>\n                        <Col span={8}>\n                          Order Status : <br />\n                          <Select\n                            style={{ width: '100%' }}\n                            placeholder={orderStatus.loading ? 'Loading..' : 'Select Order Status'}\n                            disabled={isOrderStatusDisable}\n                            size=\"middle\"\n                            mode=\"multiple\"\n                            optionFilterProp=\"label\"\n                            value={filterParams?.statuses}\n                            onDeselect={val =>\n                              setFilterParams(prev => ({\n                                ...prev,\n                                statuses: prev.statuses.filter(item => item !== val),\n                              }))\n                            }\n                            onSelect={val => {\n                              setFilterParams(s => ({ ...s, statuses: filterParams.statuses.concat(parseInt(val)) }));\n                            }}\n                            options={orderStatus?.data.map(item => ({\n                              label: item.name,\n                              value: item.id,\n                            }))}\n                          />\n                        </Col>\n                      </Row>\n                      <Row gutter={16} style={{ marginTop: '.5em' }}>\n                        <Col span={8}>\n                          Updated By: <br />\n                          <Select\n                            style={{ width: '100%' }}\n                            size=\"middle\"\n                            mode=\"multiple\"\n                            value={filterParams?.updatedby}\n                            onDeselect={val =>\n                              setFilterParams(prev => ({\n                                ...prev,\n                                updatedby: prev.updatedby.filter(item => item !== val),\n                              }))\n                            }\n                            placeholder={orderUpdateAdmins.loading ? 'Loading...' : 'Select Admins..'}\n                            options={orderUpdateAdmins?.data?.map(item => ({\n                              label: item.first_name + ' ' + item.last_name,\n                              value: item.id,\n                            }))}\n                            onSelect={val => {\n                              setFilterParams(s => ({ ...s, updatedby: filterParams.updatedby.concat(parseInt(val)) }));\n                            }}\n                          />\n                        </Col>\n                        <Col span={8}>\n                          Date Added: <br />\n                          <RangePicker\n                            style={{ height: '40px', width: '100%' }}\n                            size=\"small\"\n                            allowClear={true}\n                            picker=\"date\"\n                            value={dateRange !== '' ? dateRange : ''}\n                            onChange={onDateRangeChange}\n                          />\n                        </Col>\n                        <Col span={8}>\n                          Date Updated: <br />\n                          <RangePicker\n                            style={{ height: '40px', width: '100%' }}\n                            size=\"small\"\n                            allowClear={true}\n                            picker=\"date\"\n                            value={updatedDateRange !== '' ? updatedDateRange : ''}\n                            onChange={onDateUpdatedRangeChange}\n                          />\n                        </Col>\n                      </Row>\n                    </div>\n                  )}\n\n                  <span className={'psp_list'}>\n                    <Table\n                      className=\"table-responsive\"\n                      columns={columns}\n                      rowKey={'id'}\n                      size=\"small\"\n                      dataSource={orders?.data ? orders.data : []}\n                      rowClassName={(record, index) => (index % 2 === 0 ? '' : 'altTableClass')}\n                      pagination={{\n                        defaultPageSize: config.ORDER_PER_PAGE,\n                        total: orders?.data ? orders.data.length : 0,\n                        showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items`,\n                      }}\n                    />\n                  </span>\n                </>\n              )}\n            </Cards>\n          </Col>\n        </Row>\n      </Main>\n    </>\n  );\n};\n\nexport default ListOrder;\n"],"sourceRoot":""}