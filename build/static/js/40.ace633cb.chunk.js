(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[40],{852:function(e,t,n){"use strict";n.r(t);n(129);var a=n(66),o=(n(130),n(41)),u=(n(279),n(131)),r=(n(142),n(67)),c=(n(196),n(119)),i=(n(254),n(146)),s=n(11),l=n(33),p=n(176),d=n(0),m=n.n(d),_=n(28),f=n.n(_),g=n(171),E=n(145),b=n(144),v=n(143),y=n(175),h=n(10),x=n(111),C=n.n(x),O=n(40),S=n(50),j=n.n(S),k=n(46),A=n(120);t.default=function(){Object(p.a)(Array(10).keys()).map((function(e){return{n:"Coupon".concat(e+1),c:e+1,t:"aaa",aa:102,mia:100,maa:1e3,sd:"18 oct 2022",ed:"18 oct 2022",status:!0,d:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Atque, architecto quod quidem fuga assumenda temporibus quam quae sapiente cupiditate voluptatum.",so:e+1}}));var e=Object(d.useState)({data:[],isLoading:!0}),t=Object(l.a)(e,2),n=t[0],_=t[1],x=Object(d.useState)([]),S=Object(l.a)(x,2),I=S[0],N=S[1],w=Object(d.useState)(""),U=Object(l.a)(w,2),D=U[0],L=U[1];Object(d.useEffect)((function(){O.j.query({query:O.g.GET_ALL_COUPONS,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCoupons;(null===n||void 0===n?void 0:n.status)&&_((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:null===n||void 0===n?void 0:n.data,error:""})}))})).catch((function(e){_((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){_((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})}))}))}),[]);var P=[{title:"Name",dataIndex:"coupon_name",key:"coupon_name",sorter:function(e,t){return e.coupon_name.toUpperCase()>t.coupon_name.toUpperCase()?1:-1}},{title:"CODE",dataIndex:"coupon_code",key:"coupon_code",sorter:function(e,t){return e.coupon_code.toUpperCase()>t.coupon_code.toUpperCase()?1:-1}},{title:"Type",dataIndex:"coupon_type",key:"coupon_type",sorter:function(e,t){return e.coupon_type.toUpperCase()>t.coupon_type.toUpperCase()?1:-1}},{title:"Amount",dataIndex:"coupon_amount",key:"coupon_amount",sorter:function(e,t){return e.coupon_amount===t.coupon_amount?0:e.coupon_amount?-1:1}},{title:m.a.createElement("p",null,"Minimum",m.a.createElement("br",null),"Amount"),dataIndex:"coupon_minamount",key:"coupon_minamount",sorter:function(e,t){return e.coupon_minamount===t.coupon_minamount?0:e.coupon_minamount?-1:1}},{title:m.a.createElement("p",null,"Maximum",m.a.createElement("br",null),"Amount"),dataIndex:"coupon_maxamount",key:"coupon_maxamount",sorter:function(e,t){return e.coupon_maxamount===t.coupon_maxamount?0:e.coupon_maxamount?-1:1}},{title:"Start Date",dataIndex:"coupon_startdate",key:"coupon_startdate",sorter:function(e,t){return e.coupon_startdate===t.coupon_startdate?0:e.coupon_startdate?-1:1},render:function(e,t){return new Date(parseInt(e)).toLocaleDateString()}},{title:"End Date",dataIndex:"coupon_enddate",key:"coupon_enddate",sorter:function(e,t){return e.coupon_enddate===t.coupon_enddate?0:e.coupon_enddate?-1:1},render:function(e,t){return new Date(parseInt(e)).toLocaleDateString()}},{title:"Sort Order",dataIndex:"coupon_sortorder",key:"coupon_sortorder",align:"center",sorter:function(e,t){return e.coupon_sortorder===t.coupon_sortorder?0:e.coupon_sortorder?-1:1}},{title:"Status",dataIndex:"coupon_status",key:"coupon_status",align:"center",sorter:function(e,t){return e.coupon_status===t.coupon_status?0:e.coupon_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.attrgroup_status===e},render:function(e,t){return m.a.createElement(i.a,{defaultChecked:e,title:"Status",onChange:function(e){return T(t,e)}})}},{title:"Action",dataIndex:"coupon_uuid",key:"coupon_uuid",width:70,align:"right",render:function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.b,{to:"/admin/products/add-coupon?id=".concat(e,"&name=").concat(t.coupon_name)},m.a.createElement(C.a,{name:"edit",style:{margin:".5em 1em"}})))}}],T=function(e,t){var n={data:{coupon_uuid:e.coupon_uuid,coupon_status:t}};console.log(n),O.j.mutate({mutation:O.f.UPDATE_COUPON,variables:n,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(t){var n,a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.updateCoupon;if(!a.status)return k.b.error(a.message);k.b.success("".concat(e.coupon_name," status updated successfully"))})).catch((function(e){return console.log("got error on status update",e),k.b.error("Something Went wrong !!")}))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(E.a,{title:"Coupons",buttons:[m.a.createElement("div",{key:"1",className:"page-header-actions"},m.a.createElement(h.b,{to:"/admin/products/add-coupon"},m.a.createElement(y.a,{size:"small",title:"Add Coupons",type:"primary"},m.a.createElement(f.a,{icon:"file-plus"}))))]}),m.a.createElement(b.b,null,m.a.createElement(a.a,{gutter:25},m.a.createElement(o.a,{sm:24,xs:24},m.a.createElement(v.a,{headless:!0},n.isLoading?m.a.createElement("div",{className:"spin"},m.a.createElement(c.a,null)):m.a.createElement(m.a.Fragment,null,m.a.createElement(r.a,{placeholder:"Search Coupons...",prefix:m.a.createElement(g.a,null),onChange:function(e){var t=e.target.value;L(t),N(n.data.filter((function(e){return((null===e||void 0===e?void 0:e.coupon_name)+e.coupon_description+e.coupon_code).toLowerCase().includes(t.toLowerCase())})))}}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("span",{className:"psp_list"},m.a.createElement(u.a,{scroll:{x:"max-content"},className:"table-responsive",columns:P,rowKey:"coupon_uuid",size:"small",dataSource:D?I:n.data,rowClassName:function(e,t){return t%2==0?"":"altTableClass"},pagination:{defaultPageSize:A.a.COUPON_GROUPS_PER_PAGE,total:D?I.length:n.data.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);