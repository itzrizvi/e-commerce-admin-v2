(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[50],{679:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n,r,i,u,l=a(8),s=a(17),o={GET_ALL_QUOTE:Object(s.d)(n||(n=Object(l.a)(["\n    query getSubmittedQuoteList {\n      getSubmittedQuoteList {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          updatedAt\n          quotedby {\n            id\n            email\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_QUOTE:Object(s.d)(r||(r=Object(l.a)(["\n    query getSingleSubmittedQuote($query: GetSingleSubmittedQuoteInput) {\n      getSingleSubmittedQuote(query: $query) {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          submittedquoteitems {\n            id\n            submittedquote_id\n            price\n            quantity\n            total_price\n            product {\n              id\n              prod_name\n              prod_slug\n              prod_sku\n              prod_partnum\n              createdAt\n            }\n            createdAt\n          }\n        }\n      }\n    }\n  "]))),REMOVE_QUOTE_ITEM:Object(s.d)(i||(i=Object(l.a)(["\n    mutation quoteItemDelete($data: QuoteItemDeleteInput) {\n      quoteItemDelete(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SUBMIT_QUOTE:Object(s.d)(u||(u=Object(l.a)(["\n    mutation updateSubmittedQuote($data: SubmittedQuoteUpdateInput) {\n      updateSubmittedQuote(data: $data) {\n        message\n        status\n      }\n    }\n  "])))}},969:function(e,t,a){"use strict";a.r(t);a(131);var n=a(69),r=(a(142),a(30)),i=(a(140),a(65)),u=(a(141),a(50)),l=(a(113),a(38)),s=(a(130),a(72)),o=(a(91),a(42)),c=a(7),d=a(14),m=(a(623),a(627)),p=a(0),b=a.n(p),g=a(190),E=a(118),f=a(99),O=a(97),v=a(12),h=a(101),j=a.n(h),_=a(100),S=a(679),y=a(45),w=a(213),I=a.n(w),D=a(19),Q=a.n(D),q=a(23),C=a(120),x=m.a.RangePicker;t.default=function(){Object(q.c)("quote");var e=Object(p.useState)({data:[],loading:!1,error:""}),t=Object(d.a)(e,2),a=t[0],m=t[1],h=Object(p.useState)([]),w=Object(d.a)(h,2),D=w[0],T=w[1],U=Object(p.useState)(!0),k=Object(d.a)(U,2),A=k[0],L=k[1],N=Object(y.d)((function(e){return e.auth.token})),z=Object(p.useState)(""),M=Object(d.a)(z,2),G=M[0],$=M[1],F=Object(p.useState)([]),P=Object(d.a)(F,2),Y=P[0],R=P[1],B=Object(p.useState)(!1),J=Object(d.a)(B,2),K=J[0],V=J[1],W=Object(p.useState)({status:[],startDate:"",endDate:""}),H=Object(d.a)(W,2),X=H[0],Z=H[1],ee=[{title:"ID",dataIndex:"id",key:"id",width:80,ellipsis:!0,sorter:function(e,t){return e.id.toUpperCase()>t.id.toUpperCase()?1:-1}},{title:"Email",dataIndex:["quotedby","email"],key:"email",width:150,ellipsis:!0,sorter:function(e,t){return e.email.toUpperCase()>t.email.toUpperCase()?1:-1}},{title:"Total",dataIndex:"grand_total",key:"grand_total",width:100,ellipsis:!0,sorter:function(e,t){return e.grand_total>t.grand_total?1:-1}},{title:"Status",dataIndex:"status",key:"status",align:"right",width:100,filters:[{text:"New",value:"new"},{text:"In Progress",value:"in_progress"},{text:"Save",value:"save"},{text:"Submitted",value:"submitted"}],onFilter:function(e,t){return t.status===e},sorter:function(e,t){return e.status-t.status},render:function(e){return e.toUpperCase()}},{title:"Note",dataIndex:"note",key:"note",width:250,ellipsis:!0,sorter:function(e,t){return e.note.toUpperCase()>t.note.toUpperCase()?1:-1}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:120,align:"center",render:function(e,t){return b.a.createElement("span",{className:"status-text"},b.a.createElement(I.a,{format:"DD MMMM YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"action",align:"right",key:"action",width:100,render:function(e,t){return b.a.createElement(b.a.Fragment,null,b.a.createElement(v.b,{to:"/admin/products/quote/edit/".concat(t.id),style:{margin:".5em"}},b.a.createElement(j.a,{name:"edit"})))}}];return Object(p.useEffect)((function(){if(!a.loading){var e=Y;if(G&&(e=e.filter((function(e){return(null===e||void 0===e?void 0:e.quotedby.email).toLowerCase().includes(G.toLowerCase())}))),X.startDate){var t=new Date(X.startDate).valueOf(),n=new Date(X.endDate).valueOf();e=e.filter((function(e){var a=parseInt(e.createdAt);return a>=t&&a<=n}))}X.status.length&&(e=e.filter((function(e){return X.status.includes(e.status)}))),T(e)}}),[K]),b.a.createElement(b.a.Fragment,null,b.a.createElement(E.a,{title:"Quote List",buttons:[b.a.createElement("div",{key:"1",className:"page-header-actions"},b.a.createElement(o.a,{size:"small",type:"white",onClick:function(){return L((function(e){return!e}))}},b.a.createElement(Q.a,{icon:"filter"}),"Filter"))]}),b.a.createElement(f.b,null,b.a.createElement(i.a,{gutter:25},b.a.createElement(u.a,{sm:24,xs:24},b.a.createElement(O.a,{headless:!0},a.loading?b.a.createElement("div",{className:"spin"},b.a.createElement(s.a,null)):a.error?b.a.createElement("p",null,a.error):b.a.createElement(b.a.Fragment,null,b.a.createElement(i.a,{gutter:25},b.a.createElement(u.a,{span:18},b.a.createElement(l.a,{placeholder:"Search Quotes...",prefix:b.a.createElement(g.a,null),onChange:function(e){var t=e.target.value;$(t)}})),b.a.createElement(u.a,{span:6},b.a.createElement(o.a,{size:"large",type:"primary",onClick:function(){m((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!0})})),_.b.query({query:S.a.GET_ALL_QUOTE,context:{headers:{TENANTID:"100001",Authorization:N}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSubmittedQuoteList;(null===a||void 0===a?void 0:a.status)&&R(null===a||void 0===a?void 0:a.data)})).catch((function(e){m((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){m((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})})),V(!K)}))}},"Search"))),b.a.createElement("br",null),A&&b.a.createElement("div",{style:{marginBottom:"2.5em"}},b.a.createElement(i.a,{gutter:16},b.a.createElement(u.a,{span:8},"Status: ",b.a.createElement("br",null),b.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select status",size:"middle",mode:"multiple",onChange:function(e){Z((function(t){return Object(c.a)(Object(c.a)({},t),{},{status:e})}))},options:["submitted","in_progress","new","received","save"].map((function(e){return{label:e.toUpperCase(),value:e}}))})),b.a.createElement(u.a,{span:8},"Date: ",b.a.createElement("br",null),b.a.createElement(x,{style:{height:"40px",width:"100%"},size:"middle",onChange:function(e){Z((function(t){var a,n;return Object(c.a)(Object(c.a)({},t),{},{startDate:e?null===(a=e[0])||void 0===a?void 0:a._d:null,endDate:e?null===(n=e[1])||void 0===n?void 0:n._d:null})}))}})))),b.a.createElement("span",{className:"psp_list"},b.a.createElement(n.a,{className:"table-responsive",columns:ee,pagination:{defaultPageSize:C.a.QUOTE_PER_PAGE,total:D.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}},rowKey:"id",size:"small",dataSource:D,rowClassName:function(e,t){return t%2===0?"":"altTableClass"}}))))))))}}}]);