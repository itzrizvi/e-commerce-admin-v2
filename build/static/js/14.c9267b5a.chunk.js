(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[14],{618:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n,r,i,u,l,o,d,c,s=a(11),m=a(20),p={GET_ALL_BRAND:Object(m.d)(n||(n=Object(s.a)(["\n  query getAllBrands {\n  getAllBrands {\n    message\n    tenant_id\n    status\n    data {\n      brand_uuid\n      brand_name\n      brand_slug\n      brand_description\n      brand_status\n      image\n      brand_sort_order\n      createdAt\n    }\n  }\n}"]))),GET_ALL_BRAND_WITH_CATEGORY:Object(m.d)(r||(r=Object(s.a)(["\nquery getAllBrands {\n  getAllBrands {\n    message\n    tenant_id\n    status\n    data {\n      brand_uuid\n      brand_name\n      brand_slug\n      brand_status\n      brand_description\n      image\n      createdAt\n      updatedAt\n      tenant_id\n      categories {\n        cat_id\n        cat_name\n        cat_slug\n        cat_status\n        subcategories {\n          cat_id\n          cat_name\n          cat_slug\n          cat_status\n          subsubcategories {\n            cat_id\n            cat_name\n            cat_slug\n            cat_status\n          }\n        }\n      }\n    }\n  }\n}\n\n"]))),GET_CATEGORIES:Object(m.d)(i||(i=Object(s.a)(["\n  query getParentCategories {\n    getParentCategories {\n      message\n      status\n      tenant_id\n      categories {\n        cat_id\n        cat_name\n      }\n    }\n  }\n"]))),GET_SINGLE_BRAND:Object(m.d)(u||(u=Object(s.a)(["\n  query getSingleBrand($brand_uuid : UUID!){\n    getSingleBrand(query: {brand_uuid: $brand_uuid}) {\n      message\n      tenant_id\n      status\n      data {\n        brand_name\n        brand_description\n        brand_status\n        brand_sort_order\n        image\n        categories {\n          cat_id\n          cat_name\n        }\n      }\n    }\n  }\n"]))),BRAND_UPDATE:Object(m.d)(l||(l=Object(s.a)(["\n  mutation updateBrand($data: UpdateBrandInput, $file:Upload){\n    updateBrand(data:$data, file: $file){\n      message\n      status\n    }\n  }"]))),BRAND_UPDATE_WI:Object(m.d)(o||(o=Object(s.a)(["\n  mutation updateBrand($data: UpdateBrandInput){\n    updateBrand(data:$data){\n      message\n      status\n    }\n  }"]))),BRAND_ADD:Object(m.d)(d||(d=Object(s.a)(["\n    mutation createBrand($data: BrandCreateInput, $file:Upload) {\n      createBrand(data: $data, file:$file) {\n        message\n        tenant_id\n        status\n      }\n    }"]))),BRAND_ADD_WI:Object(m.d)(c||(c=Object(s.a)(["\n      mutation createBrand($data: BrandCreateInput) {\n        createBrand(data: $data) {\n          message\n          tenant_id\n          status\n        }\n     }"])))}},732:function(e,t,a){e.exports={rte:"products_rte__1AkhM",rteEditor:"products_rteEditor__1JKAC",rteToolbar:"products_rteToolbar__3PEbt"}},902:function(e,t,a){"use strict";a.r(t);a(131);var n=a(67),r=(a(132),a(44)),i=(a(287),a(117)),u=(a(257),a(147)),l=(a(199),a(122)),o=a(92),d=a(12),c=(a(281),a(60)),s=a(33),m=(a(283),a(134)),p=(a(143),a(68)),_=a(0),b=a.n(_),g=a(26),v=a.n(g),f=a(146),E=a(145),y=a(144),h=a(178),O=a(678),j=a.n(O),P=a(732),I=a.n(P),T=(a(282),a(133)),S=(a(609),a(608)),k=(a(113),a(57)),A=a(179),w=a(906),D=a(39),L=a(42),x=a.n(L),N=m.a.Option,q=function(e){var t=e.index,a=e.setAttributesTableData,n=e.attribute_type,r=e.attribute_value,i=Object(_.useState)(""),u=Object(s.a)(i,2),l=u[0],o=u[1],c=Object(_.useState)([]),g=Object(s.a)(c,2),v=g[0],f=g[1],E=function(e){a((function(a){var n=a[t],r=Object(A.a)(a);return r[t]=Object(d.a)(Object(d.a)({},n),{},{attribute_value:e.target.value}),r}))};return b.a.createElement(b.a.Fragment,null,b.a.createElement(m.a,{style:{width:"10em",marginRight:"1em"},placeholder:"Select type",defaultValue:n||null,onChange:function(e){o(e),a((function(a){var n=a[t],r=Object(A.a)(a);return r[t]=Object(d.a)(Object(d.a)({},n),{},{attribute_type:e}),r}))}},b.a.createElement(N,{value:"text"},"Text"),b.a.createElement(N,{value:"link"},"Link"),b.a.createElement(N,{value:"file"},"File"),b.a.createElement(N,{value:"none"},"None")),"text"===l&&b.a.createElement(p.a,{placeholder:"Enter text",style:{width:"calc(100% - 12em)"},size:"middle",onBlur:E,defaultValue:r}),"link"===l&&b.a.createElement(p.a,{placeholder:"Enter Link",style:{width:"calc(100% - 12em)"},size:"middle",onBlur:E,defaultValue:r}),"file"===l&&b.a.createElement(S.a,{beforeUpload:function(e){return f([e]),!1},onRemove:function(){return f([])},fileList:v},b.a.createElement(k.a,{icon:b.a.createElement(w.a,null)},"Select File")))},B=function(e){var t=e.attributesTableData,a=e.setAttributesTableData,n=Object(_.useState)({data:[],isLoading:!0}),r=Object(s.a)(n,2),i=r[0],u=r[1],l=Object(_.useState)({}),o=Object(s.a)(l,2),c=o[0],p=o[1];Object(_.useEffect)((function(){D.j.query({query:D.c.GET_ALL_ATTR_GROUPS_FOR_ADD_PROD,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttrGroups;(null===a||void 0===a?void 0:a.status)&&u((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){u((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){u((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var g=[{title:"Attribute Group",dataIndex:"attr_group_uuid",key:"attr_group_uuid",width:200,render:function(e,t,n){return b.a.createElement(m.a,{style:{width:"100%"},placeholder:i.isLoading?"Loading...":"Select Group...",defaultValue:e||null,options:i.data.map((function(e){return{label:e.attr_group_name,value:e.attr_group_uuid,attributes:e.attributes}})),onSelect:function(e,t){return function(e,t,n){p(t),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{attr_group_uuid:e}),r}))}(e,t,n)}})}},{title:"Attribute",dataIndex:"attribute_uuid",key:"attribute_uuid",width:200,render:function(e,t,n){var r;return b.a.createElement(m.a,{style:{width:"100%"},disabled:!c.value,defaultValue:e||null,placeholder:i.isLoading?"Loading...":"Select Group...",options:null===c||void 0===c||null===(r=c.attributes)||void 0===r?void 0:r.map((function(e){return{label:e.attribute_name,value:e.attribute_uuid}})),onSelect:function(e,t){return function(e,t,n){a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{attribute_uuid:e}),r}))}(e,0,n)}})}},{title:"Values",dataIndex:"value",key:"value",render:function(e,t,n){return b.a.createElement(q,{index:n,setAttributesTableData:a,attribute_type:t.attribute_type,attribute_value:t.attribute_value})}},{title:"Action",dataIndex:"action",key:"action",width:90,align:"right",render:function(e,t){return b.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return e=t.id,void a((function(t){return t.filter((function(t){return t.id!==e}))}));var e}},b.a.createElement(v.a,{icon:"minus",size:15}))}}];return b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{columns:g,dataSource:t,pagination:!1,rowKey:"id"}),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px",marginRight:"1em"}},b.a.createElement(k.a,{title:"Add Banner",htmlType:"button",type:"primary",onClick:function(){var e={id:(new Date).getTime(),attr_group_uuid:"",attribute_uuid:"",attribute_type:"",attribute_value:""};a((function(t){return[].concat(Object(A.a)(t),[e])})),console.log(t)}},b.a.createElement(v.a,{icon:"plus",size:15}))))},C=(a(613),a(616)),R=function(e){var t=e.discount,a=e.setDiscount,n=Object(_.useState)({data:[],isLoading:!0}),r=Object(s.a)(n,2),i=r[0],u=r[1];Object(_.useEffect)((function(){D.j.query({query:D.i.GET_ALL_CUSTOMER_GROUPS,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCustomerGroups;(null===a||void 0===a?void 0:a.status)&&u((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){u((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){u((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var l=[{title:"Customer Group",dataIndex:"customer_group_uuid",key:"customer_group_uuid",render:function(e,t,n){var r;return b.a.createElement(m.a,{style:{width:"150px"},placeholder:i.isLoading?"Loading..":"customer group",defaultValue:e,onSelect:function(e){a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{customer_group_uuid:e}),console.log(r),r}))}},null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map((function(e){return b.a.createElement(m.a.Option,{key:e.customer_group_uuid,value:e.customer_group_uuid},e.customer_group_name)})))}},{title:"Quantity",dataIndex:"discount_quantity",key:"discount_quantity",width:100,render:function(e,t,n){return b.a.createElement(p.a,{defaultValue:e,type:"number",placeholder:"Quantity",style:{width:"100px"},onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_quantity:e.target.value}),console.log(r),r}))}})}},{title:"Priority",dataIndex:"discount_priority",key:"discount_priority",width:100,render:function(e,t,n){return b.a.createElement(p.a,{type:"number",placeholder:"Priority",style:{width:"100px"},defaultValue:e,onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_priority:e.target.value}),console.log(r),r}))}})}},{title:"Price",dataIndex:"discount_price",key:"discount_price",width:100,render:function(e,t,n){return b.a.createElement(p.a,{type:"number",placeholder:"Price",style:{width:"100px"},defaultValue:e,onBlur:function(e){console.log(e.target.value),a((function(t){var a=t[n],r=Object(A.a)(t);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_price:e.target.value}),console.log(r),r}))}})}},{title:"Date Start",dataIndex:"title",key:"title",render:function(e,t,n){return b.a.createElement(C.a,{onChange:function(e){var t=new Date(e._d).toGMTString();console.log(t),a((function(e){var a=e[n],r=Object(A.a)(e);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_startdate:t}),console.log(r),r}))}})}},{title:"Date End",dataIndex:"title",key:"title",render:function(e,t,n){return b.a.createElement(C.a,{onChange:function(e){var t=new Date(e._d).toGMTString();console.log(t),a((function(e){var a=e[n],r=Object(A.a)(e);return r[n]=Object(d.a)(Object(d.a)({},a),{},{discount_enddate:t}),console.log(r),r}))}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return b.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){return o(t.id)}},b.a.createElement(v.a,{icon:"minus"}))}}],o=function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))};return b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{className:"table-responsive",columns:l,pagination:!1,rowKey:"id",size:"small",dataSource:t}),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},b.a.createElement(k.a,{title:"Add Banner",htmlType:"button",type:"primary",onClick:function(){var e={id:(new Date).getTime(),customer_group_uuid:"",discount_quantity:"",discount_priority:"",discount_price:"",discount_startdate:"",discount_enddate:""};a((function(t){return[].concat(Object(A.a)(t),[e])}))},style:{marginRight:".5em"}},b.a.createElement(v.a,{icon:"plus"}))))},G=a(735),U=a.n(G),V=a(50),M=a(907),F=function(e){var t=e.featuresImage,a=e.setFeaturesImage,n=e.gallaryImages,r=e.setGallaryImages,i=e.singleProdUid,u=e.setIsLoading;return b.a.createElement(b.a.Fragment,null,b.a.createElement(c.a.Item,{label:"Features Image"},b.a.createElement(S.a,{multiple:!0,listType:"picture-card",beforeUpload:function(e){var t="image/jpeg"===e.type;if(!t)return V.b.error("You can only upload JPG file!");var n=e.size/1024/1024<2;return n?(t&&n&&(a({file:e,thumbnail:URL.createObjectURL(e)}),i&&(u(!0),D.a.mutate({mutation:D.k.UPDATE_THUMBNAIL,variables:{data:{prod_uuid:i,prod_thumbnail:e}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateThumbnail;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("update thumbnail err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){})))),!1):V.b.error("Image must smaller than 2MB!")},onPreview:function(){return console.log()},onRemove:function(){return a({})},fileList:t.thumbnail?[{file:t.file,url:t.thumbnail}]:[]},!t.thumbnail&&"+ Upload")),b.a.createElement(c.a.Item,{label:"Gallery Image"},b.a.createElement(U.a,{multiple:!0,listType:"picture-card",beforeUpload:function(e){return console.log("file type:\n",e.type),"image/jpeg"===e.type?e.size/1024/1024<2?(r((function(t){return[].concat(Object(A.a)(t),[{file:e,url:URL.createObjectURL(e),uid:e.uid}])})),i&&(u(!0),D.a.mutate({mutation:D.k.UPLOAD_GALLERY_IMAGE,variables:{data:{prod_uuid:i,gallery_img:e}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.uploadGalleryImage;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("update gal img err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){}))),!1):V.b.error("Image must smaller than 2MB!"):V.b.error("You can only upload JPG file!")},fileList:n,onRemove:function(e){r((function(t){return t.filter((function(t){return t.uid!==e.uid}))})),i&&(u(!0),D.a.mutate({mutation:D.k.DELETE_GALLERY_IMAGE,variables:{data:{prod_uuid:i,prod_gallery_uuid:e.prod_gallery_uuid}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.deleteGalleryImage;if(!a.status)return V.b.error(a.message);V.b.success(a.message)})).catch((function(e){return console.log("del gal img err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){})))}},b.a.createElement("p",{className:"ant-upload-drag-icon"},b.a.createElement(M.a,null)),b.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"))))},z=a(284),W=a(618),$=function(e){var t,a=e.products,n=(e.setProducts,e.selectedPartsOfProducts),r=e.setSelectedPartsOfProducts,i=(e.partOfProductQuantities,e.setPartOfProductQuantities),u=[{title:"Name",dataIndex:"label",key:"label"},{title:"SKU",dataIndex:"sku",key:"sku"},{title:"Quantity",dataIndex:"q",key:"q",width:120,render:function(e,t){return b.a.createElement(p.a,{defaultValue:t.quantity||"1",type:"number",placeholder:"Quantity",onBlur:function(e){i((function(a){var n=Object(d.a)({},a);return n[t.uid]=e.target.value,console.log(n),n}))}})}},{title:"Action",dataIndex:"action",key:"action",width:100,render:function(e,t,a){return b.a.createElement(k.a,{size:"",title:"Remove",type:"danger",onClick:function(){var e=Object(A.a)(n);e.splice(a,1),r(e)}},b.a.createElement(v.a,{icon:"minus"}))}}];return b.a.createElement("div",null,b.a.createElement(c.a.Item,{label:"Products"},b.a.createElement(m.a,{style:{marginBottom:"2em"},mode:"multiple",value:n,placeholder:a.isLoading?"Loading..":"Select Product..",optionFilterProp:"label",options:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.map((function(e){return{label:e.prod_name,value:e.prod_uuid,uid:e.prod_uuid,key:e.prod_uuid,name:e.prod_name,sku:e.prod_sku}})),onChange:function(e,t){r(t)}}),b.a.createElement(T.a,{dataSource:n,columns:u,pagination:!1,rowKey:"uid"})))},K=a(34),Q=a(54),H=a(10),Y=a(200),J=a.n(Y),X=["dimension_class","prod_regular_price","prod_sale_price","prod_weight","prod_weight_class"],Z=["id"],ee=p.a.TextArea,te=m.a.Option;t.default=function(){var e,t,a,g,v,O,P,T,S,k,A,w,L,N,q,C,G,U,M,Y,ae,ne,re,ie,ue;Object(K.b)("product");var le=c.a.useForm(),oe=Object(s.a)(le,1)[0],de=Object(_.useState)(!1),ce=Object(s.a)(de,2),se=ce[0],me=ce[1],pe=Object(Q.useHistory)(),_e=Object(Q.useLocation)().search,be=J.a.parse(_e),ge=Object(_.useState)({data:{},isLoading:!0}),ve=Object(s.a)(ge,2),fe=ve[0],Ee=ve[1];Object(_.useEffect)((function(){be.id&&z.b.query({query:D.l.GET_SINGLE_PRODUCT,variables:{query:{prod_uuid:be.id}},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleProduct;if(!a.status)return V.b.error("Try reload..!");Ee({data:null===a||void 0===a?void 0:a.data,isLoading:!1}),lt((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.discount_type)||void 0===n?void 0:n.map((function(e){return{id:(new Date).getTime(),customer_group_uuid:e.discount_type_uuid,discount_quantity:e.discount_quantity,discount_priority:e.discount_priority,discount_price:e.discount_price,discount_startdate:e.discount_startdate,discount_enddate:e.discount_enddate}}))})),at((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.prod_attributes)||void 0===n?void 0:n.map((function(e){var t,a,n;return{id:(new Date).getTime(),attr_group_uuid:null===(t=e.attribute_data)||void 0===t||null===(a=t.attribute_group)||void 0===a?void 0:a.attr_group_uuid,attribute_uuid:null===e||void 0===e||null===(n=e.attribute_data)||void 0===n?void 0:n.attribute_uuid,attribute_type:e.attribute_type,attribute_value:e.attribute_value}}))})),bt((function(e){var t,n;return null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.part_of_products)||void 0===n?void 0:n.map((function(e){return{label:e.part_product.prod_name,value:e.part_product.prod_uuid,uid:e.part_product.prod_uuid,key:e.part_product.prod_uuid,name:e.part_product.prod_name,sku:e.part_product.prod_sku,quantity:e.prod_quantity}}))})),jt((function(e){var t,n;return{file:"",thumbnail:"https://api.primeserverparts.com/images/product/image/thumbnail/".concat(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.prod_uuid,"/128x128_").concat(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.prod_uuid,".jpg")}})),St(null===a||void 0===a?void 0:a.data.gallery.map((function(e){var t;return{file:"",url:"https://api.primeserverparts.com/images/product/image/gallery/".concat(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.prod_uuid,"/128x128_").concat(e.prod_image),prod_gallery_uuid:e.prod_gallery_uuid}})))})).catch((function(e){console.log("error on loading porduct,\n",e)}))}),[]);var ye=Object(_.useState)(j.a.createEmptyValue()),he=Object(s.a)(ye,2),Oe=he[0],je=he[1],Pe=Object(_.useState)(""),Ie=Object(s.a)(Pe,2),Te=Ie[0],Se=Ie[1],ke=Object(_.useState)(!0),Ae=Object(s.a)(ke,2),we=Ae[0],De=Ae[1],Le=Object(_.useState)(!0),xe=Object(s.a)(Le,2),Ne=xe[0],qe=xe[1],Be=Object(_.useState)({data:[],loading:!0,error:""}),Ce=Object(s.a)(Be,2),Re=Ce[0],Ge=Ce[1],Ue=Object(_.useState)([]),Ve=Object(s.a)(Ue,2),Me=Ve[0],Fe=Ve[1],ze=Object(_.useState)([]),We=Object(s.a)(ze,2),$e=We[0],Ke=We[1];Object(_.useEffect)((function(){be.id&&fe.isLoading||z.b.query({query:W.a.GET_ALL_BRAND_WITH_CATEGORY,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllBrands;if(Ge((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})})),be.id){var n,r,i=null===fe||void 0===fe||null===(n=fe.data.brand)||void 0===n?void 0:n.brand_uuid,u=null===a||void 0===a?void 0:a.data.find((function(e){return e.brand_uuid===i})),l=[];null===u||void 0===u||null===(r=u.categories)||void 0===r||r.forEach((function(e){var t=e.cat_name;l.push({cat_name:t,cat_id:e.cat_id,cat_status:e.cat_status}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;l.push({cat_name:"".concat(t," > ").concat(a),cat_id:e.cat_id,cat_status:e.cat_status}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var n=e.cat_name;l.push({cat_name:"".concat(t," > ").concat(a," > ").concat(n),cat_id:e.cat_id,cat_status:e.cat_status})}))}))})),Fe(l)}})).catch((function(e){Ge((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Ge((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})}))}))}),[fe]);var Qe=Object(_.useState)({}),He=Object(s.a)(Qe,2),Ye=He[0],Je=He[1],Xe=[{id:(new Date).getTime(),attr_group_uuid:"",attribute_uuid:"",attribute_type:"",attribute_value:""}],Ze=Object(_.useState)(Xe),et=Object(s.a)(Ze,2),tt=et[0],at=et[1],nt=[{id:(new Date).getTime(),customer_group_uuid:"",discount_quantity:"",discount_priority:"",discount_price:"",discount_startdate:"",discount_enddate:""}],rt=Object(_.useState)(nt),it=Object(s.a)(rt,2),ut=it[0],lt=it[1],ot=Object(_.useState)({data:[],isLoading:!0}),dt=Object(s.a)(ot,2),ct=dt[0],st=dt[1],mt=Object(_.useState)([]),pt=Object(s.a)(mt,2),_t=pt[0],bt=pt[1],gt=Object(_.useState)({}),vt=Object(s.a)(gt,2),ft=vt[0],Et=vt[1];Object(_.useEffect)((function(){z.b.query({query:D.l.GET_PRODUCT_LIST_FOR_ADD_MINIMAL,context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getProductList;(null===a||void 0===a?void 0:a.status)&&st((function(e){return Object(d.a)(Object(d.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){st((function(e){return Object(d.a)(Object(d.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){st((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1})}))}))}),[]);var yt=Object(_.useState)({}),ht=Object(s.a)(yt,2),Ot=ht[0],jt=ht[1],Pt=Object(_.useState)([]),It=Object(s.a)(Pt,2),Tt=It[0],St=It[1];return b.a.createElement(b.a.Fragment,null,b.a.createElement(f.a,{title:be.id?"Manage Product | Edit Product (".concat(be.name,")"):"Add Product"}),b.a.createElement(E.b,null,b.a.createElement(n.a,{gutter:25},b.a.createElement(r.a,{sm:24,xs:24},b.a.createElement(y.a,{headless:!0},be.id&&fe.isLoading?b.a.createElement("div",{div:!0,className:"spin"},b.a.createElement(l.a,null)):b.a.createElement(c.a,{style:{width:"100%"},form:oe,name:"addRole",onFinish:function(e){var t=e.dimension_class,a=e.prod_regular_price,n=e.prod_sale_price,r=e.prod_weight,i=e.prod_weight_class,u=Object(o.a)(e,X),l=!0,c=!0,s=tt.map((function(e){e.id;var t=Object(o.a)(e,Z);return"none"===t.attribute_type&&(t.attribute_value="none"),t.attr_group_uuid||t.attribute_type||t.attribute_value||(l=!1),t.attr_group_uuid&&t.attribute_type&&t.attribute_value||(c=!1),Object(d.a)({},t)}));if(!c&&l)return V.b.warning("Please fill all Attribute field correctly");var m=!0,p=!0,_=ut.map((function(e){e.id;var t=e.customer_group_uuid,a=e.discount_quantity,n=e.discount_priority,r=e.discount_price,i=e.discount_startdate,u=e.discount_enddate;return t||a||n||r||i||u||(m=!1),t&&a&&n&&r&&i&&u||(p=!1),{customer_group_uuid:t,discount_quantity:a,discount_priority:n,discount_price:r,discount_startdate:i,discount_enddate:u}}));if(!p&&m)return V.b.warning("Please fill all Discount field correctly");var b=$e.map((function(e){return e.uid})),g=_t.map((function(e){return{prod_uuid:e.uid,prod_quantity:ft[e.uid]?parseInt(ft[e.uid]):1}})),v=Ot.file,f=Tt.map((function(e){return e.file})),E=Object(d.a)(Object(d.a)({},u),{},{prod_long_desc:Te,related_product:b,prod_status:we,partof_product:g,taxable:Ne,prod_thumbnail:v,prod_gallery:f});a&&(E.prod_regular_price=parseFloat(a)),n&&(E.prod_sale_price=parseFloat(n)),l&&(E.product_attributes=s),m&&(E.discount_type=_),r&&(E.prod_weight=r,E.prod_weight_class=i);var y=Ye.height,h=Ye.length,O=Ye.width;if(y||h||O){var j={dimension_class:t};y&&(j.height=y),h&&(j.length=h),O&&(j.width=O),E.dimensions=j}return console.log("values:\n",e),console.log("data:\n",E),E.prod_long_desc&&E.prod_short_desc?E.prod_sku?E.prod_partnum?E.brand_uuid?E.prod_category?E.prod_outofstock_status?E.prod_regular_price?v?void(be.id||(me(!0),D.a.mutate({mutation:D.k.ADD_PRODUCT,variables:{data:E},context:{headers:{TENANTID:"100001",Authorization:x.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.addProduct;if(!a.status)return V.b.error(a.message);pe.push("/admin/products/list"),window.location.reload(),V.b.success(a.message)})).catch((function(e){return console.log("add Prod err:\n",e),V.b.error("Something Went wrong !!")})).finally((function(){me(!1)})))):V.b.warning("Please select a Feature image"):V.b.warning("Please enter Regular Price"):V.b.warning("Please select an Availability Status"):V.b.warning("Please select a Category"):V.b.warning("Please select a Manufacture"):V.b.warning("Please enter Part No"):V.b.warning("Please enter Product SKU"):V.b.warning("Please enter a long description")},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},b.a.createElement(i.a,null,b.a.createElement(i.a.TabPane,{tab:"General",key:"general"},b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],name:"prod_name",label:"Name",initialValue:be.id?fe.data.prod_name:""},b.a.createElement(p.a,{placeholder:"Enter Product Name"})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter n"}],name:"prod_short_desc",label:"Short Description",initialValue:be.id?fe.data.prod_short_desc:""},b.a.createElement(ee,{rows:3,placeholder:"Enter Short Description"})),b.a.createElement(c.a.Item,{label:"Long Description"},b.a.createElement(j.a,{value:Oe,onChange:function(e){Se(e.toString("html")),je(e)},placeholder:"Long Description",className:I.a.rte,editorClassName:I.a.rteEditor,toolbarClassName:I.a.rteToolbar})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Title"}],name:"prod_meta_title",label:"Meta Title",initialValue:be.id?fe.data.prod_meta_title:""},b.a.createElement(p.a,{placeholder:"Enter Meta Title"})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Description"}],name:"prod_meta_desc",label:"Meta Description",initialValue:be.id?fe.data.prod_meta_desc:""},b.a.createElement(p.a,{placeholder:"Enter Meta Description"})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Meta Keywords"}],name:"prod_meta_keywords",label:"Meta Keywords",initialValue:be.id?fe.data.prod_meta_keywords:""},b.a.createElement(p.a,{placeholder:"Enter comma separated Meta Keywords"})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Tags"}],name:"prod_tags",label:"Tags",initialValue:be.id?fe.data.prod_tags:""},b.a.createElement(p.a,{placeholder:"Enter comma separated Tags"})),b.a.createElement(c.a.Item,{label:"Status"},b.a.createElement(u.a,{checked:we,onChange:function(e){return De(e)}}))),b.a.createElement(i.a.TabPane,{tab:"Data",key:"Data"},b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Part NO"}],name:"prod_partnum",label:"Part NO",initialValue:be.id?fe.data.prod_partnum:""},b.a.createElement(p.a,{placeholder:"Enter Part No"})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter SKU"}],name:"prod_sku",label:"SKU",initialValue:be.id?fe.data.prod_sku:""},b.a.createElement(p.a,{placeholder:"Enter Product SKU"}))),b.a.createElement(i.a.TabPane,{tab:"Links",key:"Links"},b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],name:"brand_uuid",label:"Manufacturer",initialValue:be.id?null===(e=fe.data)||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brand_uuid:null},b.a.createElement(m.a,{placeholder:Re.loading?"Loading...":"select Manufacture",options:Re.data.map((function(e){return{label:e.brand_name,value:e.brand_uuid,categories:e.categories}})),onSelect:function(e,t){var a,n;if(null===t||void 0===t||null===(a=t.categories)||void 0===a?void 0:a.length){var r=[];null===t||void 0===t||null===(n=t.categories)||void 0===n||n.forEach((function(e){var t=e.cat_name;r.push({cat_name:t,cat_id:e.cat_id,cat_status:e.cat_status}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;r.push({cat_name:"".concat(t," > ").concat(a),cat_id:e.cat_id,cat_status:e.cat_status}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var n=e.cat_name;r.push({cat_name:"".concat(t," > ").concat(a," > ").concat(n),cat_id:e.cat_id,cat_status:e.cat_status})}))}))})),Fe(r)}}})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],name:"prod_category",label:"Categories",initialValue:be.id?null===(a=fe.data)||void 0===a||null===(g=a.category)||void 0===g?void 0:g.cat_id:null},b.a.createElement(m.a,{placeholder:Re.loading?"Loading...":Me.length?"Select Category":"Select manifacture first",options:Me.map((function(e){return{label:e.cat_name,value:e.cat_id,key:e.cat_id}}))})),b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Product Name"}],label:"Related Product"},b.a.createElement(m.a,{placeholder:ct.isLoading?"Loading...":"select Related Products",mode:"multiple",optionFilterProp:"label",defaultValue:be.id?null===fe||void 0===fe||null===(v=fe.data)||void 0===v||null===(O=v.related_products)||void 0===O?void 0:O.map((function(e){var t;return null===e||void 0===e||null===(t=e.related_prod)||void 0===t?void 0:t.prod_uuid})):[],options:null===ct||void 0===ct||null===(P=ct.data)||void 0===P?void 0:P.map((function(e){return{label:e.prod_name,value:e.prod_uuid,uid:e.prod_uuid}})),onChange:function(e,t){Ke(t)}}))),b.a.createElement(i.a.TabPane,{tab:"Specifications",key:"Specifications"},b.a.createElement(c.a.Item,{label:b.a.createElement("p",null,"Dimensions ",b.a.createElement("br",null)," (L x W x H)")},b.a.createElement(p.a.Group,{compact:!0},b.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Length",onBlur:function(e){return Je((function(t){return Object(d.a)(Object(d.a)({},t),{},{length:parseFloat(e.target.value)})}))},defaultValue:be.id&&(null===fe||void 0===fe||null===(T=fe.data)||void 0===T||null===(S=T.dimensions)||void 0===S?void 0:S.length)?null===fe||void 0===fe||null===(k=fe.data)||void 0===k||null===(A=k.dimensions)||void 0===A?void 0:A.length:""}),b.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Width",onBlur:function(e){return Je((function(t){return Object(d.a)(Object(d.a)({},t),{},{width:parseFloat(e.target.value)})}))},defaultValue:be.id&&(null===fe||void 0===fe||null===(w=fe.data)||void 0===w||null===(L=w.dimensions)||void 0===L?void 0:L.length)?null===fe||void 0===fe||null===(N=fe.data)||void 0===N||null===(q=N.dimensions)||void 0===q?void 0:q.width:""}),b.a.createElement(p.a,{type:"number",style:{width:"33.3%"},placeholder:"Height",onBlur:function(e){return Je((function(t){return Object(d.a)(Object(d.a)({},t),{},{height:parseFloat(e.target.value)})}))},defaultValue:be.id&&(null===fe||void 0===fe||null===(C=fe.data)||void 0===C||null===(G=C.dimensions)||void 0===G?void 0:G.length)?null===fe||void 0===fe||null===(U=fe.data)||void 0===U||null===(M=U.dimensions)||void 0===M?void 0:M.height:""}))),b.a.createElement(c.a.Item,{name:"dimension_class",label:b.a.createElement("p",null,"Dimensions ",b.a.createElement("br",null),"Class "),initialValue:"Inch"},b.a.createElement(m.a,{style:{height:"3.5em"},placeholder:"Enter Dimension Class"},b.a.createElement(te,{key:1,value:"Centimeter"},"Centimeter"),b.a.createElement(te,{key:2,value:"Millimeter"},"Millimeter"),b.a.createElement(te,{key:3,value:"Inch"},"Inch"))),b.a.createElement(c.a.Item,{name:"prod_weight",label:"Weight",initialValue:be.id&&(null===fe||void 0===fe||null===(Y=fe.data)||void 0===Y?void 0:Y.prod_weight)?null===fe||void 0===fe||null===(ae=fe.data)||void 0===ae?void 0:ae.prod_weight:""},b.a.createElement(p.a,{type:"number",placeholder:"Enter Weight"})),b.a.createElement(c.a.Item,{name:"prod_weight_class",label:"Weight Class",initialValue:"Pound"},b.a.createElement(m.a,{placeholder:"Enter Weight Class"},b.a.createElement(te,{key:1,value:"Kilogram"},"Kilogram"),b.a.createElement(te,{key:1,value:"Gram"},"Gram"),b.a.createElement(te,{key:2,value:"Pound"},"Pound"),b.a.createElement(te,{key:3,value:"Ounce"},"Ounce")))),b.a.createElement(i.a.TabPane,{tab:"Stock",key:"Stock"},b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please enter Availability Status"}],name:"prod_outofstock_status",label:"Availability",initialValue:be.id?null===fe||void 0===fe||null===(ne=fe.data)||void 0===ne?void 0:ne.prod_outofstock_status:"In Stock"},b.a.createElement(m.a,{placeholder:"Please select a Status"},b.a.createElement(m.a.Option,{key:1,value:"2-3 Days"},"2-3 Days"),b.a.createElement(m.a.Option,{key:2,value:"In Stock"},"In Stock"),b.a.createElement(m.a.Option,{key:3,value:"Out Of Stock"},"Out Of Stock"),b.a.createElement(m.a.Option,{key:4,value:"Pre-Orde"},"Pre-Order")))),b.a.createElement(i.a.TabPane,{tab:"Attribute",key:"Attribute"},b.a.createElement(B,{attributesTableData:tt,setAttributesTableData:at})),b.a.createElement(i.a.TabPane,{tab:"Price",key:"Price"},b.a.createElement(c.a.Item,{rules:[{required:!0,message:"Please Enter Regular Price"}],name:"prod_regular_price",label:"Regular Price",initialValue:be.id?null===fe||void 0===fe||null===(re=fe.data)||void 0===re?void 0:re.prod_regular_price:""},b.a.createElement(p.a,{placeholder:"Enter Regular Price",prefix:"US$  ",type:"number"})),b.a.createElement(c.a.Item,{name:"prod_sale_price",label:"Sales Price",initialValue:be.id?null===fe||void 0===fe||null===(ie=fe.data)||void 0===ie?void 0:ie.prod_sale_price:""},b.a.createElement(p.a,{prefix:"US$  ",type:"number",placeholder:"Enter Sales Price"})),b.a.createElement(c.a.Item,{label:"Taxable"},b.a.createElement(u.a,{checked:Ne,onChange:function(e){return qe(e)}}))),b.a.createElement(i.a.TabPane,{tab:"Discount",key:"Discount"},b.a.createElement(R,{discount:ut,setDiscount:lt})),b.a.createElement(i.a.TabPane,{tab:"Parts Of Product",key:"PartsOf"},b.a.createElement($,{products:ct,setProducts:st,selectedPartsOfProducts:_t,setSelectedPartsOfProducts:bt,partOfProductQuantities:ft,setPartOfProductQuantities:Et})),b.a.createElement(i.a.TabPane,{tab:"Images",key:"Images"},b.a.createElement(F,{featuresImage:Ot,setFeaturesImage:jt,gallaryImages:Tt,setGallaryImages:St,singleProdUid:null===fe||void 0===fe||null===(ue=fe.data)||void 0===ue?void 0:ue.prod_uuid,setIsLoading:me}))),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},b.a.createElement(c.a.Item,null,b.a.createElement(h.a,{loading:se,size:"default",htmlType:"submit",type:"primary",raised:!0},se?"Processing":"Save"),b.a.createElement(H.b,{to:"/admin/roles/list"},b.a.createElement(h.a,{type:"white",size:"large"},"Cancel"))))))))))}}}]);