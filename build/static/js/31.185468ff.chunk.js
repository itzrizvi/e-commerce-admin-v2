(this.webpackJsonpstrikingDash=this.webpackJsonpstrikingDash||[]).push([[31],{511:function(e,t,a){"use strict";a(58),a(512)},512:function(e,t,a){},513:function(e,t,a){"use strict";var n=a(1),r=a(3),i=a(136),l=a(5),c=a.n(l),o=a(7),s=a(14),u=a(0),d=a(51),m=a(50),f=u.forwardRef((function(e,t){var a,n=e.prefixCls,i=void 0===n?"rc-switch":n,l=e.className,f=e.checked,v=e.defaultChecked,b=e.disabled,h=e.loadingIcon,p=e.checkedChildren,g=e.unCheckedChildren,E=e.onClick,C=e.onChange,O=e.onKeyDown,j=Object(s.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),_=Object(d.a)(!1,{value:f,defaultValue:v}),y=Object(o.a)(_,2),w=y[0],k=y[1];function x(e,t){var a=w;return b||(k(a=e),null===C||void 0===C||C(a,t)),a}var N=c()(i,l,(a={},Object(r.a)(a,"".concat(i,"-checked"),w),Object(r.a)(a,"".concat(i,"-disabled"),b),a));return u.createElement("button",Object.assign({},j,{type:"button",role:"switch","aria-checked":w,disabled:b,className:N,ref:t,onKeyDown:function(e){e.which===m.a.LEFT?x(!1,e):e.which===m.a.RIGHT&&x(!0,e),null===O||void 0===O||O(e)},onClick:function(e){var t=x(!w,e);null===E||void 0===E||E(t,e)}}),h,u.createElement("span",{className:"".concat(i,"-inner")},w?p:g))}));f.displayName="Switch";var v=f,b=a(68),h=a(93),p=a(72),g=a(217),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},C=u.forwardRef((function(e,t){var a,l=e.prefixCls,o=e.size,s=e.disabled,d=e.loading,m=e.className,f=void 0===m?"":m,C=E(e,["prefixCls","size","disabled","loading","className"]),O=u.useContext(b.b),j=O.getPrefixCls,_=O.direction,y=u.useContext(p.b),w=u.useContext(h.b),k=s||w||d,x=j("switch",l),N=u.createElement("div",{className:"".concat(x,"-handle")},d&&u.createElement(i.a,{className:"".concat(x,"-loading-icon")})),S=c()((a={},Object(r.a)(a,"".concat(x,"-small"),"small"===(o||y)),Object(r.a)(a,"".concat(x,"-loading"),d),Object(r.a)(a,"".concat(x,"-rtl"),"rtl"===_),a),f);return u.createElement(g.a,{insertExtraNode:!0},u.createElement(v,Object(n.a)({},C,{prefixCls:x,className:S,disabled:k,ref:t,loadingIcon:N})))}));C.__ANT_SWITCH=!0;t.a=C},678:function(e,t,a){"use strict";a.r(t);a(155);var n=a(79),r=(a(156),a(37)),i=(a(539),a(538)),l=(a(292),a(216)),c=(a(218),a(157)),o=(a(511),a(513)),s=a(9),u=a(48),d=a(0),m=a.n(d),f=a(16),v=a.n(f),b=a(509),h=a(508),p=a(507),g=a(238),E=a(506),C=a(138),O=a(43),j=a(8),_=a(106),y=a.n(_),w=a(53),k=a.n(w),x=a(219),N=a(119),S=a(225);t.default=function(){var e=Object(O.d)((function(e){return e.auth.token})),t=Object(d.useState)(""),a=Object(u.a)(t,2),f=a[0],_=a[1],w=Object(d.useState)([]),I=Object(u.a)(w,2),A=I[0],T=I[1],U=Object(d.useState)({data:[],isLoading:!0,error:""}),D=Object(u.a)(U,2),L=D[0],F=D[1],P=Object(d.useState)({data:[],isLoading:!0}),z=Object(u.a)(P,2),R=(z[0],z[1],Object(d.useState)([])),K=Object(u.a)(R,2),V=K[0];K[1];Object(d.useEffect)((function(){C.d.query({query:C.c.GET_ALL_STAFF,context:{headers:{TENANTID:"100001",Authorization:e}}}).then((function(e){var t,a;(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.getAllStaff)||void 0===a?void 0:a.isAuth)?F((function(t){var a,n;return Object(s.a)(Object(s.a)({},t),{},{data:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getAllStaff)||void 0===n?void 0:n.data,error:""})})):dispatch(Object(S.a)())})).catch((function(e){F((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){F((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})}))}))}),[]);var G=[{title:"UID",dataIndex:"uid",key:"uid",width:120,ellipsis:!0,sorter:function(e,t){return e.uid.toUpperCase()>t.uid.toUpperCase()?1:-1}},{title:"Email",dataIndex:"email",key:"email",width:200,ellipsis:!0,sorter:function(e,t){return e.email.toUpperCase()>t.email.toUpperCase()?1:-1}},{title:"First Name",dataIndex:"first_name",key:"first_name",sorter:function(e,t){return e.first_name.toUpperCase()>t.first_name.toUpperCase()?1:-1}},{title:"Last Name",dataIndex:"last_name",key:"last_name",sorter:function(e,t){return e.last_name.toUpperCase()>t.last_name.toUpperCase()?1:-1}},{title:"Roles",dataIndex:"roles",key:"roles",ellipsis:!0,sorter:function(e,t){return e.roles.length>t.roles.length?-1:1},render:function(e){var t=e.map((function(e){return e.role})).join(", ");return m.a.createElement("p",null,t)},filters:V},{title:"Verified",dataIndex:"email_verified",key:"email_verified",width:100,align:"center",render:function(e){return e.toString()},sorter:function(e,t){return e.email_verified===t.email_verified?0:e.email_verified?-1:1},filters:[{text:"Verified",value:!0},{text:"Not Verified",value:!1}],onFilter:function(e,t){return t.email_verified===e}},{title:"Status",dataIndex:"status",key:"status",width:100,align:"center",sorter:function(e,t){return e.status===t.status?0:e.status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.user_status===e},render:function(e,t){return m.a.createElement(o.a,{defaultChecked:t.user_status,title:"Status",onChange:function(e){return function(e,t){Object(O.c)();var a={data:{uid:e.uid,user_status:t}};C.d.mutate({mutation:C.b.ADMIN_UPDATE,variables:a,context:{headers:{TENANTID:"100001",Authorization:k.a.get("psp_t")}}}).then((function(t){var a,n;if(!(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.adminUpdate)||void 0===n?void 0:n.status))return x.b.error(data.message);x.b.success("".concat(e.email," user Status updated successfully."))})).catch((function(e){console.log("\ud83d\ude80 ~ file: AllAdmins.js ~ line 33 ~ handleStatusChange ~ err",e),x.b.error("Something went wrong!!")}))}(t,e)}})}},{title:"Action",dataIndex:"action",width:90,align:"center",render:function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(j.b,{to:"/admin/admin/add-admin?uid=".concat(t.uid,"&first_name=").concat(t.first_name,"&last_name=").concat(t.last_name,"&email=").concat(t.email,"&status=").concat(t.status)},m.a.createElement(y.a,{name:"edit"})))},key:"last_name"}];return m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{title:"Users",buttons:[m.a.createElement("div",{key:"1",className:"page-header-actions"},m.a.createElement(j.b,{to:"/admin/admin/add-admin"},m.a.createElement(E.a,{size:"small",title:"Add user",type:"primary"},m.a.createElement(v.a,{icon:"user-plus"}))))]}),m.a.createElement(h.b,null,m.a.createElement(n.a,{gutter:25},m.a.createElement(r.a,{sm:24,xs:24},m.a.createElement(p.a,{headless:!0},L.isLoading?m.a.createElement("div",{className:"spin"},m.a.createElement(c.a,null)):L.error?m.a.createElement("p",null,L.error):m.a.createElement(m.a.Fragment,null,m.a.createElement(l.a,{placeholder:"Search user",prefix:m.a.createElement(g.a,null),onChange:function(e){var t=e.target.value;_(t),T(L.data.filter((function(e){var a;return((null===e||void 0===e?void 0:e.email)+(null===e||void 0===e?void 0:e.first_name)+(null===e||void 0===e?void 0:e.last_name)+(null===e||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.role)).toLowerCase().includes(t.toLowerCase())})))}}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("span",{className:"psp_list"},m.a.createElement(i.a,{className:"table-responsive",columns:G,rowKey:"uid",size:"small",dataSource:f?A:L.data,rowClassName:function(e,t){return t%2==0?"":"altTableClass"},pagination:{defaultPageSize:N.a.USERS_PER_PAGE,total:f?A.length:L.data.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);