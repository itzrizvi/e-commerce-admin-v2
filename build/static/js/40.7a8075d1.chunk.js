(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[40],{967:function(e,t,l){"use strict";l.r(t);l(100);var a=l(50),n=(l(372),l(343)),i=(l(101),l(40)),r=(l(102),l(54)),d=l(75),u=(l(144),l(33)),o=(l(121),l(69)),c=l(7),s=(l(156),l(24)),m=l(14),E=(l(74),l(17)),p=l(0),v=l.n(p),b=l(18),g=l.n(b),f=l(81),h=l(77),O=l(76),y=l(72),j=l(63),S=l(11),_=l(128),A=l.n(_),L=l(29),x=l(65),T=l.n(x),C=l(26);l(25),E.a.TextArea;t.default=function(){var e,t,l,b,_,x,P,w,I,F,q,N,R,z,k,D,B,G,M,U,W=Object(j.useLocation)().search,J=A.a.parse(W),V=(Object(j.useHistory)(),Object(p.useState)({data:[],isLoading:!0})),Z=Object(m.a)(V,2),H=Z[0],Q=Z[1],K=Object(p.useState)(!0),X=Object(m.a)(K,2),Y=(X[0],X[1],Object(p.useState)(!1)),$=Object(m.a)(Y,2),ee=$[0],te=($[1],s.a.useForm()),le=Object(m.a)(te,1)[0];Object(p.useEffect)((function(){J.id&&L.j.query({query:L.i.GET_SINGLE_CUSTOMER_GROUP,variables:{query:{customer_group_id:parseInt(J.id)}},context:{headers:{TENANTID:"100001",Authorization:T.a.get("psp_t")}}}).then((function(e){var t,l=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleCustomerGroup;(null===l||void 0===l?void 0:l.status)&&Q((function(e){return Object(c.a)(Object(c.a)({},e),{},{data:null===l||void 0===l?void 0:l.data,error:""})}))})).catch((function(e){Q((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Q((function(e){return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1})}))}))}),[]);var ae=Object(p.useState)({data:[],isLoading:!0}),ne=Object(m.a)(ae,2),ie=ne[0],re=ne[1],de=Object(p.useState)({}),ue=Object(m.a)(de,2),oe=ue[0],ce=ue[1],se=Object(p.useState)([]),me=Object(m.a)(se,2),Ee=me[0],pe=me[1],ve=Object(p.useState)([]),be=Object(m.a)(ve,2),ge=be[0],fe=be[1],he=Object(p.useState)({billing:{},shipping:{}}),Oe=Object(m.a)(he,2),ye=Oe[0],je=Oe[1],Se=Object(p.useState)({data:[],isLoading:!0}),_e=Object(m.a)(Se,2),Ae=_e[0],Le=_e[1],xe=Object(p.useState)([]),Te=Object(m.a)(xe,2),Ce=Te[0],Pe=Te[1],we=Object(p.useState)(null),Ie=Object(m.a)(we,2),Fe=(Ie[0],Ie[1],Object(p.useRef)()),qe=[{title:"Product Name",dataIndex:"name",key:"name",ellipsis:!0},{title:"Price",dataIndex:"price",key:"price",width:100},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:170,render:function(e,t){return v.a.createElement(E.a,{type:"number",defaultValue:e})}},{title:"Action",dataIndex:"id",key:"id",width:100,align:"center",render:function(e){return v.a.createElement(y.a,{size:"small",title:"Add Order",type:"primary",onClick:function(){Pe((function(t){return t.filter((function(t){return t.id!==e}))}))}},v.a.createElement(g.a,{icon:"minus"}))}}];return Object(p.useEffect)((function(){L.j.query({query:L.i.GET_ALL_CUSTOMER_FOR_ORDER,context:{headers:{TENANTID:"100001",Authorization:T.a.get("psp_t")}}}).then((function(e){var t,l=e.data.getAllCustomer;if(!l.status)return C.b.error(l.message);var a=null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.map((function(e){return{label:e.email,value:e.id,item:e}}));re({data:a,isLoading:!1})})).catch((function(e){}))}),[]),Object(p.useEffect)((function(){L.j.query({query:L.l.GET_PRODUCT_LIST,context:{headers:{TENANTID:"100001",Authorization:T.a.get("psp_t")}}}).then((function(e){var t,l=e.data.getProductList;if(console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 162 ~ useEffect ~ data",l),!l.status)return C.b.error(l.message);var a=null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.map((function(e){return{label:e.prod_name,value:e.id,prod_slug:e.prod_slug,item:e}}));console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 113 ~ options ~ options",a),Le({data:a,isLoading:!1})})).catch((function(e){}))}),[]),v.a.createElement(v.a.Fragment,null,v.a.createElement(f.a,{title:"Add Order"}),v.a.createElement(h.b,null,v.a.createElement(a.a,{gutter:25},v.a.createElement(i.a,{sm:24,xs:24},v.a.createElement(O.a,{headless:!0},v.a.createElement(a.a,null,v.a.createElement(i.a,{sm:12,xs:12},J.id&&H.isLoading?v.a.createElement("div",{div:!0,className:"spin"},v.a.createElement(o.a,null)):v.a.createElement(s.a,{ref:Fe,style:{width:"100%"},form:le,name:"addRole",onFinish:function(e){console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 57 ~ handleSubmit ~ values",e)},onFinishFailed:function(e){return console.log("form error info:\n",e)},layout:"vertical"},v.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please select a customer"}],name:"customer_group_name",label:"Customer"},v.a.createElement(u.a,{placeholder:ie.isLoading?"Loading....":"Select a customer",options:ie.data,showSearch:!0,optionFilterProp:"label",onSelect:function(e,t){var l;console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 160 ~ AddOrder ~ data",t),je({billing:{},shipping:{}}),ce(t.item);var a=[],n=[];null===t||void 0===t||null===(l=t.item)||void 0===l||l.addresses.forEach((function(e){return"billing"===e.type?a.push({label:e.address1,value:e.id,item:e}):"shipping"===e.type?n.push({label:e.address1,value:e.id,item:e}):void 0})),pe(a),fe(n)}})),v.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please select a billing address"}],name:"billing_address_id",label:"Billing Address"},v.a.createElement(u.a,{placeholder:ie.isLoading?"Loading...":"Select a billing address",options:Ee,onSelect:function(e,t){console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 214 ~ AddOrder ~ data",t),je((function(e){return Object(c.a)(Object(c.a)({},e),{},{billing:t.item})}))}})),v.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please select a shipping address"}],name:"shipping_address_id",label:"Shipping Address"},v.a.createElement(u.a,{placeholder:ie.isLoading?"Loading...":"Select a shipping address",options:ge,onSelect:function(e,t){console.log("\ud83d\ude80 ~ file: AddOrder.js ~ line 229 ~ AddOrder ~ data",t),je((function(e){return Object(c.a)(Object(c.a)({},e),{},{shipping:t.item})}))}})),v.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please select a payment method"}],name:"payment_id",label:"Payment Method"},v.a.createElement(u.a,{placeholder:"Select payment method",options:[{label:"Method 1",value:1},{label:"Method 2",value:2}]})),v.a.createElement(s.a.Item,{name:"ps",label:"Products"},v.a.createElement(u.a,{optionFilterProp:"label",placeholder:Ae.isLoading?"Loading....":"Select products",options:Ae.data,showSearch:!0,mode:"multiple",allowClear:!0,onSelect:function(e,t){var l,a,n,i,r={id:(new Date).getTime(),name:null===t||void 0===t||null===(l=t.item)||void 0===l?void 0:l.prod_name,quantity:1,price:(null===t||void 0===t||null===(a=t.item)||void 0===a?void 0:a.prod_sale_price)?null===t||void 0===t||null===(n=t.item)||void 0===n?void 0:n.prod_sale_price:null===t||void 0===t||null===(i=t.item)||void 0===i?void 0:i.prod_regular_price};Pe((function(e){return[].concat(Object(d.a)(e),[r])}))},onChange:function(e){setTimeout((function(){Fe.current.setFieldsValue({ps:void 0})}),20)}})),v.a.createElement("span",{className:"psp_list"},v.a.createElement(r.a,{columns:qe,dataSource:Ce,rowClassName:function(e,t){return t%2===0?"":"altTableClass"}})),v.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},v.a.createElement(s.a.Item,null,v.a.createElement(y.a,{loading:ee,size:"default",htmlType:"submit",type:"primary",raised:!0},ee?"Processing":"Save"),v.a.createElement(S.b,{to:"/admin/order/list"},v.a.createElement(y.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel")))))),v.a.createElement(i.a,{sm:12,xs:12,style:{paddingLeft:"3em"}},v.a.createElement(n.a,{headless:!0},v.a.createElement("h3",{style:{borderBottom:"1px solid #f2f1f1",paddingBottom:"0.3em",marginBottom:"0.9em"}},"Preview"),(null===oe||void 0===oe?void 0:oe.id)&&v.a.createElement(v.a.Fragment,null,v.a.createElement("p",{style:{fontWeight:500}},"Customer Details :"),v.a.createElement("table",{style:{marginLeft:"1em"}},v.a.createElement("tr",null,v.a.createElement("td",{style:{width:"150px"}},v.a.createElement("b",null,"Email ")),v.a.createElement("td",null,": ",oe.email)),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"First Name ")),v.a.createElement("td",null,": ",oe.first_name)),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Last Name:")),v.a.createElement("td",null,": ",oe.last_name)))),(null===ye||void 0===ye||null===(e=ye.billing)||void 0===e?void 0:e.id)&&v.a.createElement(v.a.Fragment,null,v.a.createElement("p",{style:{fontWeight:500,marginTop:"2em"}},"Billing Address :"),v.a.createElement("table",{style:{marginLeft:"1em"}},v.a.createElement("tr",null,v.a.createElement("td",{style:{width:"150px"}},v.a.createElement("b",null,"Address 1")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(t=ye.billing)||void 0===t?void 0:t.address1)),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Address 2")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(l=ye.billing)||void 0===l?void 0:l.address2," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Email")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(b=ye.billing)||void 0===b?void 0:b.email," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Phone")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(_=ye.billing)||void 0===_?void 0:_.phone," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Fax")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(x=ye.billing)||void 0===x?void 0:x.fax," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Country")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(P=ye.billing)||void 0===P?void 0:P.country," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"City")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(w=ye.billing)||void 0===w?void 0:w.city," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"State")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(I=ye.billing)||void 0===I?void 0:I.state," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Zip Code")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(F=ye.billing)||void 0===F?void 0:F.zip_code," ")))),(null===ye||void 0===ye||null===(q=ye.shipping)||void 0===q?void 0:q.id)&&v.a.createElement(v.a.Fragment,null,v.a.createElement("p",{style:{fontWeight:500,marginTop:"2em"}},"Billing Address :"),v.a.createElement("table",{style:{marginLeft:"1em"}},v.a.createElement("tr",null,v.a.createElement("td",{style:{width:"150px"}},v.a.createElement("b",null,"Address 1")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(N=ye.shipping)||void 0===N?void 0:N.address1)),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Address 2")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(R=ye.shipping)||void 0===R?void 0:R.address2," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Email")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(z=ye.shipping)||void 0===z?void 0:z.email," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Phone")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(k=ye.shipping)||void 0===k?void 0:k.phone," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Fax")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(D=ye.shipping)||void 0===D?void 0:D.fax," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Country")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(B=ye.shipping)||void 0===B?void 0:B.country," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"City")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(G=ye.shipping)||void 0===G?void 0:G.city," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"State")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(M=ye.shipping)||void 0===M?void 0:M.state," ")),v.a.createElement("tr",null,v.a.createElement("td",null,v.a.createElement("b",null,"Zip Code")),v.a.createElement("td",null,": ",null===ye||void 0===ye||null===(U=ye.shipping)||void 0===U?void 0:U.zip_code," "))))))))))))}}}]);