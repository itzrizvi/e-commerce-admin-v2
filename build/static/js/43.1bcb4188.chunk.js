(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[43],{863:function(e,t,a){"use strict";a.r(t);a(281);var n,r=a(132),i=(a(130),a(67)),o=(a(131),a(43)),l=(a(282),a(133)),c=(a(143),a(68)),u=(a(197),a(121)),d=(a(256),a(147)),s=a(11),p=a(12),m=a(33),b=(a(611),a(614)),f=a(0),_=a.n(f),g=a(26),v=a.n(g),E=a(146),h=a(145),O=a(144),j=a(176),y=a(172),A=a(10),L=a(35),C=a(39),P=a(113),I=a.n(P),S=a(42),w=a.n(S),x=a(122),T=a(259),k=a(283),D=a(23),N=b.a.RangePicker;t.default=function(){Object(L.b)("product");var e=Object(f.useState)({data:[],isLoading:!0}),t=Object(m.a)(e,2),a=t[0],b=t[1],g=Object(f.useState)([]),P=Object(m.a)(g,2),S=P[0],z=P[1],U=Object(f.useState)(""),q=Object(m.a)(U,2),F=q[0],G=q[1],R=Object(f.useState)(!0),B=Object(m.a)(R,2),J=B[0],K=B[1],M=Object(f.useState)({data:[],isLoading:!0}),V=Object(m.a)(M,2),W=V[0],Y=V[1],H=Object(f.useState)({data:[],isLoading:!0}),Q=Object(m.a)(H,2),X=Q[0],Z=Q[1],$=Object(f.useState)({data:[],isLoading:!0}),ee=Object(m.a)($,2),te=ee[0],ae=ee[1],ne=Object(f.useState)({data:[],isLoading:!0}),re=Object(m.a)(ne,2),ie=re[0],oe=re[1],le=Object(f.useState)({availability:[],categories:[],condition:[],attributes:[],startDate:"",endDate:"",minPrice:"",maxPrice:""}),ce=Object(m.a)(le,2),ue=ce[0],de=ce[1];Object(f.useEffect)((function(){C.j.query({query:C.l.GET_PRODUCT_LIST,context:{headers:{TENANTID:"100001",Authorization:w.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getProductList;(null===a||void 0===a?void 0:a.status)&&b((function(e){return Object(p.a)(Object(p.a)({},e),{},{data:null===a||void 0===a?void 0:a.data,error:""})}))})).catch((function(e){b((function(e){return Object(p.a)(Object(p.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){b((function(e){return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1})}))})),C.j.query({query:C.l.GET_ALL_CATEGORIES,context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCategories;if(a.status&&a.categories.length){var n=[];a.categories.forEach((function(e){var t=e.cat_name;n.push({cat_name:t,cat_id:e.cat_id}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;n.push({cat_name:"".concat(t," > ").concat(a),cat_id:e.cat_id}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var r=e.cat_name;n.push({cat_name:"".concat(t," > ").concat(a," > ").concat(r),cat_id:e.cat_id})}))}))})),Y({data:n,isLoading:!1})}})).catch((function(e){})),C.j.query({query:Object(D.d)(n||(n=Object(s.a)(["\n            query getAllAttributes {\n                getAllAttributes {\n                  message\n                  status\n                  tenant_id\n                  data {\n                    attribute_uuid\n                    attribute_name\n                  }\n                }\n              }\n            "]))),context:{headers:{TENANTID:"100001",Authorization:w.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttributes;a.status&&Z({data:a.data,isLoading:!1})})),C.j.query({query:C.n.GET_ALL_AVAILABILITY,context:{headers:{TENANTID:"100001",Authorization:w.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllProductAvailabilityStatus;a.status&&ae({data:a.data,isLoading:!1})})),C.j.query({query:C.n.GET_ALL_CONDITIONS,context:{headers:{TENANTID:"100001",Authorization:w.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllProductCondition;a.status&&oe({data:a.data,isLoading:!1})}))}),[]);var se=[{title:"UID",dataIndex:"prod_uuid",key:"prod_uuid",width:70,ellipsis:!0,sorter:function(e,t){return e.prod_uuid.toUpperCase()>t.prod_uuid.toUpperCase()?1:-1}},{title:"Logo",dataIndex:"prod_uuid",key:"prod_uuid",width:70,render:function(e,t){return _.a.createElement(k.LazyLoadImage,{effect:"blur",width:"40",src:Object(T.renderImage)(t.prod_uuid,t.prod_thumbnail,"product/image/thumbnail","128x128"),onError:T.errorImageSrc,alt:t.prod_uuid})}},{title:"Product Name",dataIndex:"prod_name",key:"prod_name",ellipsis:!0,sorter:function(e,t){return e.prod_name.toUpperCase()>t.prod_name.toUpperCase()?1:-1}},{title:"Product SKU",dataIndex:"prod_sku",key:"prod_sku",ellipsis:!0,sorter:function(e,t){return e.prod_sku.toUpperCase()>t.prod_sku.toUpperCase()?1:-1}},{title:"Part NO",dataIndex:"prod_partnum",key:"prod_partnum",ellipsis:!0,sorter:function(e,t){return e.prod_partnum.toUpperCase()>t.prod_partnum.toUpperCase()?1:-1}},{title:"Regular Price",dataIndex:"prod_regular_price",key:"prod_regular_price",ellipsis:!0,align:"center",sorter:function(e,t){return e.prod_regular_price>t.prod_regular_price?1:-1}},{title:"Sales Price",dataIndex:"prod_sale_price",key:"prod_sale_price",ellipsis:!0,align:"center",sorter:function(e,t){return e.prod_sale_price>t.prod_sale_price?1:-1}},{title:"Status",dataIndex:"prod_status",key:"prod_status",align:"right",sorter:function(e,t){return e.prod_status===t.prod_status?0:e.prod_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.prod_status===e},render:function(e,t){return _.a.createElement(d.a,{defaultChecked:e,title:"Status",onChange:function(e){}})}},{title:"Action",dataIndex:"action",width:140,align:"center",render:function(e,t){return _.a.createElement(_.a.Fragment,null,_.a.createElement(A.b,{to:"/admin/products/view?id=".concat(t.prod_uuid)},_.a.createElement(j.a,{size:"default",type:"white",title:"Edit"},"view")),_.a.createElement(A.b,{to:"/admin/products/add?id=".concat(t.prod_uuid,"&name=").concat(t.prod_name)},_.a.createElement(I.a,{name:"edit",style:{margin:".5em 1em"}})))},key:"last_name"}];return Object(f.useEffect)((function(){if(!a.isLoading){var e=a.data;if(F&&(e=a.data.filter((function(e){return((null===e||void 0===e?void 0:e.prod_name)+(null===e||void 0===e?void 0:e.prod_sku)).toLowerCase().includes(F.toLowerCase())}))),ue.startDate){var t=new Date(ue.startDate).valueOf(),n=new Date(ue.endDate).valueOf();e=e.filter((function(e){var a=parseInt(e.createdAt);return a>=t&&a<=n}))}ue.attributes.length&&(e=e.filter((function(e){return ue.attributes.find((function(t){return e.prod_attributes.map((function(e){return e.attribute_data.attribute_uuid})).includes(t)}))}))),ue.categories.length&&(e=e.filter((function(e){return ue.categories.includes(e.category.cat_id)}))),ue.availability.length&&(e=e.filter((function(e){return ue.availability.includes(e.prod_outofstock_status)}))),ue.condition.length&&(e=e.filter((function(e){return ue.condition.includes(e.prod_condition)}))),ue.minPrice&&(e=e.filter((function(e){return e.prod_regular_price>=parseFloat(ue.minPrice)}))),ue.maxPrice&&(e=e.filter((function(e){return e.prod_regular_price<=parseFloat(ue.maxPrice)}))),z(e)}}),[a,F,ue]),_.a.createElement(_.a.Fragment,null,_.a.createElement(E.a,{title:"Products",buttons:[_.a.createElement("div",{key:"1",className:"page-header-actions"},_.a.createElement(j.a,{size:"small",type:"white",onClick:function(){return K((function(e){return!e}))}},_.a.createElement(v.a,{icon:"filter"}),"Filter"),_.a.createElement(A.b,{to:"/admin/products/add"},_.a.createElement(j.a,{size:"small",title:"Add Product",type:"primary"},_.a.createElement(v.a,{icon:"file-plus"}))))]}),_.a.createElement(h.b,null,_.a.createElement(i.a,{gutter:25},_.a.createElement(o.a,{sm:24,xs:24},_.a.createElement(O.a,{headless:!0},a.isLoading?_.a.createElement("div",{className:"spin"},_.a.createElement(u.a,null)):_.a.createElement(_.a.Fragment,null,_.a.createElement(c.a,{placeholder:"Search Products...",prefix:_.a.createElement(y.a,null),onChange:function(e){var t=e.target.value;G(t)}}),_.a.createElement("br",null),_.a.createElement("br",null),J&&_.a.createElement("div",{style:{marginBottom:"2.5em"}},_.a.createElement(i.a,{gutter:16},_.a.createElement(o.a,{span:8},"Availability : ",_.a.createElement("br",null),_.a.createElement(l.a,{style:{width:"100%"},placeholder:"Select status",size:"middle",mode:"multiple",onChange:function(e){de((function(t){return Object(p.a)(Object(p.a)({},t),{},{availability:e})}))},options:te.data.map((function(e){return{label:e.name,value:e.name}}))})),_.a.createElement(o.a,{span:8},"Category: ",_.a.createElement("br",null),_.a.createElement(l.a,{style:{width:"100%"},placeholder:W.isLoading?"Loading..":"select category",size:"middle",mode:"multiple",optionFilterProp:"label",onChange:function(e){de((function(t){return Object(p.a)(Object(p.a)({},t),{},{categories:e})}))},options:W.data.map((function(e){return{label:e.cat_name,value:e.cat_id}}))})),_.a.createElement(o.a,{span:8},"Date: ",_.a.createElement("br",null),_.a.createElement(N,{style:{height:"40px",width:"100%"},size:"small",onChange:function(e){de((function(t){return Object(p.a)(Object(p.a)({},t),{},{startDate:e[0]._d,endDate:e[1]._d})}))}}))),_.a.createElement(i.a,{gutter:16,style:{marginTop:".5em"}},_.a.createElement(o.a,{span:8},"Condition: ",_.a.createElement("br",null),_.a.createElement(l.a,{style:{width:"100%"},placeholder:"Select Condition",size:"middle",mode:"multiple",onChange:function(e){return de((function(t){return Object(p.a)(Object(p.a)({},t),{},{condition:e})}))},options:ie.data.map((function(e){return{label:e.name,value:e.name}}))})),_.a.createElement(o.a,{span:8},"Attributes: ",_.a.createElement("br",null),_.a.createElement(l.a,{style:{width:"100%"},placeholder:X.isLoading?"Loading..":"select Attribute",size:"middle",mode:"multiple",onChange:function(e){return de((function(t){return Object(p.a)(Object(p.a)({},t),{},{attributes:e})}))},options:X.data.map((function(e){return{label:e.attribute_name,value:e.attribute_uuid}}))})),_.a.createElement(o.a,{span:8},"Price: ",_.a.createElement("br",null),_.a.createElement(c.a.Group,{compact:!0,size:"default"},_.a.createElement(c.a,{type:"number",placeholder:"Min",style:{width:"50%"},onBlur:function(e){console.log(ue),de((function(t){var a;return Object(p.a)(Object(p.a)({},t),{},{minPrice:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}),_.a.createElement(c.a,{type:"number",placeholder:"Max",style:{width:"50%"},onBlur:function(e){console.log(ue),console.log(e.target.value),de((function(t){var a;return Object(p.a)(Object(p.a)({},t),{},{maxPrice:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}))))),_.a.createElement("span",{className:"psp_list"},_.a.createElement(r.a,{className:"table-responsive",columns:se,rowKey:"g_s",size:"small",dataSource:S,rowClassName:function(e,t){return t%2==0?"":"altTableClass"},pagination:{defaultPageSize:x.a.PRODUCTS_PER_PAGE,total:S.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);