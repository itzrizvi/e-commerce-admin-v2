(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[36],{843:function(e,t,a){"use strict";a.r(t);a(281);var n=a(132),r=(a(143),a(68)),s=(a(197),a(121)),o=(a(256),a(147)),i=a(33),l=a(0),c=a.n(l),u=a(26),m=a.n(u),d=(a(145),a(176)),p=a(144),f=a(44),h=a(699),v=a(286),E=a.n(v),_=a(10),b=a(113),g=a.n(b),y=a(39),S=a(42),j=a.n(S),k=a(48),O=a(122);t.default=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){var t;return{rolesData:null!==(t=e.roles.data)&&void 0!==t?t:[]}})).rolesData,a=[],u=Object(l.useState)([]),v=Object(i.a)(u,2),b=v[0],S=v[1],w=Object(l.useState)(!1),C=Object(i.a)(w,2);C[0],C[1];t.map((function(e){var t=e.role_uuid,n=e.role,r=e.createdAt,s=e.role_description,o=e.permissions,i=e.role_status;return a.push({key:t,name:n,role_description:s,permissions:o,role_status:i,createdAt:r,dateTime:c.a.createElement("span",{className:"status-text"},c.a.createElement(E.a,{format:"DD MMMM  YYYY "},parseInt(r))),action:c.a.createElement("div",{className:"table-actions"},c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{className:"btn-icon",type:"info",to:"#",shape:"circle"},c.a.createElement(m.a,{icon:"edit",size:16}))))})})),Object(l.useEffect)((function(){e(Object(h.a)())}),[e]);var x=[{title:"Name",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.toUpperCase()>t.name.toUpperCase()?1:-1}},{title:"Description",dataIndex:"role_description",key:"role_description",sorter:function(e,t){return e.role_description.toUpperCase()>t.role_description.toUpperCase()?1:-1}},{title:"Permissions",dataIndex:"permissions",key:"permissions",ellipsis:!0,sorter:function(e,t){return e.permissions.length>t.permissions.length?-1:1},render:function(e){var t=e.map((function(e){return e.rolesPermission.roles_permission_name})).join(", ");return c.a.createElement("p",null,t)}},{title:"Status",dataIndex:"role_status",key:"role_status",width:100,align:"center",filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.role_status===e},sorter:function(e,t){return e.role_status===t.role_status?0:e.role_status?-1:1},render:function(e,t){return c.a.createElement(o.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,t){var a={data:{role_uuid:e.key,role_status:t}};y.j.mutate({mutation:y.d.UPDATE_ROLE,variables:a,context:{headers:{TENANTID:"100001",Authorization:j.a.get("psp_t")}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateRole;if(!(null===n||void 0===n?void 0:n.status))return k.b.error(n.message);k.b.success("".concat(e.name," Role Status updated successfully."))})).catch((function(e){k.b.error("Something went wrong.!"),console.log("\ud83d\ude80 ~ file: UpdateRole.js ~ line 193 ~ handleSubmit ~ err",e)}))}(t,e)}})}},{title:"Action",dataIndex:"key",key:"action",width:90,align:"center",render:function(e,t){return c.a.createElement(_.b,{to:"/admin/roles/update?id=".concat(t.key,"&role=").concat(t.name),style:{cursor:"pointer"}},c.a.createElement(g.a,{name:"edit",style:{margin:".5em 1em"}}))}}],N=Object(l.useState)(""),A=Object(i.a)(N,2),I=A[0],P=A[1];return c.a.createElement(p.a,{headless:!0},a.length?c.a.createElement(c.a.Fragment,null,c.a.createElement(r.a,{prefix:c.a.createElement(m.a,{icon:"search",size:14}),placeholder:"Search Roles..",onChange:function(e){var t=e.target.value;P(t),S(a.filter((function(e){return(e.name+e.role_description).toLowerCase().includes(t.toLowerCase())})))},style:{marginBottom:"1em"}}),c.a.createElement("span",{className:"psp_list"},c.a.createElement(n.a,{dataSource:I?b:a,columns:x,size:"small",rowClassName:function(e,t){return t%2==0?"":"altTableClass"},rowKey:"key",pagination:{defaultPageSize:O.a.ROLES_PER_PAGE,total:I?b.length:a.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))):c.a.createElement("div",{className:"spin"},c.a.createElement(s.a,null)))}}}]);