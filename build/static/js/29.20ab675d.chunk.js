(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[29],{694:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n,r,u,l,i,o=a(8),c=a(17),s={GET_ALL_QUOTE_STATUS:Object(c.d)(n||(n=Object(o.a)(["\n    query getQuoteStatusList {\n    getQuoteStatusList {\n      message\n      status\n      tenant_id\n      data {\n        id\n        name\n        slug\n        status\n      }\n    }\n  }"]))),GET_ALL_QUOTE:Object(c.d)(r||(r=Object(o.a)(["\n    query getSubmittedQuoteList($query:SubmittedQuoteListInput) {\n      getSubmittedQuoteList(query:$query) {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          updatedAt\n          quotedby {\n            id\n            first_name\n            last_name\n            email\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_QUOTE:Object(c.d)(u||(u=Object(o.a)(["\n    query getSingleSubmittedQuote($query: GetSingleSubmittedQuoteInput) {\n      getSingleSubmittedQuote(query: $query) {\n        message\n        status\n        data {\n          id\n          status\n          grand_total\n          note\n          createdAt\n          submittedquoteitems {\n            id\n            submittedquote_id\n            price\n            quantity\n            total_price\n            product {\n              id\n              prod_name\n              prod_slug\n              prod_sku\n              prod_partnum\n              createdAt\n            }\n            createdAt\n          }\n        }\n      }\n    }\n  "]))),REMOVE_QUOTE_ITEM:Object(c.d)(l||(l=Object(o.a)(["\n    mutation quoteItemDelete($data: QuoteItemDeleteInput) {\n      quoteItemDelete(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SUBMIT_QUOTE:Object(c.d)(i||(i=Object(o.a)(["\n    mutation updateSubmittedQuote($data: SubmittedQuoteUpdateInput) {\n      updateSubmittedQuote(data: $data) {\n        message\n        status\n      }\n    }\n  "])))}},980:function(e,t,a){"use strict";var n=a(3),r=a(0),u={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"},l=a(16),i=function(e,t){return r.createElement(l.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:u}))};i.displayName="RetweetOutlined";t.a=r.forwardRef(i)},988:function(e,t,a){"use strict";a.r(t);a(133);var n=a(71),r=(a(145),a(30)),u=(a(143),a(68)),l=(a(144),a(52)),i=(a(115),a(39)),o=(a(132),a(74)),c=(a(93),a(44)),s=a(7),d=a(14),m=(a(639),a(642)),b=a(0),p=a.n(b),f=a(980),v=a(195),g=a(120),E=a(101),h=a(99),O=a(12),y=a(103),j=a.n(y),_=a(102),S=a(694),A=a(47),Q=a(218),q=a.n(Q),x=a(19),w=a.n(x),D=a(23),T=a(122),L=a(72),I=a.n(L),k=a(372),M=a.n(k),N=m.a.RangePicker,z=!1;t.default=function(){var e,t;Object(D.c)("quote");var a=Object(b.useState)({data:[],loading:!1,error:""}),m=Object(d.a)(a,2),y=m[0],Q=m[1],x=Object(b.useState)(!0),L=Object(d.a)(x,2),k=L[0],U=L[1],Y=Object(A.d)((function(e){return e.auth.token})),C=Object(b.useState)(!1),F=Object(d.a)(C,2),G=F[0],$=F[1],R=Object(b.useState)({data:[],isLoading:!0}),V=Object(d.a)(R,2),B=V[0],P=V[1],H=Object(b.useState)(null),J=Object(d.a)(H,2),K=J[0],W=J[1],X=Object(b.useState)(!0),Z=Object(d.a)(X,2),ee=Z[0],te=Z[1],ae=Object(b.useState)({status:[],startDate:"",endDate:"",minAmount:"",maxAmount:"",searchQuery:""}),ne=Object(d.a)(ae,2),re=ne[0],ue=ne[1];Object(b.useEffect)((function(){_.b.query({query:S.a.GET_ALL_QUOTE_STATUS,context:{headers:{TENANTID:"100001",Authorization:I.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getQuoteStatusList;a.status&&P({data:a.data,isLoading:!1})}))}),[]),Object(b.useEffect)((function(){z&&(re.status.length>0||""!==re.searchQuery||""!==re.endDate||""!==re.startDate||""!==re.minAmount||""!==re.maxAmount?te(!1):te(!0)),z=!0}),[re]);var le=[{title:"Quoted By",dataIndex:["quotedby","first_name"],key:"first_name",width:100,ellipsis:!0,render:function(e,t){return"".concat(e," ").concat(t.quotedby.last_name)}},{title:"Email",dataIndex:["quotedby","email"],key:"email",width:150,ellipsis:!0,sorter:function(e,t){return e.email>t.email?1:-1}},{title:"Total",dataIndex:"grand_total",key:"grand_total",width:100,ellipsis:!0,sorter:function(e,t){return e.grand_total>t.grand_total?1:-1}},{title:"Status",dataIndex:"status",key:"status",align:"left",width:150,render:function(e){return p.a.createElement("span",{style:{borderRadius:".5em",padding:".5em 2.5em",color:"in-progress"===e?"#feaf00":"submitted"===e?"#2fb083":"new"===e?"#d63031":"received"===e?"#0984e3":"saved"===e?"#dfe6e9":"",background:"in-progress"===e?"#fef6e6":"submitted"===e?"#ebf9f4":"new"===e?"#ffeaa7":"received"===e?"#b2bec3":"saved"===e?"#00cec9":""}},e)},sorter:function(e,t){return e.status>t.status?1:-1}},{title:"Note",dataIndex:"note",key:"note",width:250,ellipsis:!0,sorter:function(e,t){return e.note>t.note?1:-1}},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:120,align:"center",render:function(e,t){return p.a.createElement("span",{className:"status-text"},p.a.createElement(q.a,{format:"DD MMMM YYYY"},parseInt(e)))}},{title:"Action",dataIndex:"action",align:"right",key:"action",width:100,render:function(e,t){return p.a.createElement(p.a.Fragment,null,p.a.createElement(O.b,{to:"/admin/products/quote/edit/".concat(t.id),style:{margin:".5em",color:"#096dd9"}},p.a.createElement(j.a,{name:"edit",style:{color:"#5F63F2"}})))}}],ie=function(e,t){return[M()(e,"YYYY-MM-DD"),M()(t,"YYYY-MM-DD")]};return p.a.createElement(p.a.Fragment,null,p.a.createElement(g.a,{title:"Quote List",buttons:[p.a.createElement("div",{key:"1",className:"page-header-actions"},p.a.createElement(c.a,{size:"small",type:"white",onClick:function(){return U((function(e){return!e}))}},p.a.createElement(w.a,{icon:"filter"}),"Filter"),p.a.createElement(c.a,{size:"small",type:"white",onClick:function(){W(null),te(!0),ue({status:[],startDate:"",endDate:"",minAmount:"",maxAmount:"",searchQuery:""})}},p.a.createElement(f.a,null),"Reset Filter"))]}),p.a.createElement(E.b,null,p.a.createElement(u.a,{gutter:25},p.a.createElement(l.a,{sm:24,xs:24},p.a.createElement(h.a,{headless:!0},y.loading?p.a.createElement("div",{className:"spin"},p.a.createElement(o.a,null)):y.error?p.a.createElement("p",null,y.error):p.a.createElement(p.a.Fragment,null,p.a.createElement(u.a,{gutter:25},p.a.createElement(l.a,{span:18},p.a.createElement(i.a,{style:{height:"42px"},placeholder:"Search Quotes...",prefix:p.a.createElement(v.a,null),value:null===re||void 0===re?void 0:re.searchQuery,onChange:function(e){e.persist();var t=e.target.value;ue((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchQuery:t})}))}})),p.a.createElement(l.a,{span:6},p.a.createElement(c.a,{size:"large",type:"primary",disabled:ee,onClick:function(){var e,t,a,n,r,u;Q((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0})})),_.b.query({query:S.a.GET_ALL_QUOTE,variables:{query:{searchQuery:null!==(e=re.searchQuery)&&void 0!==e?e:"",statuses:null!==(t=re.status)&&void 0!==t?t:null,quoteEntryStartDate:null!==(a=re.startDate)&&void 0!==a?a:"",quoteEntryEndDate:null!==(n=re.endDate)&&void 0!==n?n:"",minAmount:null!==(r=parseFloat(re.minAmount))&&void 0!==r?r:null,maxAmount:null!==(u=parseFloat(re.maxAmount))&&void 0!==u?u:null}},context:{headers:{TENANTID:"100001",Authorization:Y}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSubmittedQuoteList;(null===a||void 0===a?void 0:a.status)&&Q(a)})).catch((function(e){Q((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){Q((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})})),$(!G)}))}},"Search"))),p.a.createElement("br",null),k&&p.a.createElement("div",{style:{marginBottom:"2.5em"}},p.a.createElement(u.a,{gutter:16},p.a.createElement(l.a,{span:8},"Status: ",p.a.createElement("br",null),p.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select status",size:"middle",mode:"multiple",value:null===re||void 0===re?void 0:re.status,onDeselect:function(e){return ue((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:t.status.filter((function(t){return t!==e}))})}))},onSelect:function(e){ue((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:re.status.concat(e)})}))},options:null===B||void 0===B?void 0:B.data.map((function(e){return{label:e.name,value:e.slug}}))})),p.a.createElement(l.a,{span:8},"Date: ",p.a.createElement("br",null),p.a.createElement(N,{style:{height:"40px",width:"100%"},size:"middle",allowClear:!0,picker:"date",value:""!==K?K:"",onChange:function(e){e?(ue((function(t){var a,n;return Object(s.a)(Object(s.a)({},t),{},{startDate:null!==(a=e[0]._d)&&void 0!==a?a:"",endDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),W(ie(e[0],e[1]))):W(null)}})),p.a.createElement(l.a,{span:8},"Amount: ",p.a.createElement("br",null),p.a.createElement(i.a.Group,{compact:!0,size:"default"},p.a.createElement(i.a,{type:"text",placeholder:"Min Amount",style:{width:"50%",height:"40px"},value:null!==(e=null===re||void 0===re?void 0:re.minAmount)&&void 0!==e?e:"",onChange:function(e){e.persist(),ue((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},{minAmount:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}),p.a.createElement(i.a,{type:"text",placeholder:"Max Ampunt",style:{width:"50%",height:"40px"},value:null!==(t=null===re||void 0===re?void 0:re.maxAmount)&&void 0!==t?t:"",onChange:function(e){e.persist(),ue((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},{maxAmount:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}))))),p.a.createElement("span",{className:"psp_list"},p.a.createElement(n.a,{className:"table-responsive",columns:le,pagination:{defaultPageSize:T.a.QUOTE_PER_PAGE,total:y.data?y.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}},rowKey:"id",size:"small",dataSource:y.data?y.data:[],rowClassName:function(e,t){return t%2===0?"":"altTableClass"}}))))))))}}}]);