(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[70],{958:function(e,t,a){"use strict";a.r(t);a(200);var r=a(97),n=(a(201),a(74)),o=(a(314),a(218)),u=(a(148),a(45)),i=(a(166),a(98)),s=(a(288),a(69)),l=(a(289),a(52)),c=a(23),d=a(0),p=a.n(d),m=a(217),g=a(165),_=a(164),b=a(287),E=a(58),f=a(12),h=a(317),A=a.n(h),v=a(71),T=a(68),y=a.n(T),G=a(22),O=a(76);t.default=function(){Object(G.f)("attribute-group");var e=Object(E.useLocation)().search,t=A.a.parse(e),a=Object(E.useHistory)(),h=Object(d.useState)(!0),T=Object(c.a)(h,2),j=T[0],N=T[1],I=Object(d.useState)(!1),R=Object(c.a)(I,2),x=R[0],L=R[1],S=l.a.useForm(),P=Object(c.a)(S,1)[0],q=Object(d.useState)({data:[],isLoading:!0}),z=Object(c.a)(q,2),D=z[0],U=z[1];Object(d.useEffect)((function(){t.id&&v.j.query({query:v.c.GET_SINGLE_ATTR_GROUP,variables:{query:{attr_group_id:parseInt(t.id)}},context:{headers:{TENANTID:"100001",Authorization:y.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleAttrGroup;U({data:a.data,isLoading:!1}),N(a.data.attrgroup_status)}))}),[]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(m.a,{title:t.id?"Manage Group | Edit ".concat(D.isLoading?"":"(".concat(D.data.attr_group_name,")")):"Add Attribute Group"}),p.a.createElement(g.b,null,p.a.createElement(r.a,{gutter:25},p.a.createElement(n.a,{sm:24,xs:24},p.a.createElement(_.a,{headless:!0},t.id&&D.isLoading?p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement(i.a,{tip:"processing..."})):p.a.createElement(l.a,{style:{width:"100%"},form:P,name:"addRole",onFinish:function(e){var r=e.attr_group_name,n=e.attrgroup_sortorder;if(L(!0),t.id){var o={data:{attr_group_id:parseInt(t.id),attr_group_name:r,attrgroup_sortorder:parseInt(n),attrgroup_status:j}};console.log(o),v.j.mutate({mutation:v.b.UPDATE_ATTR_GROUP,variables:o,refetchQueries:[{query:v.c.GET_ALL_ATTR_GROUPS,context:{headers:{TENANTID:"100001",Authorization:y.a.get("psp_t")}}},["getAllAttrGroups"]],context:{headers:{TENANTID:"100001",Authorization:y.a.get("psp_t")}}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updateAttrGroup;if(!(null===n||void 0===n?void 0:n.status))return Object(O.a)();setTimeout((function(){a.push("/admin/attributes/list-group")}),1e3),s.b.success("".concat(e.attr_group_name," updated successfully"))})).finally((function(){L(!1)}))}else{var u={data:{attr_group_name:r,attrgroup_sortorder:parseInt(n),attrgroup_status:j}};v.j.mutate({mutation:v.b.CREATE_ATTR_GROUP,variables:u,refetchQueries:[{query:v.c.GET_ALL_ATTR_GROUPS,context:{headers:{TENANTID:"100001",Authorization:y.a.get("psp_t")}}},["getAllAttrGroups"]],context:{headers:{TENANTID:"100001",Authorization:y.a.get("psp_t")}}}).then((function(t){var r,n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.createAttrGroup;if(!(null===n||void 0===n?void 0:n.status))return Object(O.a)();setTimeout((function(){a.push("/admin/attributes/list-group")}),1e3),s.b.success("".concat(e.attr_group_name," updated successfully"))})).finally((function(){L(!1)}))}},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},p.a.createElement(l.a.Item,{rules:[{required:!0,max:30,message:"Please enter Attribute Group Name"}],name:"attr_group_name",label:"Group Name",initialValue:t.id?D.data.attr_group_name:""},p.a.createElement(u.a,{placeholder:"Enter Attribute Group Name"})),p.a.createElement(l.a.Item,{rules:[{required:!0,max:30,message:"Please enter Role Name"}],name:"attrgroup_sortorder",label:"Sort order",initialValue:t.id?D.data.attrgroup_sortorder:""},p.a.createElement(u.a,{type:"number",placeholder:"Enter sort order"})),p.a.createElement(l.a.Item,{name:"attrgroup_status",label:"Status"},p.a.createElement(o.a,{checked:j,onChange:function(e){return N(e)}})),p.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},p.a.createElement(l.a.Item,null,p.a.createElement(b.a,{loading:x,size:"default",htmlType:"submit",type:"primary",raised:!0},x?"Processing":"Save"),p.a.createElement(f.b,{to:"/admin/attributes/list-group"},p.a.createElement(b.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);