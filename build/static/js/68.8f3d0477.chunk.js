(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[68],{939:function(e,t,a){"use strict";a.r(t);a(200);var n=a(97),r=(a(201),a(74)),s=(a(150),a(77)),i=(a(148),a(45)),l=(a(166),a(98)),o=(a(314),a(218)),c=(a(288),a(69)),u=a(9),m=a(23),d=a(0),p=a.n(d),_=a(192),E=a(21),f=a.n(E),v=a(217),b=a(165),g=a(164),h=a(287),O=a(12),S=a(71),j=a(68),P=a.n(j),y=a(126),A=a.n(y),I=a(135),N=a(223),C=a(50),x=a(22),k=a(76);t.default=function(){Object(x.f)("permission");var e=Object(C.c)(),t=Object(d.useState)({data:[],loading:!0,error:""}),a=Object(m.a)(t,2),E=a[0],j=a[1],y=Object(d.useState)(""),w=Object(m.a)(y,2),R=w[0],T=w[1],F=Object(d.useState)([]),L=Object(m.a)(F,2),z=L[0],U=L[1];Object(d.useEffect)((function(){S.j.query({query:S.e.GET_ALL_ROLES_PERMISSION,context:{headers:{TENANTID:"100001",Authorization:P.a.get("psp_t")}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.getAllRolesPermission;if(!(null===n||void 0===n?void 0:n.isAuth))return e(Object(N.b)());j((function(e){return Object(u.a)(Object(u.a)({},e),{},{data:null===n||void 0===n?void 0:n.data,error:""})}))})).finally((function(){j((function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:!1})}))}))}),[]);var D=[{title:"Permission Name",dataIndex:"roles_permission_name",key:"roles_permission_name",sorter:function(e,t){return e.roles_permission_name.toUpperCase()>t.roles_permission_name.toUpperCase()?1:-1}},{title:"Permission Alias",dataIndex:"roles_permission_slug",key:"roles_permission_slug",sorter:function(e,t){return e.roles_permission_slug.toUpperCase()>t.roles_permission_slug.toUpperCase()?1:-1}},{title:"Status",dataIndex:"roles_permission_status",key:"roles_permission_status",align:"middle",width:120,sorter:function(e,t){return e.roles_permission_status===t.roles_permission_status?0:e.roles_permission_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.roles_permission_status===e},render:function(e,t){return p.a.createElement(o.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,t){var a={data:{id:e.id,roles_permission_status:t}};S.j.mutate({mutation:S.d.UPDATE_ROLES_PERMISSION,variables:a,context:{headers:{TENANTID:"100001",Authorization:P.a.get("psp_t")}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateRolesPermission;if(!(null===n||void 0===n?void 0:n.status))return Object(k.a)();c.b.success("".concat(e.roles_permission_name," Permission Status updated successfully."))}))}(t,e)}})}},{title:"Action",dataIndex:"action",align:"right",render:function(e,t){return p.a.createElement(p.a.Fragment,null,p.a.createElement(O.b,{to:"/admin/permission/add?id=".concat(t.id)},p.a.createElement(A.a,{name:"edit",style:{margin:".5em 1em",color:"#5F63F2"}})))},key:"last_name"}];return p.a.createElement(p.a.Fragment,null,p.a.createElement(v.a,{title:"Permissions",buttons:[p.a.createElement("div",{key:"1",className:"page-header-actions"},p.a.createElement(O.b,{to:"/admin/permission/add"},p.a.createElement(h.a,{size:"small",title:"Add Permission",type:"primary"},p.a.createElement(f.a,{icon:"file-plus"}))))]}),p.a.createElement(b.b,null,p.a.createElement(n.a,{gutter:25},p.a.createElement(r.a,{sm:24,xs:24},p.a.createElement(g.a,{headless:!0},E.loading?p.a.createElement("div",{className:"spin"},p.a.createElement(l.a,null)):E.error?p.a.createElement("p",null,E.error):p.a.createElement(p.a.Fragment,null,p.a.createElement(i.a,{placeholder:"Search Permission...",prefix:p.a.createElement(_.a,null),onChange:function(e){var t=e.target.value;T(t),U(E.data.filter((function(e){return null===e||void 0===e?void 0:e.roles_permission_name.toLowerCase().includes(t.toLowerCase())})))}}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("span",{className:"psp_list"},p.a.createElement(s.a,{className:"table-responsive",columns:D,rowKey:"id",size:"small",dataSource:R?z:E.data,rowClassName:function(e,t){return t%2===0?"":"altTableClass"},pagination:{defaultPageSize:I.a.PERMISSIONS_PER_PAGE,total:R?z.length:E.length,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);