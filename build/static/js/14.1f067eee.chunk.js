(this.webpackJsonpstrikingDash=this.webpackJsonpstrikingDash||[]).push([[14],{564:function(e,a,t){"use strict";t.r(a);t(140);var n=t(74),r=(t(141),t(34)),l=(t(250),t(187)),i=t(9),s=(t(477),t(482)),o=t(45),c=(t(478),t(481)),m=t(0),d=t.n(m),u=t(21),E=t.n(u),b=t(452),f=t(451),g=t(453),p=t(448),h=t(8),y=t(40),A=t(125),N=t(199),j=c.a.Option;a.default=function(){var e=Object(m.useState)({roles:[],isLoading:!0,error:null}),a=Object(o.a)(e,2),t=a[0],u=a[1],O=Object(m.useState)(!1),L=Object(o.a)(O,2),w=L[0],v=L[1],P=Object(y.d)((function(e){return e.auth.token})),I=s.a.useForm(),F=Object(o.a)(I,1)[0];Object(m.useEffect)((function(){u((function(e){return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0})})),A.c.query({query:A.b.GET_ALL_ROLES_QUERY,context:{headers:{TENANTID:100001,Authorization:P}}}).then((function(e){var a,t,n=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.getAllRoles)||void 0===t?void 0:t.data;n&&u((function(e){return Object(i.a)(Object(i.a)({},e),{},{roles:n})}))})).catch((function(e){console.log("\ud83d\ude80 ~ file: AddAdmin.js ~ line 46 ~ useEffect ~ err",e)})).finally((function(){u((function(e){return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1})}))}))}),[]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,{title:"Add Admin",buttons:[d.a.createElement("div",{key:"1",className:"page-header-actions"},d.a.createElement(h.b,{to:"/admin/admin/admins"},d.a.createElement(p.a,{size:"small",type:"primary"},d.a.createElement(E.a,{icon:"users",size:14}),"List Admin")))]}),d.a.createElement(f.b,null,d.a.createElement(n.a,{gutter:25},d.a.createElement(r.a,{sm:24,xs:24},d.a.createElement(g.a,{title:"About Admin"},d.a.createElement(s.a,{style:{width:"100%"},form:F,name:"addProduct",onFinish:function(e){v(!0),A.c.mutate({mutation:A.a.ADMIN_SIGN_UP,variables:{data:Object(i.a)(Object(i.a)({},e),{},{roleNo:e.roleNo+""})},context:{headers:{TENANTID:100001,Authorization:P}}}).then((function(e){if(console.log("add product res",e),e.data.adminSignUp.status)return N.b.success("New Admin Added.");N.b.error("Soemthing Went wrong !!")})).catch((function(e){console.log("add product err",e),N.b.error("Soemthing Went wrong !!")})).finally((function(){return v(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},d.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please enter First Name"}],name:"first_name",label:"First Name"},d.a.createElement(l.a,{placeholder:"Enter First Name"})),d.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please enter Last Name"}],name:"last_name",label:"Last Name"},d.a.createElement(l.a,{placeholder:"Enter Last Name"})),d.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please enter an email"}],name:"email",label:"Email"},d.a.createElement(l.a,{type:"email",placeholder:"Enter Email Address"})),d.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please enter a password"}],name:"password",label:"Password"},d.a.createElement(l.a.Password,{type:"password",placeholder:"Enter Password..."})),d.a.createElement(s.a.Item,{rules:[{required:!0,message:"Please select a role"}],name:"roleNo",initialValue:"",label:"Role",tooltip:t.isLoading?"Loading roles....":null},d.a.createElement(c.a,{placeholder:"Select Company",loading:t.isLoading,disabled:t.isLoading,style:{width:"100%"},size:"large"},t.roles.map((function(e){return d.a.createElement(j,{key:e.role_uuid,value:e.role_no},e.role)})))),d.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"3em"}},d.a.createElement(s.a.Item,null,d.a.createElement(p.a,{className:"btn-cancel",size:"large",onClick:function(){return F.resetFields()}},"CLear"),d.a.createElement(p.a,{loading:w,size:"default",htmlType:"submit",type:"primary",raised:!0},w?"Processing":"Add Admin")))))))))}}}]);