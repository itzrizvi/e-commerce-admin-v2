(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[39],{1036:function(e,t,a){"use strict";a.r(t);a(131);var n=a(63),l=(a(132),a(47)),i=(a(167),a(35)),m=(a(119),a(39)),d=(a(133),a(73)),r=a(7),u=(a(200),a(27)),o=a(15),E=a(0),s=a.n(E),c=a(120),T=a(101),p=a(100),A=a(99),g=a(59),_=a(10),L=a(48),b=a(31),O=a(102),v=a(23),I=a(628);t.default=function(){var e,t;Object(v.c)("email-template");var a=Object(g.useParams)(),y=Object(g.useHistory)(),j=Object(L.d)((function(e){return e.auth.token})),f=Object(E.useState)(!1),h=Object(o.a)(f,2),M=h[0],S=h[1],P=Object(E.useState)([]),q=Object(o.a)(P,2),N=q[0],F=q[1],$=Object(E.useState)({data:{},loading:!0,error:""}),H=Object(o.a)($,2),D=H[0],G=H[1],w=u.a.useForm(),C=Object(o.a)(w,1)[0];return Object(E.useEffect)((function(){O.b.query({query:I.a.SINGLE_EMAIL_TEMPLATE_LIST,variables:{query:{id:parseInt(null===a||void 0===a?void 0:a.id)}},context:{headers:{TENANTID:"100001",Authorization:j}},fetchPolicy:"network-only"}).then((function(e){var t,a,n,l=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getSingleEmailTemplateList;l.status&&(G({data:null===l||void 0===l?void 0:l.data,loading:!1,error:""}),C.setFieldsValue({name:null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.name,email_template_id:null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.email_template_id}))})).catch((function(e){console.log(e),G({data:{},loading:!1,error:"Something went worng"})}))}),[]),Object(E.useEffect)((function(){O.b.query({query:I.a.GET_EMAIL_TEMPLATE_CONTENT_LIST,context:{headers:{TENANTID:"100001",Authorization:j}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getEmailTemplateList;F(null===a||void 0===a?void 0:a.data)})).catch((function(e){F([]),console.log("\ud83d\ude80 ~ file: AddTemplate.js:83 ~ useEffect ~ err",e)}))}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{title:"Manage Email Template | Edit Email Template ".concat((null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.name)?"(".concat(null===D||void 0===D||null===(t=D.data)||void 0===t?void 0:t.name,")"):"")}),s.a.createElement(T.b,null,s.a.createElement(n.a,{gutter:25},s.a.createElement(l.a,{sm:24,xs:24},s.a.createElement(p.a,{headless:!0},D.loading?s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(d.a,{tip:"processing..."})):s.a.createElement(u.a,{style:{width:"100%"},form:C,name:"EditEmailTemplate",onFinish:function(e){S(!0),O.b.mutate({mutation:I.a.UPDATE_EMAIL_TEMPLATE_LIST,variables:{data:Object(r.a)(Object(r.a)({},e),{},{id:parseInt(null===a||void 0===a?void 0:a.id)})},refetchQueries:[{query:I.a.GET_EMAIL_TEMPLATE_LIST,context:{headers:{TENANTID:"100001",Authorization:j}},fetchPolicy:"network-only"},["getAllEmailTemplateList"]],context:{headers:{TENANTID:"100001",Authorization:j}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.updateEmailTemplateOnList;if(!(null===a||void 0===a?void 0:a.status))return b.b.error("Something Went wrong !!");setTimeout((function(){y.push("/admin/email/template/list")}),1e3),b.b.success(null===a||void 0===a?void 0:a.message)})).catch((function(e){b.b.error("Something Went wrong !!")})).finally((function(){return S(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},s.a.createElement(u.a.Item,{rules:[{required:!0,max:100,message:"Please Enter Template Name"}],name:"name",label:"Name"},s.a.createElement(m.a,{placeholder:"Enter Template Name"})),s.a.createElement(u.a.Item,{name:"email_template_id",label:"Email Content"},s.a.createElement(i.a,{style:{width:"100%"},placeholder:"Select Email Template Content",optionLabelProp:"label"},null===N||void 0===N?void 0:N.map((function(e){return s.a.createElement(i.a.Option,{value:e.id,label:e.name},s.a.createElement("div",{className:"demo-option-label-item"},e.name))})))),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement(u.a.Item,null,s.a.createElement(A.a,{loading:M,size:"default",htmlType:"submit",type:"primary",raised:!0},M?"Processing":"Save"),s.a.createElement(_.b,{to:"/admin/email/template/list"},s.a.createElement(A.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}},628:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n,l,i,m,d,r,u,o,E,s,c,T,p,A=a(8),g=a(17),_={GET_EMAIL_HEADER_FOOTER_LIST:Object(g.d)(n||(n=Object(A.a)(["\n    query getEmailTempHeaderFooterList {\n      getEmailTempHeaderFooterList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_HEADER_FOOTER:Object(g.d)(l||(l=Object(A.a)(["\n    mutation addEmailTempHeaderFooter($data: AddEmailTempHFInput) {\n      addEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_HEADER_FOOTER:Object(g.d)(i||(i=Object(A.a)(["\n    query getSingleEmailTempHeaderFooter($query: GetSingleEmailHeaderFooterInput) {\n      getSingleEmailTempHeaderFooter(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          type\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),EMAIL_TEMPLATE_HEADER_FOOTER_UPDATE:Object(g.d)(m||(m=Object(A.a)(["\n    mutation updateEmailTempHeaderFooter($data: UpdateEmailTempHFInput) {\n      updateEmailTempHeaderFooter(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_LIST:Object(g.d)(d||(d=Object(A.a)(["\n    query getAllEmailTemplateList {\n      getAllEmailTemplateList {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),ADD_EMAIL_TEMPLATE_LIST:Object(g.d)(r||(r=Object(A.a)(["\n    mutation addEmailTemplateOnList($data: AddEmailTemplateListInput) {\n      addEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),SINGLE_EMAIL_TEMPLATE_LIST:Object(g.d)(u||(u=Object(A.a)(["\n    query getSingleEmailTemplateList($query: GetSingleEmailTemplateListInput) {\n      getSingleEmailTemplateList(query: $query) {\n        message\n        status\n        data {\n          id\n          email_template_id\n          name\n          slug\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_LIST:Object(g.d)(o||(o=Object(A.a)(["\n    mutation updateEmailTemplateOnList($data: UpdateEmailTemplateListInput) {\n      updateEmailTemplateOnList(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),CREATE_EMAIL_TEMPLATE:Object(g.d)(E||(E=Object(A.a)(["\n    mutation createEmailTemplate($data: addEmailTemplateInput) {\n      createEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_CONTENT_LIST:Object(g.d)(s||(s=Object(A.a)(["\n    query getEmailTemplateList {\n      getEmailTemplateList {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n          }\n          emailFooter {\n            id\n            name\n            slug\n          }\n        }\n      }\n    }\n  "]))),GET_SINGLE_EMAIL_CONTENT_TEMPLATE:Object(g.d)(c||(c=Object(A.a)(["\n    query getSingleEmailTemplate($query: GetSingleEmailTemplateInput) {\n      getSingleEmailTemplate(query: $query) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          createdAt\n          updatedAt\n          emailHeader {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n          emailFooter {\n            id\n            name\n            slug\n            content\n            type\n            createdAt\n            updatedAt\n          }\n        }\n      }\n    }\n  "]))),UPDATE_EMAIL_TEMPLATE_CONTENT:Object(g.d)(T||(T=Object(A.a)(["\n    mutation updateEmailTemplate($data: updateEmailTemplateInput) {\n      updateEmailTemplate(data: $data) {\n        message\n        status\n      }\n    }\n  "]))),GET_EMAIL_TEMPLATE_PREVIEW:Object(g.d)(p||(p=Object(A.a)(["\n    query getEmailTemplatePreview($query: GetEmailTemplatePreviewInput) {\n      getEmailTemplatePreview(query: $query) {\n        message\n        status\n        tenant_id\n        data\n      }\n    }\n  "])))}}}]);