(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[70],{1021:function(e,t,a){"use strict";a.r(t);a(131);var n=a(69),r=(a(142),a(30)),i=(a(140),a(65)),l=(a(141),a(50)),c=(a(113),a(38)),o=(a(130),a(72)),u=(a(295),a(212)),s=a(7),d=a(8),m=a(14),p=(a(625),a(628)),b=a(0),v=a.n(b),f=a(19),g=a.n(f),h=a(118),E=a(99),_=a(97),y=a(98),O=a(3),j={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"},A=a(16),P=function(e,t){return b.createElement(A.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:j}))};P.displayName="RetweetOutlined";var S,x=b.forwardRef(P),I=a(190),D=a(12),C=a(23),L=a(28),T=a(101),w=a.n(T),k=a(70),N=a.n(k),z=a(120),U=a(153),q=a(214),F=a(17),R=a(33),Y=a(361),G=a.n(Y),M=p.a.RangePicker;t.default=function(){var e,t;Object(C.c)("product");var a=Object(b.useState)({data:[],isLoading:!1}),p=Object(m.a)(a,2),f=p[0],O=p[1],j=Object(b.useState)(!1),A=Object(m.a)(j,2),P=A[0],T=A[1],k=Object(b.useState)(!0),Y=Object(m.a)(k,2),Q=Y[0],V=Y[1],B=Object(b.useState)({data:[],isLoading:!0}),W=Object(m.a)(B,2),H=W[0],J=W[1],K=Object(b.useState)({data:[],isLoading:!0}),X=Object(m.a)(K,2),Z=X[0],$=X[1],ee=Object(b.useState)({data:[],isLoading:!0}),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(b.useState)({data:[],isLoading:!0}),ie=Object(m.a)(re,2),le=ie[0],ce=ie[1],oe=Object(b.useState)(null),ue=Object(m.a)(oe,2),se=ue[0],de=ue[1],me=Object(b.useState)({availability:[],categories:[],condition:[],attributes:[],startDate:"",endDate:"",minPrice:"",maxPrice:"",searchQuery:""}),pe=Object(m.a)(me,2),be=pe[0],ve=pe[1];Object(b.useEffect)((function(){L.j.query({query:L.l.GET_ALL_CATEGORIES,context:{headers:{TENANTID:"100001"}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllCategories;if(a.status&&a.categories.length){var n=[];a.categories.forEach((function(e){var t=e.cat_name;n.push({cat_name:t,id:e.id}),e.subcategories&&e.subcategories.forEach((function(e){var a=e.cat_name;n.push({cat_name:"".concat(t," > ").concat(a),id:e.id}),e.subsubcategories&&e.subsubcategories.forEach((function(e){var r=e.cat_name;n.push({cat_name:"".concat(t," > ").concat(a," > ").concat(r),id:e.id})}))}))})),J({data:n,isLoading:!1})}})).catch((function(e){})),L.j.query({query:Object(F.d)(S||(S=Object(d.a)(["\n          query getAllAttributes {\n            getAllAttributes {\n              message\n              status\n              tenant_id\n              data {\n                id\n                attribute_name\n              }\n            }\n          }\n        "]))),context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllAttributes;a.status&&$({data:a.data,isLoading:!1})})),L.j.query({query:L.m.GET_ALL_AVAILABILITY,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllProductAvailabilityStatus;a.status&&ne({data:a.data,isLoading:!1})})),L.j.query({query:L.m.GET_ALL_CONDITIONS,context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getAllProductCondition;a.status&&ce({data:a.data,isLoading:!1})}))}),[]);var fe=[{title:"ID",dataIndex:"id",key:"id",width:70,ellipsis:!0,sorter:function(e,t){return e.id.toUpperCase()>t.id.toUpperCase()?1:-1}},{title:"Logo",dataIndex:"id",key:"id",width:70,render:function(e,t){return v.a.createElement(q.LazyLoadImage,{effect:"blur",width:"40",src:Object(U.renderImage)(t.id,t.prod_thumbnail,"product/image/thumbnail","128x128"),onError:U.errorImageSrc,alt:t.id})}},{title:"Product Name",dataIndex:"prod_name",key:"prod_name",ellipsis:!0,sorter:function(e,t){return e.prod_name.toUpperCase()>t.prod_name.toUpperCase()?1:-1}},{title:"Product SKU",dataIndex:"prod_sku",key:"prod_sku",ellipsis:!0,sorter:function(e,t){return e.prod_sku.toUpperCase()>t.prod_sku.toUpperCase()?1:-1}},{title:"Part NO",dataIndex:"prod_partnum",key:"prod_partnum",ellipsis:!0,sorter:function(e,t){return e.prod_partnum.toUpperCase()>t.prod_partnum.toUpperCase()?1:-1}},{title:"Regular Price",dataIndex:"prod_regular_price",key:"prod_regular_price",ellipsis:!0,align:"center",sorter:function(e,t){return e.prod_regular_price>t.prod_regular_price?1:-1}},{title:"Sales Price",dataIndex:"prod_sale_price",key:"prod_sale_price",ellipsis:!0,align:"center",sorter:function(e,t){return e.prod_sale_price>t.prod_sale_price?1:-1}},{title:"Status",dataIndex:"prod_status",key:"prod_status",width:80,align:"middle",sorter:function(e,t){return e.prod_status===t.prod_status?0:e.prod_status?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.prod_status===e},render:function(e,t){return v.a.createElement(u.a,{defaultChecked:e,title:"Status",onChange:function(e){return function(e,t){L.j.mutate({mutation:L.k.UPDATE_PRODUCT,variables:{data:{prod_id:e.id,prod_status:t}},context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateProduct;if(!n.status)return R.b.error(n.message);R.b.success("".concat(e.prod_sku," status updated."))})).catch((function(e){return R.b.error("Something Went wrong !!")}))}(t,e)}})}},{title:"On Sale",dataIndex:"is_sale",key:"is_sale",align:"center",width:90,sorter:function(e,t){return e.is_sale===t.is_sale?0:e.is_sale?-1:1},filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:function(e,t){return t.is_sale===e},render:function(e,t){return v.a.createElement(u.a,{defaultChecked:e,title:"Is Sale",onChange:function(e){return function(e,t){L.j.mutate({mutation:L.k.UPDATE_PRODUCT,variables:{data:{prod_id:e.id,is_sale:t}},context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}}}).then((function(t){var a,n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.updateProduct;if(!n.status)return R.b.error(n.message);R.b.success("".concat(e.prod_sku," status updated."))})).catch((function(e){return R.b.error("Something Went wrong !!")}))}(t,e)}})}},{title:"Action",dataIndex:"action",width:140,align:"center",render:function(e,t){return v.a.createElement(v.a.Fragment,null,v.a.createElement(D.b,{to:"/admin/products/view?id=".concat(t.id)},v.a.createElement(w.a,{name:"eye",style:{margin:".5em 1em",color:"rgb(46, 204, 113)"}})),v.a.createElement(D.b,{to:"/admin/products/edit?id=".concat(t.id)},v.a.createElement(w.a,{name:"edit",style:{margin:".5em 1em",color:"#5F63F2"}})))},key:"last_name"}],ge=function(e,t){return[G()(e,"YYYY-MM-DD"),G()(t,"YYYY-MM-DD")]};return v.a.createElement(v.a.Fragment,null,v.a.createElement(h.a,{title:"Products",buttons:[v.a.createElement("div",{key:"1",className:"page-header-actions"},v.a.createElement(y.a,{size:"small",type:"white",onClick:function(){return V((function(e){return!e}))}},v.a.createElement(g.a,{icon:"filter"}),"Filter"),v.a.createElement(y.a,{size:"small",type:"white",onClick:function(){de(null),ve({availability:[],categories:[],condition:[],attributes:[],startDate:"",endDate:"",minPrice:"",maxPrice:"",searchQuery:""})}},v.a.createElement(x,null),"Reset Filter"),v.a.createElement(D.b,{to:"/admin/products/add"},v.a.createElement(y.a,{size:"small",title:"Add Product",type:"primary"},v.a.createElement(g.a,{icon:"file-plus"}))))]}),v.a.createElement(E.b,null,v.a.createElement(i.a,{gutter:25},v.a.createElement(l.a,{sm:24,xs:24},v.a.createElement(_.a,{headless:!0},f.isLoading?v.a.createElement("div",{className:"spin"},v.a.createElement(o.a,null)):v.a.createElement(v.a.Fragment,null,v.a.createElement(i.a,{gutter:25},v.a.createElement(l.a,{span:15},v.a.createElement(c.a,{placeholder:"Search Products...",prefix:v.a.createElement(I.a,null),value:null===be||void 0===be?void 0:be.searchQuery,onChange:function(e){e.persist();var t=e.target.value;ve((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchQuery:t})}))}})),v.a.createElement(l.a,{span:9},v.a.createElement(y.a,{size:"large",type:"primary",onClick:function(){var e,t,a,n,r;O((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0})})),L.j.query({query:L.l.GET_PRODUCT_LIST,variables:{query:{searchQuery:null!==(e=be.searchQuery)&&void 0!==e?e:"",availability:be.availability.length?be.availability:null,attribute:be.attributes.length?be.attributes:null,category:be.categories.length?be.categories:null,condition:be.condition.length?be.condition:null,productEntryStartDate:null!==(t=be.startDate)&&void 0!==t?t:"",productEntryEndDate:null!==(a=be.endDate)&&void 0!==a?a:"",minPrice:null!==(n=parseFloat(be.minPrice))&&void 0!==n?n:null,maxPrice:null!==(r=parseFloat(be.maxPrice))&&void 0!==r?r:null}},context:{headers:{TENANTID:"100001",Authorization:N.a.get("psp_t")}},fetchPolicy:"cache-first"}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.getProductList;(null===a||void 0===a?void 0:a.status)&&O(a)})).catch((function(e){O((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){O((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})})),T(!P)}))}},"Search"))),v.a.createElement("br",null),v.a.createElement("br",null),Q&&v.a.createElement("div",{style:{marginBottom:"2.5em"}},v.a.createElement(i.a,{gutter:16},v.a.createElement(l.a,{span:8},"Availability: ",v.a.createElement("br",null),v.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select status",size:"middle",mode:"multiple",value:null===be||void 0===be?void 0:be.availability,onDeselect:function(e){return ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{availability:t.availability.filter((function(t){return t!==e}))})}))},onSelect:function(e){ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{availability:be.availability.concat(parseInt(e))})}))},options:ae.data.map((function(e){return{label:e.name,value:e.id}}))})),v.a.createElement(l.a,{span:8},"Category: ",v.a.createElement("br",null),v.a.createElement(r.a,{style:{width:"100%"},placeholder:H.isLoading?"Loading..":"Select category",size:"middle",mode:"multiple",optionFilterProp:"label",value:null===be||void 0===be?void 0:be.categories,onDeselect:function(e){return ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{categories:t.categories.filter((function(t){return t!==e}))})}))},onSelect:function(e){ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{categories:be.categories.concat(parseInt(e))})}))},options:H.data.map((function(e){return{label:e.cat_name,value:e.id}}))})),v.a.createElement(l.a,{span:8},"Date: ",v.a.createElement("br",null),v.a.createElement(M,{style:{height:"40px",width:"100%"},size:"small",allowClear:!0,picker:"date",value:""!==se?se:"",onChange:function(e){e?(ve((function(t){var a,n;return Object(s.a)(Object(s.a)({},t),{},{startDate:null!==(a=e[0]._d)&&void 0!==a?a:"",endDate:null!==(n=e[1]._d)&&void 0!==n?n:""})})),de(ge(e[0],e[1]))):de(null)}}))),v.a.createElement(i.a,{gutter:16,style:{marginTop:".5em"}},v.a.createElement(l.a,{span:8},"Condition: ",v.a.createElement("br",null),v.a.createElement(r.a,{style:{width:"100%"},placeholder:"Select Condition",size:"middle",mode:"multiple",value:null===be||void 0===be?void 0:be.condition,onDeselect:function(e){return ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{condition:t.condition.filter((function(t){return t!==e}))})}))},onSelect:function(e){ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{condition:be.condition.concat(parseInt(e))})}))},options:le.data.map((function(e){return{label:e.name,value:e.id}}))})),v.a.createElement(l.a,{span:8},"Attributes: ",v.a.createElement("br",null),v.a.createElement(r.a,{style:{width:"100%"},placeholder:Z.isLoading?"Loading..":"Select Attribute",size:"middle",mode:"multiple",value:null===be||void 0===be?void 0:be.attributes,onDeselect:function(e){return ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{attributes:t.attributes.filter((function(t){return t!==e}))})}))},onSelect:function(e){ve((function(t){return Object(s.a)(Object(s.a)({},t),{},{attributes:be.attributes.concat(parseInt(e))})}))},options:Z.data.map((function(e){return{label:e.attribute_name,value:e.id}}))})),v.a.createElement(l.a,{span:8},"Price: ",v.a.createElement("br",null),v.a.createElement(c.a.Group,{compact:!0,size:"default"},v.a.createElement(c.a,{type:"text",placeholder:"Min",style:{width:"50%"},value:null!==(e=null===be||void 0===be?void 0:be.minPrice)&&void 0!==e?e:"",onChange:function(e){e.persist(),ve((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},{minPrice:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}),v.a.createElement(c.a,{type:"text",placeholder:"Max",style:{width:"50%"},value:null!==(t=null===be||void 0===be?void 0:be.maxPrice)&&void 0!==t?t:"",onChange:function(e){e.persist(),ve((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},{maxPrice:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}))}}))))),v.a.createElement("span",{className:"psp_list"},v.a.createElement(n.a,{className:"table-responsive",columns:fe,rowKey:"id",size:"small",dataSource:f.data?f.data:[],rowClassName:function(e,t){return t%2==0?"":"altTableClass"},pagination:{defaultPageSize:z.a.PRODUCTS_PER_PAGE,total:f.data?f.data.length:0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}}}))))))))}}}]);