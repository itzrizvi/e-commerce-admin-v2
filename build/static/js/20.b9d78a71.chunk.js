(this.webpackJsonpprimeServerParts=this.webpackJsonpprimeServerParts||[]).push([[20],{622:function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));var a,r,i,l,u,d,o,c=t(12),s=t(30),m={BANNER_ADD:Object(s.d)(a||(a=Object(c.a)(["\n    mutation addBanner($data: BannerInput) {\n        addBanner(data: $data) {\n        message\n        status\n        data {\n            banner_uuid\n        }\n      }\n    }"]))),BANNER_IMAGE_ADD:Object(s.d)(r||(r=Object(c.a)(["\n    mutation addBannerImage($data: BannerImageInput!) {\n      addBannerImage(data: $data) {\n        message\n        status\n        data {\n          banner_uuid\n          title\n          link\n          sort_order\n        }\n      }\n    }"]))),GET_ALL_BANNER:Object(s.d)(i||(i=Object(c.a)(["\n    query getAllBanners{\n      getAllBanners {\n        message\n        status\n        tenant_id\n        data {\n          banner_uuid\n          banner_name\n          banner_slug\n          banner_status\n          createdAt\n        }\n      }\n    }"]))),GET_SINGLE_BANNER:Object(s.d)(l||(l=Object(c.a)(["\n    query getSingleBanner($banner_uuid : UUID!){\n    getSingleBanner(query: {banner_uuid: $banner_uuid}) {\n      message\n      tenant_id\n      status\n      data {\n        banner_uuid\n        banner_name\n        banner_status\n        bannerimages {\n          banner_uuid \n          image\n          link\n          sort_order\n          title\n        }\n      }\n    }\n  }"]))),BANNER_UPDATE:Object(s.d)(u||(u=Object(c.a)(["\n  mutation updateBanner($data: UpdateBannerInput){\n    updateBanner(data:$data){\n      message\n      status\n    }\n  }"]))),BANNER_IMAGE_UPDATE:Object(s.d)(d||(d=Object(c.a)(["\n    mutation updateBannerImage($data: UpdateBannerImageInput){\n    updateBannerImage(data: $data) {\n      message\n      status\n    }\n  }"]))),BANNER_IMAGE_DELETE:Object(s.d)(o||(o=Object(c.a)(["\n    mutation deleteBannerImage($banner_uuid: UUID!) {\n      deleteBannerImage(data: {banner_uuid: $banner_uuid}) {\n        message\n        status\n        tenant_id\n      }\n    }"])))}},874:function(e,n,t){"use strict";t.r(n);t(129);var a=t(66),r=(t(130),t(41)),i=(t(279),t(131)),l=(t(254),t(146)),u=t(176),d=(t(605),t(604)),o=(t(142),t(67)),c=t(11),s=(t(278),t(58)),m=t(33),g=t(0),b=t.n(g),f=t(145),E=t(144),p=t(143),_=t(175),h=t(54),B=t(10),A=t(42),v=t(46),y=t(349),I=t(622),N=t(281),O=t(257),j=t(282),k=t(25),T=t.n(k);n.default=function(){var e=Object(h.useHistory)(),n=Object(A.d)((function(e){return e.auth.token})),t=Object(g.useState)(!1),k=Object(m.a)(t,2),S=k[0],x=k[1],D=Object(g.useState)(!0),L=Object(m.a)(D,2),w=L[0],C=L[1],R=Object(g.useState)(""),U=Object(m.a)(R,2),$=U[0],z=U[1],G=s.a.useForm(),P=Object(m.a)(G,1)[0],F={id:(new Date).getTime(),title:"",link:"",image:"",sort_order:"",action:""},q=Object(g.useState)([F]),M=Object(m.a)(q,2),J=M[0],W=M[1],H=function(e){var n="image/jpeg"===e.type;n||v.b.error("You can only upload JPG file!");var t=e.size/1024/1024<1;return t||v.b.error("Image must smaller than 1MB!"),n&&t&&z(e),!1},K=b.a.createElement("div",null,b.a.createElement(y.a,null),b.a.createElement("div",{style:{marginTop:8}}," Upload ")),Q=function(e){if(e&&"target"in e&&"getAttribute"in e.target){var n=e.target.getAttribute("data-id");if(n)J.map((function(e){return e.id==n&&(e.image=$),e}))}},Y=[{title:"Title",dataIndex:"title",key:"title",render:function(e,n){return b.a.createElement(o.a,{type:"text",placeholder:"Title",onChange:function(e){return n.title=e.target.value}})}},{title:"Link",dataIndex:"link",key:"link",render:function(e,n){return b.a.createElement(o.a,{type:"text",placeholder:"Link",onChange:function(e){return n.link=e.target.value}})}},{title:"Image",dataIndex:"image",key:"image",render:function(e,n){return b.a.createElement(d.a,{name:"avatar",listType:"picture-card","data-id":n.id,className:"avatar-uploader",showUploadList:!1,beforeUpload:H,onChange:Q(event),fileList:[]},n.image?b.a.createElement(j.LazyLoadImage,{src:URL.createObjectURL(n.image),onError:O.errorImageSrc,alt:"image",style:{width:"100%"}}):K)}},{title:"Sort Order",dataIndex:"sort_order",key:"sort_order",width:150,render:function(e,n){return b.a.createElement(o.a,{type:"number",placeholder:"Sort Order",onChange:function(e){return n.sort_order=parseInt(e.target.value)}})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,n){return b.a.createElement(_.a,{size:"",title:"Remove",type:"danger",onClick:function(){return V(n.id)}},b.a.createElement(T.a,{icon:"minus"}))}}],V=function(e){W((function(n){return n.filter((function(n){return n.id!==e}))}))};return b.a.createElement(b.a.Fragment,null,b.a.createElement(f.a,{title:"Add Banner"}),b.a.createElement(E.b,null,b.a.createElement(a.a,{gutter:25},b.a.createElement(r.a,{sm:24,xs:24},b.a.createElement(p.a,{headless:!0},b.a.createElement(s.a,{style:{width:"100%"},form:P,name:"addBanner",onFinish:function(t){var a=!0;if(J.forEach((function(e){if(a&&(""==e.image||""==e.title))return v.b.info("Please Provide All Banner Image First!"),void(a=!1)})),a){x(!0);var r=Object(c.a)(Object(c.a)({},t),{},{banner_status:w});N.b.mutate({mutation:I.a.BANNER_ADD,variables:{data:r},context:{headers:{TENANTID:"100001",Authorization:n}},refetchQueries:[{query:I.a.GET_ALL_BANNER,context:{headers:{TENANTID:"100001",Authorization:n}}},"getAllBanners"]}).then((function(e){var t,a,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.addBanner;if(!(null===r||void 0===r?void 0:r.status))return v.b.error("Something Went wrong !");var i=null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.banner_uuid;J.forEach((function(e){N.a.mutate({mutation:I.a.BANNER_IMAGE_ADD,variables:{data:{banner_id:i,title:e.title,sort_order:e.sort_order,link:e.link,image:e.image}},context:{headers:{TENANTID:"100001",Authorization:n}}}).then((function(e){console.log(e)})).catch((function(e){v.b.error("Something Went wrong !!")}))}))})).catch((function(e){v.b.error("Something Went wrong !!!")})).finally((function(){x(!1),e.push("/admin/banner/list"),v.b.success("Banner Added Successfully!"),setTimeout((function(){window.location.reload()}),2e3)}))}},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},b.a.createElement(s.a.Item,{rules:[{required:!0,max:50,message:"Please Enter Banner Name"}],name:"banner_name",label:"Banner Name"},b.a.createElement(o.a,{placeholder:"Enter Banner Name"})),b.a.createElement(s.a.Item,{label:"Status"},b.a.createElement(l.a,{checked:w,onChange:function(e){return C(e)},checkedChildren:"ON",unCheckedChildren:"OFF"})),b.a.createElement(i.a,{className:"table-responsive",columns:Y,pagination:!1,rowKey:"id",size:"small",dataSource:J}),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",marginBottom:"10px"}},b.a.createElement(_.a,{size:"small",title:"Add Banner",htmlType:"button",type:"primary"},b.a.createElement(T.a,{icon:"plus",onClick:function(){var e={id:(new Date).getTime(),title:"",link:"",image:"",sort_order:""};W((function(n){return[].concat(Object(u.a)(n),[e])}))}}))),b.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},b.a.createElement(s.a.Item,null,b.a.createElement(_.a,{loading:S,size:"default",htmlType:"submit",type:"primary",raised:!0},S?"Processing":"Save"),b.a.createElement(B.b,{to:"/admin/banner/list"},b.a.createElement(_.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);