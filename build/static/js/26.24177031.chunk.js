(this.webpackJsonpstrikingDash=this.webpackJsonpstrikingDash||[]).push([[26],{617:function(e,t,a){"use strict";a.r(t);a(143);var n=a(73),r=(a(144),a(34)),i=(a(501),a(500)),l=(a(256),a(191)),u=(a(193),a(145)),s=a(9),o=a(46),c=(a(466),a(468)),d=a(0),m=a.n(d),f=a(18),v=a.n(f),b=a(464),E=a(462),h=a(461),p=a(203),g=a(459),_=a(125),j=a(40),A=a(8),y=a(99),O=a.n(y),k=a(51),S=a.n(k),N=a(192),w=[{title:"UID",dataIndex:"uid",key:"uid",width:120,ellipsis:!0},{title:"Email",dataIndex:"email",key:"email",width:200,ellipsis:!0},{title:"First Name",dataIndex:"first_name",key:"first_name"},{title:"Last Name",dataIndex:"last_name",key:"last_name"},{title:"Roles",dataIndex:"roles",key:"roles",width:150,ellipsis:!0,render:function(e){var t=e.map((function(e){return e.role})).join(", ");return m.a.createElement("p",null,t)}},{title:"Verified",dataIndex:"email_verified",key:"email_verified",render:function(e){return e.toString()},sorter:function(e,t){return Number(t.email_verified)-Number(e.email_verified)}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return m.a.createElement(c.a,{defaultChecked:t.user_status,title:"Status",onChange:function(e){return function(e,t){var a={data:{uid:e.uid,user_status:t}};_.c.mutate({mutation:_.a.ADMIN_UPDATE,variables:a,context:{headers:{TENANTID:"100001",Authorization:S.a.get("psp_t")}}}).then((function(t){var a,n;if(!(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.adminUpdate)||void 0===n?void 0:n.status))return N.b.error(data.message);N.b.success("".concat(e.email," user Status updated successfully."))})).catch((function(e){console.log("\ud83d\ude80 ~ file: AllAdmins.js ~ line 33 ~ handleStatusChange ~ err",e),N.b.error("Something went wrong!!")}))}(t,e)}})}},{title:"Action",dataIndex:"action",render:function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(A.b,{to:"/admin/admin/add-admin?uid=".concat(t.uid,"&first_name=").concat(t.first_name,"&last_name=").concat(t.last_name,"&email=").concat(t.email,"&status=").concat(t.status)},m.a.createElement(O.a,{name:"edit"})))},key:"last_name"}];t.default=function(){var e=Object(j.d)((function(e){return e.auth.token})),t=Object(d.useState)(""),a=Object(o.a)(t,2),c=a[0],f=a[1],y=Object(d.useState)([]),O=Object(o.a)(y,2),k=O[0],S=O[1],N=Object(d.useState)({data:[],isLoading:!0,error:""}),x=Object(o.a)(N,2),I=x[0],C=x[1];Object(d.useEffect)((function(){_.c.query({query:_.b.GET_ALL_STAFF,context:{headers:{TENANTID:"100001",Authorization:e}}}).then((function(e){var t,a;if(!(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.getAllStaff)||void 0===a?void 0:a.isAuth))return C((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"You Are not Authorized"})}));C((function(t){var a,n;return Object(s.a)(Object(s.a)({},t),{},{data:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.getAllStaff)||void 0===n?void 0:n.data,error:""})}))})).catch((function(e){C((function(e){return Object(s.a)(Object(s.a)({},e),{},{error:"Something went Wrong.!! "})}))})).finally((function(){C((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1})}))}))}),[]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{title:"Users",buttons:[m.a.createElement("div",{key:"1",className:"page-header-actions"},m.a.createElement(A.b,{to:"/admin/admin/add-admin"},m.a.createElement(g.a,{size:"small",title:"Add user",type:"primary"},m.a.createElement(v.a,{icon:"user-plus"}))))]}),m.a.createElement(E.b,null,m.a.createElement(n.a,{gutter:25},m.a.createElement(r.a,{sm:24,xs:24},m.a.createElement(h.a,{headless:!0},I.isLoading?m.a.createElement("div",{className:"spin"},m.a.createElement(u.a,null)):I.error?m.a.createElement("p",null,I.error):m.a.createElement(m.a.Fragment,null,m.a.createElement(l.a,{placeholder:"Search user",prefix:m.a.createElement(p.a,null),onChange:function(e){var t=e.target.value;f(t),S(I.data.filter((function(e){var a;return((null===e||void 0===e?void 0:e.email)+(null===e||void 0===e?void 0:e.first_name)+(null===e||void 0===e?void 0:e.last_name)+(null===e||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.role)).toLowerCase().includes(t.toLowerCase())})))}}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("span",{className:"psp_list"},m.a.createElement(i.a,{className:"table-responsive",pagination:!1,columns:w,rowKey:"uid",size:"small",dataSource:c?k:I.data,rowClassName:function(e,t){return t%2==0?"":"altTableClass"}}))))))))}}}]);