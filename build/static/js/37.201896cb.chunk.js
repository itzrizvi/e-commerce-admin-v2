(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[37],{647:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n,r,d,l,i,u,s,o,c=t(8),m=t(16),b={GET_ALL_BRAND:Object(m.d)(n||(n=Object(c.a)(["\n  query getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_description\n      brand_status\n      image\n      brand_sort_order\n      createdAt\n    }\n  }\n}"]))),GET_ALL_BRAND_WITH_CATEGORY:Object(m.d)(r||(r=Object(c.a)(["\nquery getAllBrands {\n  getAllBrands {\n    message\n    status\n    data {\n      id\n      brand_name\n      brand_slug\n      brand_status\n      brand_description\n      image\n      createdAt\n      updatedAt\n      categories {\n        id\n        cat_name\n        cat_slug\n        cat_status\n        subcategories {\n          id\n          cat_name\n          cat_slug\n          cat_status\n          subsubcategories {\n            id\n            cat_name\n            cat_slug\n            cat_status\n          }\n        }\n      }\n    }\n  }\n}\n\n"]))),GET_CATEGORIES:Object(m.d)(d||(d=Object(c.a)(["\n  query getParentCategories {\n    getParentCategories {\n      message\n      status\n      categories {\n        id\n        cat_name\n      }\n    }\n  }\n"]))),GET_SINGLE_BRAND:Object(m.d)(l||(l=Object(c.a)(["\n  query getSingleBrand($query: GetSingleBrandInput){\n    getSingleBrand(query: $query) {\n      message\n      status\n      data {\n        brand_name\n        brand_description\n        brand_status\n        brand_sort_order\n        image\n        categories {\n          id\n          cat_name\n        }\n      }\n    }\n  }\n"]))),BRAND_UPDATE:Object(m.d)(i||(i=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput, $file:Upload){\n    updateBrand(data:$data, file: $file){\n      message\n      status\n    }\n  }"]))),BRAND_UPDATE_WI:Object(m.d)(u||(u=Object(c.a)(["\n  mutation updateBrand($data: UpdateBrandInput){\n    updateBrand(data:$data){\n      message\n      status\n    }\n  }"]))),BRAND_ADD:Object(m.d)(s||(s=Object(c.a)(["\n    mutation createBrand($data: BrandCreateInput, $file:Upload) {\n      createBrand(data: $data, file:$file) {\n        message\n        status\n      }\n    }"]))),BRAND_ADD_WI:Object(m.d)(o||(o=Object(c.a)(["\n      mutation createBrand($data: BrandCreateInput) {\n        createBrand(data: $data) {\n          message\n          status\n        }\n     }"])))}},953:function(e,a,t){"use strict";t.r(a);t(200);var n=t(97),r=(t(201),t(74)),d=(t(378),t(220)),l=(t(314),t(218)),i=(t(721),t(743)),u=(t(202),t(63)),s=(t(166),t(98)),o=(t(288),t(69)),c=t(9),m=(t(289),t(52)),b=t(23),v=(t(148),t(45)),_=t(0),g=t.n(_),p=t(217),E=t(165),f=t(164),O=t(287),j=t(58),A=t(12),h=t(50),B=t(373),y=t(647),I=t(99),N=t(317),T=t.n(N),D=t(152),S=t(222),L=t(22),C=t(76),R=t(136);a.default=function(){var e,a,t,N,q;Object(L.f)("manufacture");var G=Object(j.useLocation)().search,U=T.a.parse(G),$=v.a.TextArea,P=Object(j.useHistory)(),x=Object(h.d)((function(e){return e.auth.token})),F=Object(_.useState)(!1),M=Object(b.a)(F,2),w=M[0],z=M[1],k=Object(_.useState)(!1),V=Object(b.a)(k,2),W=V[0],J=V[1],H=Object(_.useState)(!0),Y=Object(b.a)(H,2),Q=Y[0],X=Y[1],K=Object(_.useState)(""),Z=Object(b.a)(K,2),ee=Z[0],ae=Z[1],te=Object(_.useState)(""),ne=Object(b.a)(te,2),re=ne[0],de=ne[1],le=Object(_.useState)(0),ie=Object(b.a)(le,2),ue=ie[0],se=ie[1],oe=Object(_.useState)([]),ce=Object(b.a)(oe,2),me=ce[0],be=ce[1],ve=Object(_.useState)([]),_e=Object(b.a)(ve,2),ge=_e[0],pe=_e[1],Ee=Object(_.useState)({data:{},loading:!0,error:""}),fe=Object(b.a)(Ee,2),Oe=fe[0],je=fe[1],Ae=m.a.useForm(),he=Object(b.a)(Ae,1)[0],Be=g.a.createElement("div",null,g.a.createElement(B.a,null),g.a.createElement("div",{style:{marginTop:8}}," Upload "));return Object(_.useEffect)((function(){J(!0),I.b.query({query:y.a.GET_CATEGORIES,context:{headers:{TENANTID:"100001",Authorization:x}}}).then((function(e){var a,t,n=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.getParentCategories)||void 0===t?void 0:t.categories;pe(n)})),I.b.query({query:y.a.GET_SINGLE_BRAND,variables:{query:{brand_id:parseInt(null===U||void 0===U?void 0:U.id)}},context:{headers:{TENANTID:"100001",Authorization:x}}}).then((function(e){var a,t,n,r,d,l,i,u=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.getSingleBrand;if(!(null===u||void 0===u?void 0:u.status))return Object(C.a)();je({data:null===u||void 0===u?void 0:u.data,loading:!1,error:""});var s=[];null===u||void 0===u||null===(t=u.data)||void 0===t||t.categories.map((function(e){s.push(e.id)})),be(s),J(!1),X(null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.brand_status),de(Object(D.renderImage)(null===U||void 0===U?void 0:U.id,null===u||void 0===u||null===(r=u.data)||void 0===r?void 0:r.image,"brand","",!0)),he.setFieldsValue({brand_name:null===u||void 0===u||null===(d=u.data)||void 0===d?void 0:d.brand_name,brand_description:null===u||void 0===u||null===(l=u.data)||void 0===l?void 0:l.brand_description}),se(null===u||void 0===u||null===(i=u.data)||void 0===i?void 0:i.brand_sort_order)}))}),[]),g.a.createElement(g.a.Fragment,null,g.a.createElement(p.a,{title:"Manage Manufacture | Edit Manufacture ".concat((null===Oe||void 0===Oe||null===(e=Oe.data)||void 0===e?void 0:e.brand_name)?"(".concat(null===Oe||void 0===Oe||null===(a=Oe.data)||void 0===a?void 0:a.brand_name,")"):"")}),g.a.createElement(E.b,null,g.a.createElement(n.a,{gutter:25},g.a.createElement(r.a,{sm:24,xs:24},g.a.createElement(f.a,{headless:!0},W?g.a.createElement("div",{style:{textAlign:"center"}},g.a.createElement(s.a,{tip:"processing..."})):g.a.createElement(m.a,{style:{width:"100%"},form:he,name:"editBrand",onFinish:function(e){z(!0);var a=[];me.forEach((function(e){a.push({cat_id:e})}));var t=Object(c.a)(Object(c.a)({},e),{},{brand_status:Q,brand_sort_order:ue,categories:a,brand_id:parseInt(null===U||void 0===U?void 0:U.id)});I.a.mutate({mutation:ee?y.a.BRAND_UPDATE:y.a.BRAND_UPDATE_WI,variables:ee?{data:t,file:ee}:{data:t},refetchQueries:[{query:y.a.GET_ALL_BRAND,context:{headers:{TENANTID:"100001",Authorization:x}}},["getAllBrands"]],context:{headers:{TENANTID:"100001",Authorization:x}}}).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.updateBrand;if(!(null===t||void 0===t?void 0:t.status))return Object(C.a)();setTimeout((function(){P.push("/admin/brand/list")}),1e3),o.b.success(null===t||void 0===t?void 0:t.message)})).finally((function(){return z(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},g.a.createElement(m.a.Item,{rules:[{required:!0,max:30,message:"Please Enter Manufacture Name"}],name:"brand_name",label:"Name"},g.a.createElement(v.a,{placeholder:"Enter Manufacture Name",defaultValue:null===Oe||void 0===Oe||null===(t=Oe.data)||void 0===t?void 0:t.brand_name})),g.a.createElement(m.a.Item,{rules:[{required:!0,message:"Please Enter Manufacture Description"}],name:"brand_description",label:"Description"},g.a.createElement($,{rows:4,placeholder:"Enter Manufacture Description",defaultValue:null===Oe||void 0===Oe||null===(N=Oe.data)||void 0===N?void 0:N.brand_description})),g.a.createElement(m.a.Item,{label:"Categories"},g.a.createElement(u.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Categories",defaultValue:me,onChange:function(e){return be(e)},optionLabelProp:"label"},ge.map((function(e){return g.a.createElement(u.a.Option,{key:e.id,value:e.id,label:e.cat_name},g.a.createElement("div",{className:"demo-option-label-item"},e.cat_name))})))),g.a.createElement(m.a.Item,{label:"Sort Order"},g.a.createElement(i.a,{defaultValue:null===Oe||void 0===Oe||null===(q=Oe.data)||void 0===q?void 0:q.brand_sort_order,onChange:se,style:{width:"100%"}})),g.a.createElement(m.a.Item,{label:"Status"},g.a.createElement(l.a,{checked:Q,onChange:function(e){return X(e)},checkedChildren:"ON",unCheckedChildren:"OFF"})),g.a.createElement(m.a.Item,{label:"Image"},g.a.createElement(d.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:function(e){var a="image/jpeg"===e.type;a||o.b.error(R.a.ONLY_JPG_FILE_UPLOAD);var t=e.size/1024/1024<1;return t||o.b.error(R.a.FILE_MAX_1MB),a&&t&&(de(URL.createObjectURL(e)),ae(e)),!1},fileList:[]},re?g.a.createElement(S.LazyLoadImage,{src:re,onError:D.errorImageSrc,alt:"image",style:{width:"100%"}}):Be)),g.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},g.a.createElement(m.a.Item,null,g.a.createElement(O.a,{loading:w,size:"default",htmlType:"submit",type:"primary",raised:!0},w?"Processing":"Save"),g.a.createElement(A.b,{to:"/admin/brand/list"},g.a.createElement(O.a,{style:{marginLeft:10},type:"light",size:"default"},"Cancel"))))))))))}}}]);