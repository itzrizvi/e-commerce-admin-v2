(this.webpackJsonpprime_server_parts=this.webpackJsonpprime_server_parts||[]).push([[22],{1038:function(e,n,t){"use strict";t.r(n);t(196);var a=t(95),l=(t(197),t(72)),o=(t(708),t(716)),r=(t(304),t(214)),i=(t(162),t(96)),c=t(9),u=(t(278),t(50)),s=t(23),d=(t(145),t(44)),m=t(0),v=t.n(m),f=t(213),p=t(161),b=t(160),g=t(212),h=t(56),E=t(48),y=t(45),O=t(97),j=t(22),C=t(651),N=t.n(C),T=(t(652),t(653)),x=t.n(T),B=t(654),k=t.n(B),A=t(662);C.Quill.register("modules/imageResize",x.a),C.Quill.register("modules/htmlEditButton",k.a);var _={toolbar:[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]],imageResize:{parchment:C.Quill.import("parchment"),modules:["Resize","DisplaySize"]},htmlEditButton:{okText:"Save",msg:'Edit HTML here, when you click "Save" the quill editor\'s contents will be replaced'}};n.default=function(){var e,n;Object(j.f)("banner");var t=Object(h.useParams)(),C=d.a.TextArea,T=Object(h.useHistory)(),x=Object(E.d)((function(e){return e.auth.token})),B=Object(m.useState)(!1),k=Object(s.a)(B,2),S=k[0],w=k[1],P=Object(m.useState)(""),I=Object(s.a)(P,2),R=I[0],q=I[1],z=Object(m.useState)(""),L=Object(s.a)(z,2),D=L[0],F=L[1],V=Object(m.useState)(!1),G=Object(s.a)(V,2),H=G[0],$=G[1],M=Object(m.useState)(!0),Q=Object(s.a)(M,2),U=Q[0],J=Q[1],K=Object(m.useState)({data:{},loading:!0,error:""}),W=Object(s.a)(K,2),Y=W[0],X=W[1],Z=u.a.useForm(),ee=Object(s.a)(Z,1)[0];return Object(m.useEffect)((function(){parseInt(null===t||void 0===t?void 0:t.id)&&O.b.query({query:A.a.GET_SINGLE_BANNER,variables:{banner_id:parseInt(null===t||void 0===t?void 0:t.id)},context:{headers:{TENANTID:"100001",Authorization:x}},fetchPolicy:"network-only"}).then((function(e){var n,t,a,l,o,r,i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.getSingleBanner;i.status&&(X({data:null===i||void 0===i?void 0:i.data,loading:!1,error:""}),ee.setFieldsValue({name:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.name}),F(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.content),q(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.content),J(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.status),$("custom"===(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.layout_type)))})).catch((function(e){console.log(e),X({data:{},loading:!1,error:"Something went worng"})}))}),[null===t||void 0===t?void 0:t.id]),v.a.createElement(v.a.Fragment,null,v.a.createElement(f.a,{title:"Manage Banner | Edit Banner ".concat((null===Y||void 0===Y||null===(e=Y.data)||void 0===e?void 0:e.name)?"(".concat(null===Y||void 0===Y||null===(n=Y.data)||void 0===n?void 0:n.name,")"):"")}),v.a.createElement(p.b,null,v.a.createElement(a.a,{gutter:25},v.a.createElement(l.a,{sm:24,xs:24},v.a.createElement(b.a,{headless:!0},Y.loading?v.a.createElement("div",{style:{textAlign:"center"}},v.a.createElement(i.a,{tip:"processing..."})):v.a.createElement(u.a,{style:{width:"100%"},form:ee,name:"EditBanner",onFinish:function(e){var n;w(!0),n=H?{layout_type:"custom",content:D}:{layout_type:"dynamic",content:R},O.b.mutate({mutation:A.a.BANNER_UPDATE,variables:{data:Object(c.a)(Object(c.a)(Object(c.a)({},e),n),{},{status:U,banner_id:parseInt(null===t||void 0===t?void 0:t.id)})},refetchQueries:[{query:A.a.GET_ALL_BANNER,context:{headers:{TENANTID:"100001",Authorization:x}},fetchPolicy:"network-only"},["getAllBanners"]],context:{headers:{TENANTID:"100001",Authorization:x}}}).then((function(e){var n,t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.updateBanner;if(!(null===t||void 0===t?void 0:t.status))return y.b.error("Something Went wrong !!");setTimeout((function(){T.push("/admin/banner/list")}),2e3),y.b.success(null===t||void 0===t?void 0:t.message)})).catch((function(e){y.b.error("Something Went wrong !!")})).finally((function(){return w(!1)}))},onFinishFailed:function(e){return console.log("form error info:\n",e)},labelCol:{span:4}},v.a.createElement(u.a.Item,{rules:[{required:!0,max:100,message:"Please enter banner name"}],name:"name",label:"Name"},v.a.createElement(d.a,{style:{width:"50%"},placeholder:"Enter banner name"})),v.a.createElement(u.a.Item,{label:"Status"},v.a.createElement(r.a,{checked:U,onChange:function(e){return J(e)}})),v.a.createElement(u.a.Item,{label:"Custom HTML"},v.a.createElement(r.a,{checked:H,onChange:function(e){return $(e)}})),!H&&v.a.createElement(u.a.Item,{label:"Content"},v.a.createElement(N.a,{theme:"snow",value:R,modules:_,placeholder:"Content goes here...",onChange:q})),H&&v.a.createElement(u.a.Item,{label:"Custom HTML"},v.a.createElement(C,{style:{height:200},defaultValue:D,onChange:function(e){return F(e.target.value)},placeholder:"Paste your HTML Code Here..."})),v.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},v.a.createElement(o.a,{title:"Cancel Task",placement:"topRight",okText:"Yes",cancelText:"No",onConfirm:function(){return T.push("/admin/banner/list")}},v.a.createElement(g.a,{style:{marginRight:10},type:"light",size:"default"},"Cancel")),v.a.createElement(g.a,{loading:S,size:"default",htmlType:"submit",type:"primary",raised:!0},S?"Processing":"Update Banner"))))))))}},661:function(e,n,t){"use strict";var a=t(2),l=t(5),o=t(73),r=t(0),i=t(41),c=t(308);function u(e){return!(!e||!e.then)}n.a=function(e){var n=r.useRef(!1),t=r.useRef(null),s=Object(o.a)(!1),d=Object(l.a)(s,2),m=d[0],v=d[1],f=e.close,p=function(){null===f||void 0===f||f.apply(void 0,arguments)};r.useEffect((function(){var n=null;return e.autoFocus&&(n=setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.focus()}))),function(){n&&clearTimeout(n)}}),[]);var b=e.type,g=e.children,h=e.prefixCls,E=e.buttonProps;return r.createElement(i.a,Object(a.a)({},Object(c.a)(b),{onClick:function(t){var a=e.actionFn;if(!n.current)if(n.current=!0,a){var l;if(e.emitEvent){if(l=a(t),e.quitOnNullishReturnValue&&!u(l))return n.current=!1,void p(t)}else if(a.length)l=a(f),n.current=!1;else if(!(l=a()))return void p();!function(e){u(e)&&(v(!0),e.then((function(){v(!1,!0),p.apply(void 0,arguments),n.current=!1}),(function(e){console.error(e),v(!1,!0),n.current=!1})))}(l)}else p()},loading:m,prefixCls:h},E,{ref:t}),g)}},662:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a,l,o,r,i=t(8),c=t(16),u={BANNER_ADD:Object(c.d)(a||(a=Object(i.a)(["\n    mutation addBanner($data: BannerInput) {\n      addBanner(data: $data) {\n        message\n        status\n        id\n      }\n    }\n  "]))),GET_ALL_BANNER:Object(c.d)(l||(l=Object(i.a)(["\n    query getAllBanners {\n      getAllBanners {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          status\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),GET_SINGLE_BANNER:Object(c.d)(o||(o=Object(i.a)(["\n    query getSingleBanner($banner_id: Int!) {\n      getSingleBanner(query: { banner_id: $banner_id }) {\n        message\n        status\n        data {\n          id\n          name\n          slug\n          content\n          layout_type\n          status\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),BANNER_UPDATE:Object(c.d)(r||(r=Object(i.a)(["\n    mutation updateBanner($data: UpdateBannerInput) {\n      updateBanner(data: $data) {\n        message\n        status\n      }\n    }\n  "])))}},708:function(e,n,t){"use strict";t(42),t(98),t(316),t(709)},709:function(e,n,t){},716:function(e,n,t){"use strict";var a=t(2),l=t(5),o=t(164),r=t(4),i=t.n(r),c=t(43),u=t(14),s=t(0),d=t(67),m=t(228),v=t(25),f=t(41),p=t(308),b=t(661),g=t(99),h=t(90),E=t(288),y=function(e){var n=e.prefixCls,t=e.okButtonProps,l=e.cancelButtonProps,o=e.title,r=e.cancelText,i=e.okText,c=e.okType,u=e.icon,m=e.showCancel,v=void 0===m||m,y=e.close,O=e.onConfirm,j=e.onCancel,C=s.useContext(d.b).getPrefixCls;return s.createElement(g.a,{componentName:"Popconfirm",defaultLocale:h.a.Popconfirm},(function(e){return s.createElement("div",{className:"".concat(n,"-inner-content")},s.createElement("div",{className:"".concat(n,"-message")},u&&s.createElement("span",{className:"".concat(n,"-message-icon")},u),s.createElement("div",{className:"".concat(n,"-message-title")},Object(E.a)(o))),s.createElement("div",{className:"".concat(n,"-buttons")},v&&s.createElement(f.a,Object(a.a)({onClick:j,size:"small"},l),null!==r&&void 0!==r?r:e.cancelText),s.createElement(b.a,{buttonProps:Object(a.a)(Object(a.a)({size:"small"},Object(p.a)(c)),t),actionFn:O,close:y,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==i&&void 0!==i?i:e.okText)))}))},O=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]])}return t},j=s.forwardRef((function(e,n){var t=s.useContext(d.b).getPrefixCls,r=Object(c.a)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),f=Object(l.a)(r,2),p=f[0],b=f[1],g=function(n,t){var a,l;b(n,!0),null===(a=e.onVisibleChange)||void 0===a||a.call(e,n,t),null===(l=e.onOpenChange)||void 0===l||l.call(e,n,t)},h=e.prefixCls,E=e.placement,j=void 0===E?"top":E,C=e.trigger,N=void 0===C?"click":C,T=e.okType,x=void 0===T?"primary":T,B=e.icon,k=void 0===B?s.createElement(o.a,null):B,A=e.children,_=e.overlayClassName,S=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),w=t("popover",h),P=t("popconfirm",h),I=i()(P,_);return s.createElement(m.a,Object(a.a)({},S,{trigger:N,prefixCls:w,placement:j,onOpenChange:function(n){var t=e.disabled;void 0!==t&&t||g(n)},open:p,ref:n,overlayClassName:I,_overlay:s.createElement(y,Object(a.a)({okType:x,icon:k},e,{prefixCls:w,close:function(e){g(!1,e)},onConfirm:function(n){var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(void 0,n)},onCancel:function(n){var t;g(!1,n),null===(t=e.onCancel)||void 0===t||t.call(void 0,n)}}))}),Object(v.a)(A,{onKeyDown:function(e){var n,t;s.isValidElement(A)&&(null===(t=null===A||void 0===A?void 0:(n=A.props).onKeyDown)||void 0===t||t.call(n,e)),function(e){e.keyCode===u.a.ESC&&p&&g(!1,e)}(e)}}))}));n.a=j}}]);